================================================================================
                        CODE COLLECTION REPORT
================================================================================
Generated Time    : 2025-11-16 18:22:05
Technology Stack  : all
Target Path       : .\src
Config Bypass     : False
Total Files       : 119
Output Location   : D:\covider-fe\docs\collection_all_._src_20251116_182205.txt
================================================================================
================================================================================
FILE: D:\covider-fe\src\App.css
RELATIVE PATH: src\App.css
================================================================================
#root {
  max-width: 1280px;
  margin: 0 auto;
  padding: 2rem;
  text-align: center;
}

.logo {
  height: 6em;
  padding: 1.5em;
  will-change: filter;
  transition: filter 300ms;
}
.logo:hover {
  filter: drop-shadow(0 0 2em #646cffaa);
}
.logo.react:hover {
  filter: drop-shadow(0 0 2em #61dafbaa);
}

@keyframes logo-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@media (prefers-reduced-motion: no-preference) {
  a:nth-of-type(2) .logo {
    animation: logo-spin infinite 20s linear;
  }
}

.card {
  padding: 2em;
}

.read-the-docs {
  color: #888;
}

================================================================================
FILE: D:\covider-fe\src\App.tsx
RELATIVE PATH: src\App.tsx
================================================================================
import React from 'react';
import { BrowserRouter, Routes, Route, Navigate } from 'react-router-dom';
import { QueryClient, QueryClientProvider } from '@tanstack/react-query';
import { ThemeProvider } from './providers/ThemeProvider';
import { Toaster } from '@/components/ui/toaster';
import MainLayout from './components/layout/MainLayout';
import DashboardPage from './features/dashboard/DashboardPage';
import AnalyticsPage from './features/analytics/AnalyticsPage';
import DataTablesPage from './features/data-tables/DataTablesPage';
import CountriesPage from './features/countries/CountriesPage';
import ReportsPage from './features/reports/ReportsPage';

// React Query client configuration
const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      refetchOnWindowFocus: false,
      retry: 1,
      staleTime: 5 * 60 * 1000, // 5 minutes
    },
  },
});

function App() {
  return (
    <QueryClientProvider client={queryClient}>
      <ThemeProvider defaultTheme="system" storageKey="covid-dashboard-theme">
        <BrowserRouter>
          <Routes>
            <Route path="/" element={<MainLayout />}>
              <Route index element={<Navigate to="/dashboard" replace />} />
              <Route path="dashboard" element={<DashboardPage />} />
              <Route path="analytics" element={<AnalyticsPage />} />
              <Route path="data-tables" element={<DataTablesPage />} />
              <Route path="countries" element={<CountriesPage />} />
              <Route path="reports" element={<ReportsPage />} />
            </Route>
          </Routes>
        </BrowserRouter>
        <Toaster />
      </ThemeProvider>
    </QueryClientProvider>
  );
}

================================================================================
FILE: D:\covider-fe\src\index.css
RELATIVE PATH: src\index.css
================================================================================
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 0 0% 3.9%;
    --card: 0 0% 100%;
    --card-foreground: 0 0% 3.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 0 0% 3.9%;
    --primary: 0 0% 9%;
    --primary-foreground: 0 0% 98%;
    --secondary: 0 0% 96.1%;
    --secondary-foreground: 0 0% 9%;
    --muted: 0 0% 96.1%;
    --muted-foreground: 0 0% 45.1%;
    --accent: 0 0% 96.1%;
    --accent-foreground: 0 0% 9%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 98%;
    --border: 0 0% 89.8%;
    --input: 0 0% 89.8%;
    --ring: 0 0% 3.9%;
    --radius: 0.5rem;
    --chart-1: 12 76% 61%;
    --chart-2: 173 58% 39%;
    --chart-3: 197 37% 24%;
    --chart-4: 43 74% 66%;
    --chart-5: 27 87% 67%;
  }

  .dark {
    --background: 0 0% 3.9%;
    --foreground: 0 0% 98%;
    --card: 0 0% 3.9%;
    --card-foreground: 0 0% 98%;
    --popover: 0 0% 3.9%;
    --popover-foreground: 0 0% 98%;
    --primary: 0 0% 98%;
    --primary-foreground: 0 0% 9%;
    --secondary: 0 0% 14.9%;
    --secondary-foreground: 0 0% 98%;
    --muted: 0 0% 14.9%;
    --muted-foreground: 0 0% 63.9%;
    --accent: 0 0% 14.9%;
    --accent-foreground: 0 0% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 98%;
    --border: 0 0% 14.9%;
    --input: 0 0% 14.9%;
    --ring: 0 0% 83.1%;
    --chart-1: 220 70% 50%;
    --chart-2: 160 60% 45%;
    --chart-3: 30 80% 55%;
    --chart-4: 280 65% 60%;
    --chart-5: 340 75% 55%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}
================================================================================
FILE: D:\covider-fe\src\main.tsx
RELATIVE PATH: src\main.tsx
================================================================================
// ============================================================================
// FILE: src/main.tsx
// ============================================================================
import React from 'react';
import ReactDOM from 'react-dom/client';
import App from './app/App';
import './styles/globals.css';

ReactDOM.createRoot(document.getElementById('root')!).render(
  <React.StrictMode>
    <App />
  </React.StrictMode>
);

================================================================================
FILE: D:\covider-fe\src\vite-env.d.ts
RELATIVE PATH: src\vite-env.d.ts
================================================================================

================================================================================
FILE: D:\covider-fe\src\app\App.tsx
RELATIVE PATH: src\app\App.tsx
================================================================================
// ============================================================================
// FILE: src/app/App.tsx (UPDATED with Advanced Analytics route)
// ============================================================================
import { BrowserRouter, Routes, Route, Navigate } from "react-router-dom";
import { QueryClient, QueryClientProvider } from "@tanstack/react-query";
import { ThemeProvider } from "./providers/ThemeProvider";
import { AppToaster } from "@/components/ui/sonner-provider";

import MainLayout from "@/components/layout/MainLayout";
import DashboardPage from "@/features/dashboard/DashboardPage";
import AnalyticsPage from "@/features/analytics/AnalyticsPage";
import AdvancedAnalyticsPage from "@/features/advanced-analytics/AdvancedAnalyticsPage";
import DataTablesPage from "@/features/data-tables/DataTablesPage";
import CountriesPage from "@/features/countries/CountriesPage";
import ReportsPage from "@/features/reports/ReportsPage";

const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      refetchOnWindowFocus: false,
      retry: 1,
      staleTime: 5 * 60 * 1000,
    },
  },
});

export default function App() {
  return (
    <QueryClientProvider client={queryClient}>
      <ThemeProvider defaultTheme="system" storageKey="covid-dashboard-theme">
        <BrowserRouter>
          <Routes>
            <Route path="/" element={<MainLayout />}>
              <Route index element={<Navigate to="/dashboard" replace />} />
              <Route path="dashboard" element={<DashboardPage />} />
              <Route path="analytics" element={<AnalyticsPage />} />
              <Route path="advanced-analytics" element={<AdvancedAnalyticsPage />} />
              <Route path="data-tables" element={<DataTablesPage />} />
              <Route path="countries" element={<CountriesPage />} />
              <Route path="reports" element={<ReportsPage />} />
            </Route>
          </Routes>
        </BrowserRouter>

        {/* FIXED: use AppToaster instead of Toaster */}
        <AppToaster />
      </ThemeProvider>
    </QueryClientProvider>
  );
}

================================================================================
FILE: D:\covider-fe\src\app\Router.tsx
RELATIVE PATH: src\app\Router.tsx
================================================================================

================================================================================
FILE: D:\covider-fe\src\app\providers\AppProviders.tsx
RELATIVE PATH: src\app\providers\AppProviders.tsx
================================================================================

================================================================================
FILE: D:\covider-fe\src\app\providers\QueryProvider.tsx
RELATIVE PATH: src\app\providers\QueryProvider.tsx
================================================================================

================================================================================
FILE: D:\covider-fe\src\app\providers\ThemeProvider.tsx
RELATIVE PATH: src\app\providers\ThemeProvider.tsx
================================================================================
// ============================================================================
// FILE: src/app/providers/ThemeProvider.tsx
// ============================================================================
import { createContext, useContext, useEffect, useState } from 'react';

type Theme = 'dark' | 'light' | 'system';

interface ThemeProviderProps {
  children: React.ReactNode;
  defaultTheme?: Theme;
  storageKey?: string;
}

interface ThemeProviderState {
  theme: Theme;
  setTheme: (theme: Theme) => void;
}

const ThemeProviderContext = createContext<ThemeProviderState | undefined>(undefined);

export function ThemeProvider({
  children,
  defaultTheme = 'system',
  storageKey = 'vite-ui-theme',
}: ThemeProviderProps) {
  const [theme, setTheme] = useState<Theme>(
    () => (localStorage.getItem(storageKey) as Theme) || defaultTheme
  );

  useEffect(() => {
    const root = window.document.documentElement;
    root.classList.remove('light', 'dark');

    if (theme === 'system') {
      const systemTheme = window.matchMedia('(prefers-color-scheme: dark)').matches
        ? 'dark'
        : 'light';
      root.classList.add(systemTheme);
      return;
    }

    root.classList.add(theme);
  }, [theme]);

  const value = {
    theme,
    setTheme: (theme: Theme) => {
      localStorage.setItem(storageKey, theme);
      setTheme(theme);
    },
  };

  return (
    <ThemeProviderContext.Provider value={value}>
      {children}
    </ThemeProviderContext.Provider>
  );
}

export const useTheme = () => {
  const context = useContext(ThemeProviderContext);
  if (context === undefined)
    throw new Error('useTheme must be used within a ThemeProvider');
  return context;
};


================================================================================
FILE: D:\covider-fe\src\components\charts\AreaChart.tsx
RELATIVE PATH: src\components\charts\AreaChart.tsx
================================================================================
// ============================================================================
// FILE: src/components/charts/AreaChart.tsx
// ============================================================================
import {
  AreaChart as RechartsAreaChart,
  Area,
  XAxis,
  YAxis,
  CartesianGrid,
  Tooltip,
  Legend,
  ResponsiveContainer,
} from "recharts";
import { CHART_CONFIG, RECHARTS_THEME } from "@/config/chart.config";

interface AreaChartProps {
  data: Array<Record<string, unknown>>;
  areas: Array<{
    dataKey: string;
    name?: string;
    color?: string;
    stackId?: string;
  }>;
  xAxisKey: string;
  height?: number;
  xAxisFormatter?: (value: unknown) => string;
  yAxisFormatter?: (value: unknown) => string;
}

export default function AreaChart({
  data,
  areas,
  xAxisKey,
  height = 400,
  xAxisFormatter,
  yAxisFormatter,
}: AreaChartProps) {
  return (
    <ResponsiveContainer width="100%" height={height}>
      <RechartsAreaChart data={data}>
        <defs>
          {areas.map((area, index) => (
            <linearGradient
              key={area.dataKey}
              id={`color${area.dataKey}`}
              x1="0"
              y1="0"
              x2="0"
              y2="1"
            >
              <stop
                offset="5%"
                stopColor={area.color || CHART_CONFIG.colors.confirmed}
                stopOpacity={0.8}
              />
              <stop
                offset="95%"
                stopColor={area.color || CHART_CONFIG.colors.confirmed}
                stopOpacity={0.1}
              />
            </linearGradient>
          ))}
        </defs>
        <CartesianGrid {...RECHARTS_THEME.grid} />
        <XAxis
          dataKey={xAxisKey}
          tickFormatter={xAxisFormatter}
          style={RECHARTS_THEME.axis}
        />
        <YAxis tickFormatter={yAxisFormatter} style={RECHARTS_THEME.axis} />
        <Tooltip {...RECHARTS_THEME.tooltip} />
        <Legend />
        {areas.map((area) => (
          <Area
            key={area.dataKey}
            type="monotone"
            dataKey={area.dataKey}
            name={area.name || area.dataKey}
            stroke={area.color || CHART_CONFIG.colors.confirmed}
            fillOpacity={1}
            fill={`url(#color${area.dataKey})`}
            stackId={area.stackId}
            animationDuration={CHART_CONFIG.animation.duration}
          />
        ))}
      </RechartsAreaChart>
    </ResponsiveContainer>
  );
}

================================================================================
FILE: D:\covider-fe\src\components\charts\BarChart.tsx
RELATIVE PATH: src\components\charts\BarChart.tsx
================================================================================
// ============================================================================
// FILE: src/components/charts/BarChart.tsx
// ============================================================================
import {
  BarChart as RechartsBarChart,
  Bar,
  XAxis,
  YAxis,
  CartesianGrid,
  Tooltip,
  Legend,
  ResponsiveContainer,
} from "recharts";
import { CHART_CONFIG, RECHARTS_THEME } from "@/config/chart.config";

interface BarChartProps {
  data: Array<Record<string, unknown>>;
  bars: Array<{
    dataKey: string;
    name?: string;
    color?: string;
  }>;
  xAxisKey?: string;
  yAxisKey?: string;
  height?: number;
  layout?: "horizontal" | "vertical";
  xAxisFormatter?: (value: unknown) => string;
  yAxisFormatter?: (value: unknown) => string;
}

export default function BarChart({
  data,
  bars,
  xAxisKey,
  yAxisKey,
  height = 400,
  layout = "horizontal",
  xAxisFormatter,
  yAxisFormatter,
}: BarChartProps) {
  const isVertical = layout === "vertical";

  return (
    <ResponsiveContainer width="100%" height={height}>
      <RechartsBarChart data={data} layout={layout}>
        <CartesianGrid {...RECHARTS_THEME.grid} />
        <XAxis
          type={isVertical ? "number" : "category"}
          dataKey={isVertical ? undefined : xAxisKey}
          tickFormatter={xAxisFormatter}
          style={RECHARTS_THEME.axis}
        />
        <YAxis
          type={isVertical ? "category" : "number"}
          dataKey={isVertical ? yAxisKey : undefined}
          tickFormatter={yAxisFormatter}
          style={RECHARTS_THEME.axis}
          width={isVertical ? 120 : undefined}
        />
        <Tooltip {...RECHARTS_THEME.tooltip} />
        <Legend />
        {bars.map((bar) => (
          <Bar
            key={bar.dataKey}
            dataKey={bar.dataKey}
            name={bar.name || bar.dataKey}
            fill={bar.color || CHART_CONFIG.colors.confirmed}
            radius={isVertical ? [0, 4, 4, 0] : [4, 4, 0, 0]}
            animationDuration={CHART_CONFIG.animation.duration}
          />
        ))}
      </RechartsBarChart>
    </ResponsiveContainer>
  );
}

================================================================================
FILE: D:\covider-fe\src\components\charts\ChartContainer.tsx
RELATIVE PATH: src\components\charts\ChartContainer.tsx
================================================================================
// ============================================================================
// FILE: src/components/charts/ChartContainer.tsx
// ============================================================================
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";
import LoadingSpinner from "../feedback/LoadingSpinner";
import ErrorAlert from "../feedback/ErrorAlert";

interface ChartContainerProps {
  title: string;
  description?: string;
  isLoading?: boolean;
  error?: string;
  onRetry?: () => void;
  children: React.ReactNode;
  actions?: React.ReactNode;
}

export default function ChartContainer({
  title,
  description,
  isLoading,
  error,
  onRetry,
  children,
  actions,
}: ChartContainerProps) {
  return (
    <Card>
      <CardHeader>
        <div className="flex items-start justify-between">
          <div>
            <CardTitle>{title}</CardTitle>
            {description && (
              <CardDescription className="mt-1.5">
                {description}
              </CardDescription>
            )}
          </div>
          {actions}
        </div>
      </CardHeader>
      <CardContent>
        {isLoading ? (
          <div className="flex items-center justify-center h-80">
            <LoadingSpinner text="Loading chart..." />
          </div>
        ) : error ? (
          <ErrorAlert message={error} onRetry={onRetry} />
        ) : (
          children
        )}
      </CardContent>
    </Card>
  );
}

================================================================================
FILE: D:\covider-fe\src\components\charts\LineChart.tsx
RELATIVE PATH: src\components\charts\LineChart.tsx
================================================================================
// ============================================================================
// FILE: src/components/charts/LineChart.tsx
// ============================================================================
import {
  LineChart as RechartsLineChart,
  Line,
  XAxis,
  YAxis,
  CartesianGrid,
  Tooltip,
  Legend,
  ResponsiveContainer,
} from 'recharts';
import { CHART_CONFIG, RECHARTS_THEME } from '@/config/chart.config';

interface LineChartProps {
  data: Array<Record<string, unknown>>;
  lines: Array<{
    dataKey: string;
    name?: string;
    color?: string;
  }>;
  xAxisKey: string;
  height?: number;
  xAxisFormatter?: (value: unknown) => string;
  yAxisFormatter?: (value: unknown) => string;
  tooltipFormatter?: (value: unknown) => string;
}

// Custom Tooltip Component
interface CustomTooltipProps {
  active?: boolean;
  payload?: Array<{
    name: string;
    value: number;
    color: string;
    dataKey: string;
  }>;
  label?: string;
  labelFormatter?: (value: unknown) => string;
  valueFormatter?: (value: unknown) => string;
}

function CustomTooltip({ 
  active, 
  payload, 
  label, 
  labelFormatter, 
  valueFormatter 
}: CustomTooltipProps) {
  if (!active || !payload || payload.length === 0) {
    return null;
  }

  return (
    <div className="bg-background border border-border rounded-lg shadow-lg p-3">
      <p className="text-sm font-medium mb-2">
        {labelFormatter ? labelFormatter(label) : label}
      </p>
      <div className="space-y-1">
        {payload.map((entry, index) => (
          <div key={index} className="flex items-center gap-2 text-sm">
            <div
              className="w-3 h-3 rounded-full"
              style={{ backgroundColor: entry.color }}
            />
            <span className="text-muted-foreground">{entry.name}:</span>
            <span className="font-medium">
              {valueFormatter ? valueFormatter(entry.value) : entry.value}
            </span>
          </div>
        ))}
      </div>
    </div>
  );
}

export default function LineChart({
  data,
  lines,
  xAxisKey,
  height = 400,
  xAxisFormatter,
  yAxisFormatter,
  tooltipFormatter,
}: LineChartProps) {
  return (
    <ResponsiveContainer width="100%" height={height}>
      <RechartsLineChart data={data}>
        <CartesianGrid {...RECHARTS_THEME.grid} />
        <XAxis
          dataKey={xAxisKey}
          tickFormatter={xAxisFormatter}
          style={RECHARTS_THEME.axis}
        />
        <YAxis tickFormatter={yAxisFormatter} style={RECHARTS_THEME.axis} />
        <Tooltip
          content={
            <CustomTooltip
              labelFormatter={xAxisFormatter}
              valueFormatter={tooltipFormatter}
            />
          }
        />
        <Legend />
        {lines.map((line) => (
          <Line
            key={line.dataKey}
            type="monotone"
            dataKey={line.dataKey}
            name={line.name || line.dataKey}
            stroke={line.color || CHART_CONFIG.colors.confirmed}
            strokeWidth={2}
            dot={false}
            animationDuration={CHART_CONFIG.animation.duration}
          />
        ))}
      </RechartsLineChart>
    </ResponsiveContainer>
  );
}
================================================================================
FILE: D:\covider-fe\src\components\charts\PieChart.tsx
RELATIVE PATH: src\components\charts\PieChart.tsx
================================================================================
// ============================================================================
// FILE: src/components/charts/PieChart.tsx
// ============================================================================
import {
  PieChart as RechartsPieChart,
  Pie,
  Cell,
  Tooltip,
  Legend,
  ResponsiveContainer,
} from "recharts";
import { CHART_CONFIG } from "@/config/chart.config";

interface PieChartProps {
  data: Array<{
    name: string;
    value: number;
    color?: string;
  }>;
  height?: number;
  showLegend?: boolean;
  innerRadius?: number;
  outerRadius?: number;
}

const DEFAULT_COLORS = [
  CHART_CONFIG.colors.confirmed,
  CHART_CONFIG.colors.deaths,
  CHART_CONFIG.colors.recovered,
  CHART_CONFIG.colors.active,
  "#8b5cf6",
  "#ec4899",
  "#f59e0b",
];

export default function PieChart({
  data,
  height = 400,
  showLegend = true,
  innerRadius = 0,
  outerRadius = 100,
}: PieChartProps) {
  return (
    <ResponsiveContainer width="100%" height={height}>
      <RechartsPieChart>
        <Pie
          data={data}
          cx="50%"
          cy="50%"
          innerRadius={innerRadius}
          outerRadius={outerRadius}
          paddingAngle={2}
          dataKey="value"
          label={(entry) => `${entry.name}: ${entry.value}`}
          animationDuration={CHART_CONFIG.animation.duration}
        >
          {data.map((entry, index) => (
            <Cell
              key={`cell-${index}`}
              fill={
                entry.color || DEFAULT_COLORS[index % DEFAULT_COLORS.length]
              }
            />
          ))}
        </Pie>
        <Tooltip />
        {showLegend && <Legend />}
      </RechartsPieChart>
    </ResponsiveContainer>
  );
}

================================================================================
FILE: D:\covider-fe\src\components\charts\ScatterChart.tsx
RELATIVE PATH: src\components\charts\ScatterChart.tsx
================================================================================
// ============================================================================
// FILE: src/components/charts/ScatterChart.tsx
// ============================================================================
import {
  ScatterChart as RechartsScatterChart,
  Scatter,
  XAxis,
  YAxis,
  CartesianGrid,
  Tooltip,
  Legend,
  ResponsiveContainer,
} from "recharts";
import { CHART_CONFIG, RECHARTS_THEME } from "@/config/chart.config";

interface ScatterChartProps {
  data: Array<Record<string, unknown>>;
  xKey: string;
  yKey: string;
  nameKey?: string;
  color?: string;
  height?: number;
  xAxisFormatter?: (value: unknown) => string;
  yAxisFormatter?: (value: unknown) => string;
}

export default function ScatterChart({
  data,
  xKey,
  yKey,
  nameKey,
  color = CHART_CONFIG.colors.confirmed,
  height = 400,
  xAxisFormatter,
  yAxisFormatter,
}: ScatterChartProps) {
  return (
    <ResponsiveContainer width="100%" height={height}>
      <RechartsScatterChart>
        <CartesianGrid {...RECHARTS_THEME.grid} />
        <XAxis
          dataKey={xKey}
          tickFormatter={xAxisFormatter}
          style={RECHARTS_THEME.axis}
          type="number"
        />
        <YAxis
          dataKey={yKey}
          tickFormatter={yAxisFormatter}
          style={RECHARTS_THEME.axis}
          type="number"
        />
        <Tooltip
          {...RECHARTS_THEME.tooltip}
          cursor={{ strokeDasharray: "3 3" }}
        />
        <Legend />
        <Scatter
          name={nameKey || "Data"}
          data={data}
          fill={color}
          animationDuration={CHART_CONFIG.animation.duration}
        />
      </RechartsScatterChart>
    </ResponsiveContainer>
  );
}

================================================================================
FILE: D:\covider-fe\src\components\feedback\EmptyState.tsx
RELATIVE PATH: src\components\feedback\EmptyState.tsx
================================================================================
// ============================================================================
// FILE: src/components/feedback/EmptyState.tsx
// ============================================================================
import { FileQuestion } from "lucide-react";
import { cn } from "@/utils/cn";

interface EmptyStateProps {
  icon?: React.ReactNode;
  title: string;
  description?: string;
  action?: React.ReactNode;
  className?: string;
}

export default function EmptyState({
  icon,
  title,
  description,
  action,
  className,
}: EmptyStateProps) {
  return (
    <div
      className={cn(
        "flex flex-col items-center justify-center py-12",
        className
      )}
    >
      <div className="mb-4 text-muted-foreground">
        {icon || <FileQuestion className="h-12 w-12" />}
      </div>
      <h3 className="mb-2 text-lg font-semibold">{title}</h3>
      {description && (
        <p className="mb-4 text-center text-sm text-muted-foreground max-w-sm">
          {description}
        </p>
      )}
      {action}
    </div>
  );
}

================================================================================
FILE: D:\covider-fe\src\components\feedback\ErrorAlert.tsx
RELATIVE PATH: src\components\feedback\ErrorAlert.tsx
================================================================================
// ============================================================================
// FILE: src/components/feedback/ErrorAlert.tsx
// ============================================================================
import { AlertCircle } from "lucide-react";
import { Alert, AlertDescription, AlertTitle } from "@/components/ui/alert";
import { Button } from "@/components/ui/button";

interface ErrorAlertProps {
  title?: string;
  message: string;
  onRetry?: () => void;
}

export default function ErrorAlert({
  title = "Error",
  message,
  onRetry,
}: ErrorAlertProps) {
  return (
    <Alert variant="destructive">
      <AlertCircle className="h-4 w-4" />
      <AlertTitle>{title}</AlertTitle>
      <AlertDescription className="mt-2 flex items-center justify-between">
        <span>{message}</span>
        {onRetry && (
          <Button variant="outline" size="sm" onClick={onRetry}>
            Retry
          </Button>
        )}
      </AlertDescription>
    </Alert>
  );
}

================================================================================
FILE: D:\covider-fe\src\components\feedback\ErrorBoundary.tsx
RELATIVE PATH: src\components\feedback\ErrorBoundary.tsx
================================================================================
// ============================================================================
// FILE: src/components/feedback/ErrorBoundary.tsx
// ============================================================================
import { Component, type ErrorInfo, type ReactNode } from "react";
import { AlertCircle } from "lucide-react";
import { Button } from "@/components/ui/button";
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";

interface Props {
  children: ReactNode;
  fallback?: ReactNode;
}

interface State {
  hasError: boolean;
  error: Error | null;
}

export default class ErrorBoundary extends Component<Props, State> {
  constructor(props: Props) {
    super(props);
    this.state = { hasError: false, error: null };
  }

  static getDerivedStateFromError(error: Error): State {
    return { hasError: true, error };
  }

  componentDidCatch(error: Error, errorInfo: ErrorInfo) {
    console.error("ErrorBoundary caught an error:", error, errorInfo);
  }

  handleReset = () => {
    this.setState({ hasError: false, error: null });
  };

  render() {
    if (this.state.hasError) {
      if (this.props.fallback) {
        return this.props.fallback;
      }

      return (
        <div className="flex items-center justify-center min-h-screen p-4">
          <Card className="w-full max-w-md">
            <CardHeader>
              <div className="flex items-center gap-2">
                <AlertCircle className="h-5 w-5 text-destructive" />
                <CardTitle>Something went wrong</CardTitle>
              </div>
              <CardDescription>
                An unexpected error occurred. Please try refreshing the page.
              </CardDescription>
            </CardHeader>
            <CardContent className="space-y-4">
              {this.state.error && (
                <pre className="p-4 bg-muted rounded-lg text-sm overflow-auto">
                  {this.state.error.message}
                </pre>
              )}
              <div className="flex gap-2">
                <Button onClick={this.handleReset} className="flex-1">
                  Try Again
                </Button>
                <Button
                  variant="outline"
                  onClick={() => window.location.reload()}
                  className="flex-1"
                >
                  Refresh Page
                </Button>
              </div>
            </CardContent>
          </Card>
        </div>
      );
    }

    return this.props.children;
  }
}

================================================================================
FILE: D:\covider-fe\src\components\feedback\LoadingSpinner.tsx
RELATIVE PATH: src\components\feedback\LoadingSpinner.tsx
================================================================================
// ============================================================================
// FILE: src/components/feedback/LoadingSpinner.tsx
// ============================================================================
import { Loader2 } from "lucide-react";
import { cn } from "@/utils/cn";

interface LoadingSpinnerProps {
  size?: "sm" | "md" | "lg";
  className?: string;
  text?: string;
}

export default function LoadingSpinner({
  size = "md",
  className,
  text,
}: LoadingSpinnerProps) {
  const sizeClasses = {
    sm: "h-4 w-4",
    md: "h-8 w-8",
    lg: "h-12 w-12",
  };

  return (
    <div
      className={cn(
        "flex flex-col items-center justify-center gap-2",
        className
      )}
    >
      <Loader2 className={cn("animate-spin text-primary", sizeClasses[size])} />
      {text && <p className="text-sm text-muted-foreground">{text}</p>}
    </div>
  );
}

================================================================================
FILE: D:\covider-fe\src\components\feedback\SkeletonLoader.tsx
RELATIVE PATH: src\components\feedback\SkeletonLoader.tsx
================================================================================
// ============================================================================
// FILE: src/components/feedback/SkeletonLoader.tsx
// ============================================================================
import { Skeleton } from "@/components/ui/skeleton";
import { Card, CardContent, CardHeader } from "@/components/ui/card";

export function KPICardSkeleton() {
  return (
    <Card>
      <CardHeader className="pb-2">
        <Skeleton className="h-4 w-24" />
      </CardHeader>
      <CardContent>
        <Skeleton className="h-8 w-32" />
      </CardContent>
    </Card>
  );
}

export function TableSkeleton() {
  return (
    <div className="space-y-3">
      <Skeleton className="h-10 w-full" />
      {[...Array(5)].map((_, i) => (
        <Skeleton key={i} className="h-16 w-full" />
      ))}
    </div>
  );
}

export function ChartSkeleton() {
  return (
    <div className="space-y-4">
      <Skeleton className="h-8 w-48" />
      <Skeleton className="h-[400px] w-full" />
    </div>
  );
}

export function CardGridSkeleton({ count = 6 }: { count?: number }) {
  return (
    <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-3">
      {[...Array(count)].map((_, i) => (
        <Card key={i}>
          <CardHeader>
            <Skeleton className="h-6 w-32" />
            <Skeleton className="h-4 w-24 mt-2" />
          </CardHeader>
          <CardContent className="space-y-3">
            <div className="grid grid-cols-2 gap-2">
              {[...Array(4)].map((_, j) => (
                <Skeleton key={j} className="h-12 w-full" />
              ))}
            </div>
          </CardContent>
        </Card>
      ))}
    </div>
  );
}

================================================================================
FILE: D:\covider-fe\src\components\layout\MainLayout.tsx
RELATIVE PATH: src\components\layout\MainLayout.tsx
================================================================================
// ============================================================================
// FILE: src/components/layout/MainLayout.tsx
// ============================================================================
import { Outlet } from "react-router-dom";
import Sidebar from "./Sidebar";
import Navbar from "./Navbar";

export default function MainLayout() {
  return (
    <div className="flex h-screen overflow-hidden bg-background">
      <Sidebar />

      <div className="flex flex-1 flex-col overflow-hidden">
        <Navbar />

        <main className="flex-1 overflow-y-auto p-6">
          <Outlet />
        </main>
      </div>
    </div>
  );
}

================================================================================
FILE: D:\covider-fe\src\components\layout\Navbar.tsx
RELATIVE PATH: src\components\layout\Navbar.tsx
================================================================================
// ============================================================================
// FILE: src/components/layout/Navbar.tsx
// ============================================================================
import { Moon, Sun, Monitor } from "lucide-react";
import { Button } from "@/components/ui/button";
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuTrigger,
} from "@/components/ui/dropdown-menu";
import { useTheme } from "@/app/providers/ThemeProvider";

export default function Navbar() {
  const { theme, setTheme } = useTheme();

  return (
    <div className="border-b bg-card">
      <div className="flex h-16 items-center px-6">
        <div className="ml-auto flex items-center space-x-4">
          {/* Theme Switcher */}
          <DropdownMenu>
            <DropdownMenuTrigger asChild>
              <Button variant="ghost" size="icon" className="h-9 w-9 relative">
                {/* Dynamic Active Icon */}
                {theme === "light" && (
                  <Sun className="h-4 w-4 transition-all" />
                )}
                {theme === "dark" && (
                  <Moon className="h-4 w-4 transition-all" />
                )}
                {theme === "system" && (
                  <Monitor className="h-4 w-4 transition-all" />
                )}

                <span className="sr-only">Toggle theme</span>
              </Button>
            </DropdownMenuTrigger>

            <DropdownMenuContent align="end">
              <DropdownMenuItem
                onClick={() => setTheme("light")}
                className={theme === "light" ? "bg-muted font-medium" : ""}
              >
                <Sun className="mr-2 h-4 w-4" />
                Light
              </DropdownMenuItem>

              <DropdownMenuItem
                onClick={() => setTheme("dark")}
                className={theme === "dark" ? "bg-muted font-medium" : ""}
              >
                <Moon className="mr-2 h-4 w-4" />
                Dark
              </DropdownMenuItem>

              <DropdownMenuItem
                onClick={() => setTheme("system")}
                className={theme === "system" ? "bg-muted font-medium" : ""}
              >
                <Monitor className="mr-2 h-4 w-4" />
                System
              </DropdownMenuItem>
            </DropdownMenuContent>
          </DropdownMenu>
        </div>
      </div>
    </div>
  );
}

================================================================================
FILE: D:\covider-fe\src\components\layout\PageHeader.tsx
RELATIVE PATH: src\components\layout\PageHeader.tsx
================================================================================
// ============================================================================
// FILE: src/components/layout/PageHeader.tsx
// ============================================================================
interface PageHeaderProps {
  title: string;
  description?: string;
  children?: React.ReactNode;
}

export default function PageHeader({
  title,
  description,
  children,
}: PageHeaderProps) {
  return (
    <div className="flex items-center justify-between mb-6">
      <div className="space-y-1">
        <h1 className="text-3xl font-bold tracking-tight">{title}</h1>
        {description && <p className="text-muted-foreground">{description}</p>}
      </div>
      {children && (
        <div className="flex items-center space-x-2">{children}</div>
      )}
    </div>
  );
}

================================================================================
FILE: D:\covider-fe\src\components\layout\Sidebar.tsx
RELATIVE PATH: src\components\layout\Sidebar.tsx
================================================================================
// ============================================================================
// FILE: src/components/layout/Sidebar.tsx (UPDATED with Advanced Analytics)
// ============================================================================
import { NavLink } from 'react-router-dom';
import { cn } from '@/utils/cn';
import {
  LayoutDashboard,
  LineChart,
  Table,
  Globe,
  FileText,
  Activity,
  Brain,
} from 'lucide-react';
import { ScrollArea } from '@/components/ui/scroll-area';
import { Separator } from '@/components/ui/separator';

const navigationItems = [
  {
    title: 'Dashboard',
    href: '/dashboard',
    icon: LayoutDashboard,
  },
  {
    title: 'Analytics',
    href: '/analytics',
    icon: LineChart,
  },
  {
    title: 'Advanced Analytics',
    href: '/advanced-analytics',
    icon: Brain,
  },
  {
    title: 'Data Tables',
    href: '/data-tables',
    icon: Table,
  },
  {
    title: 'Countries',
    href: '/countries',
    icon: Globe,
  },
  {
    title: 'Reports',
    href: '/reports',
    icon: FileText,
  },
];

interface SidebarProps {
  className?: string;
}

export default function Sidebar({ className }: SidebarProps) {
  return (
    <div className={cn('pb-12 w-64 border-r bg-card', className)}>
      <div className="space-y-4 py-4">
        {/* Logo Section */}
        <div className="px-6 py-2">
          <div className="flex items-center space-x-2">
            <Activity className="h-6 w-6 text-primary" />
            <h2 className="text-lg font-bold tracking-tight">COVID-19 Tracker</h2>
          </div>
        </div>
        
        <Separator />
        
        {/* Navigation */}
        <ScrollArea className="px-3 py-2">
          <div className="space-y-1">
            {navigationItems.map((item) => (
              <NavLink
                key={item.href}
                to={item.href}
                className={({ isActive }) =>
                  cn(
                    'flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium transition-all hover:bg-accent',
                    isActive
                      ? 'bg-accent text-accent-foreground'
                      : 'text-muted-foreground hover:text-foreground'
                  )
                }
              >
                <item.icon className="h-4 w-4" />
                {item.title}
              </NavLink>
            ))}
          </div>
        </ScrollArea>
        
        <Separator />
        
        {/* Footer Section */}
        <div className="px-6 py-2">
          <p className="text-xs text-muted-foreground">
            Real-time COVID-19 statistics and analytics
          </p>
        </div>
      </div>
    </div>
  );
}

================================================================================
FILE: D:\covider-fe\src\components\modals\BaseModal.tsx
RELATIVE PATH: src\components\modals\BaseModal.tsx
================================================================================
// ============================================================================
// FILE: src/components/modals/BaseModal.tsx
// ============================================================================
import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogHeader,
  DialogTitle,
} from "@/components/ui/dialog";

interface BaseModalProps {
  open: boolean;
  onOpenChange: (open: boolean) => void;
  title: string;
  description?: string;
  children: React.ReactNode;
  size?: "sm" | "md" | "lg" | "xl" | "full";
}

export default function BaseModal({
  open,
  onOpenChange,
  title,
  description,
  children,
  size = "md",
}: BaseModalProps) {
  const sizeClasses = {
    sm: "max-w-md",
    md: "max-w-lg",
    lg: "max-w-2xl",
    xl: "max-w-4xl",
    full: "max-w-7xl",
  };

  return (
    <Dialog open={open} onOpenChange={onOpenChange}>
      <DialogContent className={sizeClasses[size]}>
        <DialogHeader>
          <DialogTitle>{title}</DialogTitle>
          {description && <DialogDescription>{description}</DialogDescription>}
        </DialogHeader>
        <div className="mt-4">{children}</div>
      </DialogContent>
    </Dialog>
  );
}

================================================================================
FILE: D:\covider-fe\src\components\modals\ConfirmationModal.tsx
RELATIVE PATH: src\components\modals\ConfirmationModal.tsx
================================================================================
// ============================================================================
// FILE: src/components/modals/ConfirmationModal.tsx
// ============================================================================
import BaseModal from './BaseModal';
import { Button } from '@/components/ui/button';
import { AlertTriangle } from 'lucide-react';

interface ConfirmationModalProps {
  open: boolean;
  onOpenChange: (open: boolean) => void;
  title: string;
  description: string;
  onConfirm: () => void;
  confirmText?: string;
  cancelText?: string;
  variant?: 'default' | 'destructive';
}

export default function ConfirmationModal({
  open,
  onOpenChange,
  title,
  description,
  onConfirm,
  confirmText = 'Confirm',
  cancelText = 'Cancel',
  variant = 'default',
}: ConfirmationModalProps) {
  const handleConfirm = () => {
    onConfirm();
    onOpenChange(false);
  };

  return (
    <BaseModal
      open={open}
      onOpenChange={onOpenChange}
      title={title}
      description={description}
      size="sm"
    >
      {variant === 'destructive' && (
        <div className="flex items-center gap-2 p-4 mb-4 bg-destructive/10 rounded-lg">
          <AlertTriangle className="h-5 w-5 text-destructive" />
          <p className="text-sm text-destructive">This action cannot be undone.</p>
        </div>
      )}
      
      <div className="flex justify-end gap-2">
        <Button variant="outline" onClick={() => onOpenChange(false)}>
          {cancelText}
        </Button>
        <Button
          variant={variant === 'destructive' ? 'destructive' : 'default'}
          onClick={handleConfirm}
        >
          {confirmText}
        </Button>
      </div>
    </BaseModal>
  );
}


================================================================================
FILE: D:\covider-fe\src\components\modals\InfoModal.tsx
RELATIVE PATH: src\components\modals\InfoModal.tsx
================================================================================
// ============================================================================
// FILE: src/components/modals/InfoModal.tsx
// ============================================================================
import BaseModal from "./BaseModal";
import { Button } from "@/components/ui/button";
import { Info } from "lucide-react";

interface InfoModalProps {
  open: boolean;
  onOpenChange: (open: boolean) => void;
  title: string;
  content: React.ReactNode;
}

export default function InfoModal({
  open,
  onOpenChange,
  title,
  content,
}: InfoModalProps) {
  return (
    <BaseModal open={open} onOpenChange={onOpenChange} title={title} size="md">
      <div className="space-y-4">
        <div className="flex items-start gap-3">
          <Info className="h-5 w-5 text-primary mt-0.5" />
          <div className="flex-1">{content}</div>
        </div>

        <div className="flex justify-end">
          <Button onClick={() => onOpenChange(false)}>Close</Button>
        </div>
      </div>
    </BaseModal>
  );
}

================================================================================
FILE: D:\covider-fe\src\components\ui\alert.tsx
RELATIVE PATH: src\components\ui\alert.tsx
================================================================================
import * as React from "react"
import { cva, type VariantProps } from "class-variance-authority"

import { cn } from "@/lib/utils"

const alertVariants = cva(
  "relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",
  {
    variants: {
      variant: {
        default: "bg-background text-foreground",
        destructive:
          "border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive",
      },
    },
    defaultVariants: {
      variant: "default",
    },
  }
)

const Alert = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>
>(({ className, variant, ...props }, ref) => (
  <div
    ref={ref}
    role="alert"
    className={cn(alertVariants({ variant }), className)}
    {...props}
  />
))
Alert.displayName = "Alert"

const AlertTitle = React.forwardRef<
  HTMLParagraphElement,
  React.HTMLAttributes<HTMLHeadingElement>
>(({ className, ...props }, ref) => (
  <h5
    ref={ref}
    className={cn("mb-1 font-medium leading-none tracking-tight", className)}
    {...props}
  />
))
AlertTitle.displayName = "AlertTitle"

const AlertDescription = React.forwardRef<
  HTMLParagraphElement,
  React.HTMLAttributes<HTMLParagraphElement>
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn("text-sm [&_p]:leading-relaxed", className)}
    {...props}
  />
))
AlertDescription.displayName = "AlertDescription"

export { Alert, AlertTitle, AlertDescription }

================================================================================
FILE: D:\covider-fe\src\components\ui\badge.tsx
RELATIVE PATH: src\components\ui\badge.tsx
================================================================================
import * as React from "react"
import { cva, type VariantProps } from "class-variance-authority"

import { cn } from "@/lib/utils"

const badgeVariants = cva(
  "inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",
  {
    variants: {
      variant: {
        default:
          "border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",
        secondary:
          "border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",
        destructive:
          "border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",
        outline: "text-foreground",
      },
    },
    defaultVariants: {
      variant: "default",
    },
  }
)

export interface BadgeProps
  extends React.HTMLAttributes<HTMLDivElement>,
    VariantProps<typeof badgeVariants> {}

function Badge({ className, variant, ...props }: BadgeProps) {
  return (
    <div className={cn(badgeVariants({ variant }), className)} {...props} />
  )
}

export { Badge, badgeVariants }

================================================================================
FILE: D:\covider-fe\src\components\ui\button.tsx
RELATIVE PATH: src\components\ui\button.tsx
================================================================================
import * as React from "react"
import { Slot } from "@radix-ui/react-slot"
import { cva, type VariantProps } from "class-variance-authority"

import { cn } from "@/lib/utils"

const buttonVariants = cva(
  "inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",
  {
    variants: {
      variant: {
        default:
          "bg-primary text-primary-foreground shadow hover:bg-primary/90",
        destructive:
          "bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",
        outline:
          "border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",
        secondary:
          "bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",
        ghost: "hover:bg-accent hover:text-accent-foreground",
        link: "text-primary underline-offset-4 hover:underline",
      },
      size: {
        default: "h-9 px-4 py-2",
        sm: "h-8 rounded-md px-3 text-xs",
        lg: "h-10 rounded-md px-8",
        icon: "h-9 w-9",
      },
    },
    defaultVariants: {
      variant: "default",
      size: "default",
    },
  }
)

export interface ButtonProps
  extends React.ButtonHTMLAttributes<HTMLButtonElement>,
    VariantProps<typeof buttonVariants> {
  asChild?: boolean
}

const Button = React.forwardRef<HTMLButtonElement, ButtonProps>(
  ({ className, variant, size, asChild = false, ...props }, ref) => {
    const Comp = asChild ? Slot : "button"
    return (
      <Comp
        className={cn(buttonVariants({ variant, size, className }))}
        ref={ref}
        {...props}
      />
    )
  }
)
Button.displayName = "Button"

export { Button, buttonVariants }

================================================================================
FILE: D:\covider-fe\src\components\ui\card.tsx
RELATIVE PATH: src\components\ui\card.tsx
================================================================================
import * as React from "react"

import { cn } from "@/lib/utils"

const Card = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn(
      "rounded-xl border bg-card text-card-foreground shadow",
      className
    )}
    {...props}
  />
))
Card.displayName = "Card"

const CardHeader = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn("flex flex-col space-y-1.5 p-6", className)}
    {...props}
  />
))
CardHeader.displayName = "CardHeader"

const CardTitle = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn("font-semibold leading-none tracking-tight", className)}
    {...props}
  />
))
CardTitle.displayName = "CardTitle"

const CardDescription = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn("text-sm text-muted-foreground", className)}
    {...props}
  />
))
CardDescription.displayName = "CardDescription"

const CardContent = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div ref={ref} className={cn("p-6 pt-0", className)} {...props} />
))
CardContent.displayName = "CardContent"

const CardFooter = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn("flex items-center p-6 pt-0", className)}
    {...props}
  />
))
CardFooter.displayName = "CardFooter"

export { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }

================================================================================
FILE: D:\covider-fe\src\components\ui\dialog.tsx
RELATIVE PATH: src\components\ui\dialog.tsx
================================================================================
import * as React from "react"
import * as DialogPrimitive from "@radix-ui/react-dialog"
import { X } from "lucide-react"

import { cn } from "@/lib/utils"

const Dialog = DialogPrimitive.Root

const DialogTrigger = DialogPrimitive.Trigger

const DialogPortal = DialogPrimitive.Portal

const DialogClose = DialogPrimitive.Close

const DialogOverlay = React.forwardRef<
  React.ElementRef<typeof DialogPrimitive.Overlay>,
  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>
>(({ className, ...props }, ref) => (
  <DialogPrimitive.Overlay
    ref={ref}
    className={cn(
      "fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",
      className
    )}
    {...props}
  />
))
DialogOverlay.displayName = DialogPrimitive.Overlay.displayName

const DialogContent = React.forwardRef<
  React.ElementRef<typeof DialogPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>
>(({ className, children, ...props }, ref) => (
  <DialogPortal>
    <DialogOverlay />
    <DialogPrimitive.Content
      ref={ref}
      className={cn(
        "fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",
        className
      )}
      {...props}
    >
      {children}
      <DialogPrimitive.Close className="absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground">
        <X className="h-4 w-4" />
        <span className="sr-only">Close</span>
      </DialogPrimitive.Close>
    </DialogPrimitive.Content>
  </DialogPortal>
))
DialogContent.displayName = DialogPrimitive.Content.displayName

const DialogHeader = ({
  className,
  ...props
}: React.HTMLAttributes<HTMLDivElement>) => (
  <div
    className={cn(
      "flex flex-col space-y-1.5 text-center sm:text-left",
      className
    )}
    {...props}
  />
)
DialogHeader.displayName = "DialogHeader"

const DialogFooter = ({
  className,
  ...props
}: React.HTMLAttributes<HTMLDivElement>) => (
  <div
    className={cn(
      "flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",
      className
    )}
    {...props}
  />
)
DialogFooter.displayName = "DialogFooter"

const DialogTitle = React.forwardRef<
  React.ElementRef<typeof DialogPrimitive.Title>,
  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>
>(({ className, ...props }, ref) => (
  <DialogPrimitive.Title
    ref={ref}
    className={cn(
      "text-lg font-semibold leading-none tracking-tight",
      className
    )}
    {...props}
  />
))
DialogTitle.displayName = DialogPrimitive.Title.displayName

const DialogDescription = React.forwardRef<
  React.ElementRef<typeof DialogPrimitive.Description>,
  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>
>(({ className, ...props }, ref) => (
  <DialogPrimitive.Description
    ref={ref}
    className={cn("text-sm text-muted-foreground", className)}
    {...props}
  />
))
DialogDescription.displayName = DialogPrimitive.Description.displayName

export {
  Dialog,
  DialogPortal,
  DialogOverlay,
  DialogTrigger,
  DialogClose,
  DialogContent,
  DialogHeader,
  DialogFooter,
  DialogTitle,
  DialogDescription,
}

================================================================================
FILE: D:\covider-fe\src\components\ui\dropdown-menu.tsx
RELATIVE PATH: src\components\ui\dropdown-menu.tsx
================================================================================
"use client"

import * as React from "react"
import * as DropdownMenuPrimitive from "@radix-ui/react-dropdown-menu"
import { Check, ChevronRight, Circle } from "lucide-react"

import { cn } from "@/lib/utils"

const DropdownMenu = DropdownMenuPrimitive.Root

const DropdownMenuTrigger = DropdownMenuPrimitive.Trigger

const DropdownMenuGroup = DropdownMenuPrimitive.Group

const DropdownMenuPortal = DropdownMenuPrimitive.Portal

const DropdownMenuSub = DropdownMenuPrimitive.Sub

const DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup

const DropdownMenuSubTrigger = React.forwardRef<
  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,
  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {
    inset?: boolean
  }
>(({ className, inset, children, ...props }, ref) => (
  <DropdownMenuPrimitive.SubTrigger
    ref={ref}
    className={cn(
      "flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",
      inset && "pl-8",
      className
    )}
    {...props}
  >
    {children}
    <ChevronRight className="ml-auto" />
  </DropdownMenuPrimitive.SubTrigger>
))
DropdownMenuSubTrigger.displayName =
  DropdownMenuPrimitive.SubTrigger.displayName

const DropdownMenuSubContent = React.forwardRef<
  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,
  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>
>(({ className, ...props }, ref) => (
  <DropdownMenuPrimitive.SubContent
    ref={ref}
    className={cn(
      "z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",
      className
    )}
    {...props}
  />
))
DropdownMenuSubContent.displayName =
  DropdownMenuPrimitive.SubContent.displayName

const DropdownMenuContent = React.forwardRef<
  React.ElementRef<typeof DropdownMenuPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>
>(({ className, sideOffset = 4, ...props }, ref) => (
  <DropdownMenuPrimitive.Portal>
    <DropdownMenuPrimitive.Content
      ref={ref}
      sideOffset={sideOffset}
      className={cn(
        "z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md",
        "data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",
        className
      )}
      {...props}
    />
  </DropdownMenuPrimitive.Portal>
))
DropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName

const DropdownMenuItem = React.forwardRef<
  React.ElementRef<typeof DropdownMenuPrimitive.Item>,
  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {
    inset?: boolean
  }
>(({ className, inset, ...props }, ref) => (
  <DropdownMenuPrimitive.Item
    ref={ref}
    className={cn(
      "relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",
      inset && "pl-8",
      className
    )}
    {...props}
  />
))
DropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName

const DropdownMenuCheckboxItem = React.forwardRef<
  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,
  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>
>(({ className, children, checked, ...props }, ref) => (
  <DropdownMenuPrimitive.CheckboxItem
    ref={ref}
    className={cn(
      "relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",
      className
    )}
    checked={checked}
    {...props}
  >
    <span className="absolute left-2 flex h-3.5 w-3.5 items-center justify-center">
      <DropdownMenuPrimitive.ItemIndicator>
        <Check className="h-4 w-4" />
      </DropdownMenuPrimitive.ItemIndicator>
    </span>
    {children}
  </DropdownMenuPrimitive.CheckboxItem>
))
DropdownMenuCheckboxItem.displayName =
  DropdownMenuPrimitive.CheckboxItem.displayName

const DropdownMenuRadioItem = React.forwardRef<
  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,
  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>
>(({ className, children, ...props }, ref) => (
  <DropdownMenuPrimitive.RadioItem
    ref={ref}
    className={cn(
      "relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",
      className
    )}
    {...props}
  >
    <span className="absolute left-2 flex h-3.5 w-3.5 items-center justify-center">
      <DropdownMenuPrimitive.ItemIndicator>
        <Circle className="h-2 w-2 fill-current" />
      </DropdownMenuPrimitive.ItemIndicator>
    </span>
    {children}
  </DropdownMenuPrimitive.RadioItem>
))
DropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName

const DropdownMenuLabel = React.forwardRef<
  React.ElementRef<typeof DropdownMenuPrimitive.Label>,
  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {
    inset?: boolean
  }
>(({ className, inset, ...props }, ref) => (
  <DropdownMenuPrimitive.Label
    ref={ref}
    className={cn(
      "px-2 py-1.5 text-sm font-semibold",
      inset && "pl-8",
      className
    )}
    {...props}
  />
))
DropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName

const DropdownMenuSeparator = React.forwardRef<
  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,
  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>
>(({ className, ...props }, ref) => (
  <DropdownMenuPrimitive.Separator
    ref={ref}
    className={cn("-mx-1 my-1 h-px bg-muted", className)}
    {...props}
  />
))
DropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName

const DropdownMenuShortcut = ({
  className,
  ...props
}: React.HTMLAttributes<HTMLSpanElement>) => {
  return (
    <span
      className={cn("ml-auto text-xs tracking-widest opacity-60", className)}
      {...props}
    />
  )
}
DropdownMenuShortcut.displayName = "DropdownMenuShortcut"

export {
  DropdownMenu,
  DropdownMenuTrigger,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuCheckboxItem,
  DropdownMenuRadioItem,
  DropdownMenuLabel,
  DropdownMenuSeparator,
  DropdownMenuShortcut,
  DropdownMenuGroup,
  DropdownMenuPortal,
  DropdownMenuSub,
  DropdownMenuSubContent,
  DropdownMenuSubTrigger,
  DropdownMenuRadioGroup,
}

================================================================================
FILE: D:\covider-fe\src\components\ui\input.tsx
RELATIVE PATH: src\components\ui\input.tsx
================================================================================
import * as React from "react"

import { cn } from "@/lib/utils"

const Input = React.forwardRef<HTMLInputElement, React.ComponentProps<"input">>(
  ({ className, type, ...props }, ref) => {
    return (
      <input
        type={type}
        className={cn(
          "flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",
          className
        )}
        ref={ref}
        {...props}
      />
    )
  }
)
Input.displayName = "Input"

export { Input }

================================================================================
FILE: D:\covider-fe\src\components\ui\label.tsx
RELATIVE PATH: src\components\ui\label.tsx
================================================================================
import * as React from "react"
import * as LabelPrimitive from "@radix-ui/react-label"
import { cva, type VariantProps } from "class-variance-authority"

import { cn } from "@/lib/utils"

const labelVariants = cva(
  "text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"
)

const Label = React.forwardRef<
  React.ElementRef<typeof LabelPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &
    VariantProps<typeof labelVariants>
>(({ className, ...props }, ref) => (
  <LabelPrimitive.Root
    ref={ref}
    className={cn(labelVariants(), className)}
    {...props}
  />
))
Label.displayName = LabelPrimitive.Root.displayName

export { Label }

================================================================================
FILE: D:\covider-fe\src\components\ui\scroll-area.tsx
RELATIVE PATH: src\components\ui\scroll-area.tsx
================================================================================
import * as React from "react"
import * as ScrollAreaPrimitive from "@radix-ui/react-scroll-area"

import { cn } from "@/lib/utils"

const ScrollArea = React.forwardRef<
  React.ElementRef<typeof ScrollAreaPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>
>(({ className, children, ...props }, ref) => (
  <ScrollAreaPrimitive.Root
    ref={ref}
    className={cn("relative overflow-hidden", className)}
    {...props}
  >
    <ScrollAreaPrimitive.Viewport className="h-full w-full rounded-[inherit]">
      {children}
    </ScrollAreaPrimitive.Viewport>
    <ScrollBar />
    <ScrollAreaPrimitive.Corner />
  </ScrollAreaPrimitive.Root>
))
ScrollArea.displayName = ScrollAreaPrimitive.Root.displayName

const ScrollBar = React.forwardRef<
  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,
  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>
>(({ className, orientation = "vertical", ...props }, ref) => (
  <ScrollAreaPrimitive.ScrollAreaScrollbar
    ref={ref}
    orientation={orientation}
    className={cn(
      "flex touch-none select-none transition-colors",
      orientation === "vertical" &&
        "h-full w-2.5 border-l border-l-transparent p-[1px]",
      orientation === "horizontal" &&
        "h-2.5 flex-col border-t border-t-transparent p-[1px]",
      className
    )}
    {...props}
  >
    <ScrollAreaPrimitive.ScrollAreaThumb className="relative flex-1 rounded-full bg-border" />
  </ScrollAreaPrimitive.ScrollAreaScrollbar>
))
ScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName

export { ScrollArea, ScrollBar }

================================================================================
FILE: D:\covider-fe\src\components\ui\select.tsx
RELATIVE PATH: src\components\ui\select.tsx
================================================================================
"use client"

import * as React from "react"
import * as SelectPrimitive from "@radix-ui/react-select"
import { Check, ChevronDown, ChevronUp } from "lucide-react"

import { cn } from "@/lib/utils"

const Select = SelectPrimitive.Root

const SelectGroup = SelectPrimitive.Group

const SelectValue = SelectPrimitive.Value

const SelectTrigger = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.Trigger>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>
>(({ className, children, ...props }, ref) => (
  <SelectPrimitive.Trigger
    ref={ref}
    className={cn(
      "flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",
      className
    )}
    {...props}
  >
    {children}
    <SelectPrimitive.Icon asChild>
      <ChevronDown className="h-4 w-4 opacity-50" />
    </SelectPrimitive.Icon>
  </SelectPrimitive.Trigger>
))
SelectTrigger.displayName = SelectPrimitive.Trigger.displayName

const SelectScrollUpButton = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>
>(({ className, ...props }, ref) => (
  <SelectPrimitive.ScrollUpButton
    ref={ref}
    className={cn(
      "flex cursor-default items-center justify-center py-1",
      className
    )}
    {...props}
  >
    <ChevronUp className="h-4 w-4" />
  </SelectPrimitive.ScrollUpButton>
))
SelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName

const SelectScrollDownButton = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>
>(({ className, ...props }, ref) => (
  <SelectPrimitive.ScrollDownButton
    ref={ref}
    className={cn(
      "flex cursor-default items-center justify-center py-1",
      className
    )}
    {...props}
  >
    <ChevronDown className="h-4 w-4" />
  </SelectPrimitive.ScrollDownButton>
))
SelectScrollDownButton.displayName =
  SelectPrimitive.ScrollDownButton.displayName

const SelectContent = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>
>(({ className, children, position = "popper", ...props }, ref) => (
  <SelectPrimitive.Portal>
    <SelectPrimitive.Content
      ref={ref}
      className={cn(
        "relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",
        position === "popper" &&
          "data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",
        className
      )}
      position={position}
      {...props}
    >
      <SelectScrollUpButton />
      <SelectPrimitive.Viewport
        className={cn(
          "p-1",
          position === "popper" &&
            "h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"
        )}
      >
        {children}
      </SelectPrimitive.Viewport>
      <SelectScrollDownButton />
    </SelectPrimitive.Content>
  </SelectPrimitive.Portal>
))
SelectContent.displayName = SelectPrimitive.Content.displayName

const SelectLabel = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.Label>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>
>(({ className, ...props }, ref) => (
  <SelectPrimitive.Label
    ref={ref}
    className={cn("px-2 py-1.5 text-sm font-semibold", className)}
    {...props}
  />
))
SelectLabel.displayName = SelectPrimitive.Label.displayName

const SelectItem = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.Item>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>
>(({ className, children, ...props }, ref) => (
  <SelectPrimitive.Item
    ref={ref}
    className={cn(
      "relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",
      className
    )}
    {...props}
  >
    <span className="absolute right-2 flex h-3.5 w-3.5 items-center justify-center">
      <SelectPrimitive.ItemIndicator>
        <Check className="h-4 w-4" />
      </SelectPrimitive.ItemIndicator>
    </span>
    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>
  </SelectPrimitive.Item>
))
SelectItem.displayName = SelectPrimitive.Item.displayName

const SelectSeparator = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.Separator>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>
>(({ className, ...props }, ref) => (
  <SelectPrimitive.Separator
    ref={ref}
    className={cn("-mx-1 my-1 h-px bg-muted", className)}
    {...props}
  />
))
SelectSeparator.displayName = SelectPrimitive.Separator.displayName

export {
  Select,
  SelectGroup,
  SelectValue,
  SelectTrigger,
  SelectContent,
  SelectLabel,
  SelectItem,
  SelectSeparator,
  SelectScrollUpButton,
  SelectScrollDownButton,
}

================================================================================
FILE: D:\covider-fe\src\components\ui\separator.tsx
RELATIVE PATH: src\components\ui\separator.tsx
================================================================================
import * as React from "react"
import * as SeparatorPrimitive from "@radix-ui/react-separator"

import { cn } from "@/lib/utils"

const Separator = React.forwardRef<
  React.ElementRef<typeof SeparatorPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>
>(
  (
    { className, orientation = "horizontal", decorative = true, ...props },
    ref
  ) => (
    <SeparatorPrimitive.Root
      ref={ref}
      decorative={decorative}
      orientation={orientation}
      className={cn(
        "shrink-0 bg-border",
        orientation === "horizontal" ? "h-[1px] w-full" : "h-full w-[1px]",
        className
      )}
      {...props}
    />
  )
)
Separator.displayName = SeparatorPrimitive.Root.displayName

export { Separator }

================================================================================
FILE: D:\covider-fe\src\components\ui\skeleton.tsx
RELATIVE PATH: src\components\ui\skeleton.tsx
================================================================================
import { cn } from "@/lib/utils"

function Skeleton({
  className,
  ...props
}: React.HTMLAttributes<HTMLDivElement>) {
  return (
    <div
      className={cn("animate-pulse rounded-md bg-primary/10", className)}
      {...props}
    />
  )
}

export { Skeleton }

================================================================================
FILE: D:\covider-fe\src\components\ui\sonner-provider.tsx
RELATIVE PATH: src\components\ui\sonner-provider.tsx
================================================================================
import { Toaster } from "sonner";

export function AppToaster() {
  return <Toaster richColors closeButton />;
}

================================================================================
FILE: D:\covider-fe\src\components\ui\switch.tsx
RELATIVE PATH: src\components\ui\switch.tsx
================================================================================
"use client"

import * as React from "react"
import * as SwitchPrimitives from "@radix-ui/react-switch"

import { cn } from "@/lib/utils"

const Switch = React.forwardRef<
  React.ElementRef<typeof SwitchPrimitives.Root>,
  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>
>(({ className, ...props }, ref) => (
  <SwitchPrimitives.Root
    className={cn(
      "peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",
      className
    )}
    {...props}
    ref={ref}
  >
    <SwitchPrimitives.Thumb
      className={cn(
        "pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0"
      )}
    />
  </SwitchPrimitives.Root>
))
Switch.displayName = SwitchPrimitives.Root.displayName

export { Switch }

================================================================================
FILE: D:\covider-fe\src\components\ui\table.tsx
RELATIVE PATH: src\components\ui\table.tsx
================================================================================
import * as React from "react"

import { cn } from "@/lib/utils"

const Table = React.forwardRef<
  HTMLTableElement,
  React.HTMLAttributes<HTMLTableElement>
>(({ className, ...props }, ref) => (
  <div className="relative w-full overflow-auto">
    <table
      ref={ref}
      className={cn("w-full caption-bottom text-sm", className)}
      {...props}
    />
  </div>
))
Table.displayName = "Table"

const TableHeader = React.forwardRef<
  HTMLTableSectionElement,
  React.HTMLAttributes<HTMLTableSectionElement>
>(({ className, ...props }, ref) => (
  <thead ref={ref} className={cn("[&_tr]:border-b", className)} {...props} />
))
TableHeader.displayName = "TableHeader"

const TableBody = React.forwardRef<
  HTMLTableSectionElement,
  React.HTMLAttributes<HTMLTableSectionElement>
>(({ className, ...props }, ref) => (
  <tbody
    ref={ref}
    className={cn("[&_tr:last-child]:border-0", className)}
    {...props}
  />
))
TableBody.displayName = "TableBody"

const TableFooter = React.forwardRef<
  HTMLTableSectionElement,
  React.HTMLAttributes<HTMLTableSectionElement>
>(({ className, ...props }, ref) => (
  <tfoot
    ref={ref}
    className={cn(
      "border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",
      className
    )}
    {...props}
  />
))
TableFooter.displayName = "TableFooter"

const TableRow = React.forwardRef<
  HTMLTableRowElement,
  React.HTMLAttributes<HTMLTableRowElement>
>(({ className, ...props }, ref) => (
  <tr
    ref={ref}
    className={cn(
      "border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",
      className
    )}
    {...props}
  />
))
TableRow.displayName = "TableRow"

const TableHead = React.forwardRef<
  HTMLTableCellElement,
  React.ThHTMLAttributes<HTMLTableCellElement>
>(({ className, ...props }, ref) => (
  <th
    ref={ref}
    className={cn(
      "h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",
      className
    )}
    {...props}
  />
))
TableHead.displayName = "TableHead"

const TableCell = React.forwardRef<
  HTMLTableCellElement,
  React.TdHTMLAttributes<HTMLTableCellElement>
>(({ className, ...props }, ref) => (
  <td
    ref={ref}
    className={cn(
      "p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",
      className
    )}
    {...props}
  />
))
TableCell.displayName = "TableCell"

const TableCaption = React.forwardRef<
  HTMLTableCaptionElement,
  React.HTMLAttributes<HTMLTableCaptionElement>
>(({ className, ...props }, ref) => (
  <caption
    ref={ref}
    className={cn("mt-4 text-sm text-muted-foreground", className)}
    {...props}
  />
))
TableCaption.displayName = "TableCaption"

export {
  Table,
  TableHeader,
  TableBody,
  TableFooter,
  TableHead,
  TableRow,
  TableCell,
  TableCaption,
}

================================================================================
FILE: D:\covider-fe\src\components\ui\tabs.tsx
RELATIVE PATH: src\components\ui\tabs.tsx
================================================================================
import * as React from "react"
import * as TabsPrimitive from "@radix-ui/react-tabs"

import { cn } from "@/lib/utils"

const Tabs = TabsPrimitive.Root

const TabsList = React.forwardRef<
  React.ElementRef<typeof TabsPrimitive.List>,
  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>
>(({ className, ...props }, ref) => (
  <TabsPrimitive.List
    ref={ref}
    className={cn(
      "inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",
      className
    )}
    {...props}
  />
))
TabsList.displayName = TabsPrimitive.List.displayName

const TabsTrigger = React.forwardRef<
  React.ElementRef<typeof TabsPrimitive.Trigger>,
  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>
>(({ className, ...props }, ref) => (
  <TabsPrimitive.Trigger
    ref={ref}
    className={cn(
      "inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",
      className
    )}
    {...props}
  />
))
TabsTrigger.displayName = TabsPrimitive.Trigger.displayName

const TabsContent = React.forwardRef<
  React.ElementRef<typeof TabsPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>
>(({ className, ...props }, ref) => (
  <TabsPrimitive.Content
    ref={ref}
    className={cn(
      "mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",
      className
    )}
    {...props}
  />
))
TabsContent.displayName = TabsPrimitive.Content.displayName

export { Tabs, TabsList, TabsTrigger, TabsContent }

================================================================================
FILE: D:\covider-fe\src\components\ui\tooltip.tsx
RELATIVE PATH: src\components\ui\tooltip.tsx
================================================================================
"use client"

import * as React from "react"
import * as TooltipPrimitive from "@radix-ui/react-tooltip"

import { cn } from "@/lib/utils"

const TooltipProvider = TooltipPrimitive.Provider

const Tooltip = TooltipPrimitive.Root

const TooltipTrigger = TooltipPrimitive.Trigger

const TooltipContent = React.forwardRef<
  React.ElementRef<typeof TooltipPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>
>(({ className, sideOffset = 4, ...props }, ref) => (
  <TooltipPrimitive.Portal>
    <TooltipPrimitive.Content
      ref={ref}
      sideOffset={sideOffset}
      className={cn(
        "z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",
        className
      )}
      {...props}
    />
  </TooltipPrimitive.Portal>
))
TooltipContent.displayName = TooltipPrimitive.Content.displayName

export { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }

================================================================================
FILE: D:\covider-fe\src\config\api.config.ts
RELATIVE PATH: src\config\api.config.ts
================================================================================
// ============================================================================
// FILE: src/config/api.config.ts
// ============================================================================
export const API_CONFIG = {
  BASE_URL: import.meta.env.VITE_API_BASE_URL || "http://localhost:8000",
  TIMEOUT: 30000,
  RETRY_ATTEMPTS: 1,
  RETRY_DELAY: 1000,
} as const;

export const API_CACHE_CONFIG = {
  STALE_TIME: 5 * 60 * 1000, // 5 minutes
  CACHE_TIME: 10 * 60 * 1000, // 10 minutes
} as const;

================================================================================
FILE: D:\covider-fe\src\config\chart.config.ts
RELATIVE PATH: src\config\chart.config.ts
================================================================================
// ============================================================================
// FILE: src/config/chart.config.ts (ENHANCED)
// ============================================================================
export const CHART_CONFIG = {
  colors: {
    confirmed: '#3b82f6',
    deaths: '#ef4444',
    recovered: '#22c55e',
    active: '#f97316',
    primary: '#3b82f6',
    secondary: '#8b5cf6',
    accent: '#f59e0b',
  },
  animation: {
    duration: 750,
    easing: 'ease-in-out' as const,
  },
  responsive: {
    minHeight: 300,
    maxHeight: 600,
  },
  gradients: {
    confirmed: ['#3b82f6', '#1e40af'],
    deaths: ['#ef4444', '#991b1b'],
    recovered: ['#22c55e', '#15803d'],
    active: ['#f97316', '#c2410c'],
  },
} as const;

export const RECHARTS_THEME = {
  grid: {
    strokeDasharray: '3 3' as const,
    strokeOpacity: 0.3,
  },
  tooltip: {
    contentStyle: {
      backgroundColor: 'hsl(var(--popover))',
      border: '1px solid hsl(var(--border))',
      borderRadius: '6px',
    },
  },
  axis: {
    fontSize: 12,
    fontFamily: 'inherit',
  },
} as const;


================================================================================
FILE: D:\covider-fe\src\features\advanced-analytics\AdvancedAnalyticsPage.tsx
RELATIVE PATH: src\features\advanced-analytics\AdvancedAnalyticsPage.tsx
================================================================================
// ============================================================================
// FILE: src/features/advanced-analytics/AdvancedAnalyticsPage.tsx
// ============================================================================
import { useState } from "react";
import PageHeader from "@/components/layout/PageHeader";
import { Tabs, TabsContent, TabsList, TabsTrigger } from "@/components/ui/tabs";
import AnomaliesChart from "@/features/advanced-analytics/components/AnomaliesChart";
import EpidemicWavesChart from "@/features/advanced-analytics/components/EpidemicWavesChart";
import ReproductionNumberChart from "@/features/advanced-analytics/components/ReproductionNumberChart";
import ClusteringChart from "@/features/advanced-analytics/components/ClusteringChart";
import ResilienceChart from "@/features/advanced-analytics/components/ResilienceChart";


export default function AdvancedAnalyticsPage() {
  const [activeTab, setActiveTab] = useState("anomalies");

  return (
    <div className="space-y-6">
      <PageHeader
        title="Advanced Analytics"
        description="Deep insights using machine learning and statistical methods"
      />

      <Tabs value={activeTab} onValueChange={setActiveTab}>
        <TabsList className="grid w-full grid-cols-5">
          <TabsTrigger value="anomalies">Anomalies</TabsTrigger>
          <TabsTrigger value="waves">Epidemic Waves</TabsTrigger>
          <TabsTrigger value="reproduction">R Number</TabsTrigger>
          <TabsTrigger value="clustering">Clustering</TabsTrigger>
          <TabsTrigger value="resilience">Resilience</TabsTrigger>
        </TabsList>

        <TabsContent value="anomalies" className="mt-6">
          <AnomaliesChart />
        </TabsContent>

        <TabsContent value="waves" className="mt-6">
          <EpidemicWavesChart />
        </TabsContent>

        <TabsContent value="reproduction" className="mt-6">
          <ReproductionNumberChart />
        </TabsContent>

        <TabsContent value="clustering" className="mt-6">
          <ClusteringChart />
        </TabsContent>

        <TabsContent value="resilience" className="mt-6">
          <ResilienceChart />
        </TabsContent>
      </Tabs>
    </div>
  );
}

================================================================================
FILE: D:\covider-fe\src\features\advanced-analytics\components\AnomaliesChart.tsx
RELATIVE PATH: src\features\advanced-analytics\components\AnomaliesChart.tsx
================================================================================
// ============================================================================
// FILE: src/features/advanced-analytics/components/AnomaliesChart.tsx
// ============================================================================
import { useState } from "react";
import { useQuery } from "@tanstack/react-query";
import { apiClient } from "@/services/api/client";
import { API_ENDPOINTS } from "@/services/api/endpoints";

import ChartContainer from "@/components/charts/ChartContainer";

import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";

import { Card, CardContent } from "@/components/ui/card";
import { Badge } from "@/components/ui/badge";

import type {
  AnomalyResponse,
  AnomalyItem,
} from "@/types/analytics.types";

export default function AnomaliesChart() {
  // ------------------------------------------------------------------------
  // Strict metric state with union literal type
  // ------------------------------------------------------------------------
  const [metric, setMetric] = useState<"Confirmed" | "Deaths" | "Recovered">(
    "Confirmed"
  );

  // ------------------------------------------------------------------------
  // Fetch anomalies data (typed response)
  // ------------------------------------------------------------------------
  const { data, isLoading, error, refetch } = useQuery<AnomalyResponse>({
    queryKey: ["anomalies", metric],
    queryFn: async () => {
      const response = await apiClient.get(API_ENDPOINTS.ANOMALIES, {
        params: { metric, format: "json" },
      });
      return response.data as AnomalyResponse;
    },
  });

  return (
    <ChartContainer
      title="Anomaly Detection"
      description="Countries with unusual patterns detected using Isolation Forest"
      isLoading={isLoading}
      error={error?.message}
      onRetry={refetch}
      actions={
        <Select
          value={metric}
          onValueChange={(value) =>
            setMetric(value as "Confirmed" | "Deaths" | "Recovered")
          }
        >
          <SelectTrigger className="w-[140px]">
            <SelectValue />
          </SelectTrigger>
          <SelectContent>
            <SelectItem value="Confirmed">Confirmed</SelectItem>
            <SelectItem value="Deaths">Deaths</SelectItem>
            <SelectItem value="Recovered">Recovered</SelectItem>
          </SelectContent>
        </Select>
      }
    >
      {data && (
        <div className="space-y-4">
          <p className="text-sm text-muted-foreground">
            Total Anomalies Detected:{" "}
            <span className="font-bold">{data.total_anomalies}</span>
          </p>

          <div className="grid gap-3">
            {data.anomalies.map((anomaly: AnomalyItem, index: number) => (
              <Card key={index}>
                <CardContent className="pt-6">
                  <div className="flex items-center justify-between">
                    <div>
                      <p className="font-semibold">
                        {anomaly["Country/Region"]}
                      </p>
                      <p className="text-sm text-muted-foreground">
                        {metric}: {anomaly[metric].toLocaleString()}
                      </p>
                    </div>

                    <Badge variant="destructive">
                      Score: {anomaly.AnomalyScore.toFixed(3)}
                    </Badge>
                  </div>
                </CardContent>
              </Card>
            ))}
          </div>
        </div>
      )}
    </ChartContainer>
  );
}

================================================================================
FILE: D:\covider-fe\src\features\advanced-analytics\components\ClusteringChart.tsx
RELATIVE PATH: src\features\advanced-analytics\components\ClusteringChart.tsx
================================================================================
// ============================================================================
// FILE: src/features/advanced-analytics/components/ClusteringChart.tsx
// ============================================================================
import { useState } from "react";
import { useQuery } from "@tanstack/react-query";
import { apiClient } from "@/services/api/client";
import { API_ENDPOINTS } from "@/services/api/endpoints";

import ChartContainer from "@/components/charts/ChartContainer";

import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";

import { Card, CardContent } from "@/components/ui/card";
import { Badge } from "@/components/ui/badge";

import type {
  ClusteringResponse,
  ClusterItem,
} from "@/types/analytics.types";

export default function ClusteringChart() {
  const [nClusters, setNClusters] = useState<number>(5);

  const { data, isLoading, error, refetch } = useQuery<ClusteringResponse>({
    queryKey: ["clustering", nClusters],
    queryFn: async () => {
      const response = await apiClient.get(API_ENDPOINTS.CLUSTERING, {
        params: {
          n_clusters: nClusters,
          format: "json",
        },
      });

      return response.data as ClusteringResponse;
    },
  });

  return (
    <ChartContainer
      title="Country Clustering"
      description="Groups countries with similar epidemic patterns using K-Means"
      isLoading={isLoading}
      error={error?.message}
      onRetry={refetch}
      actions={
        <Select
          value={nClusters.toString()}
          onValueChange={(value) => setNClusters(Number(value))}
        >
          <SelectTrigger className="w-[140px]">
            <SelectValue />
          </SelectTrigger>
          <SelectContent>
            {[3, 4, 5, 6, 7].map((v) => (
              <SelectItem key={v} value={v.toString()}>
                {v} Clusters
              </SelectItem>
            ))}
          </SelectContent>
        </Select>
      }
    >
      {data && (
        <div className="grid gap-4">
          {data.clusters.map((cluster: ClusterItem) => (
            <Card key={cluster.cluster_id}>
              <CardContent className="pt-6">
                <div className="space-y-3">
                  {/* Header */}
                  <div className="flex items-center justify-between">
                    <h4 className="font-semibold">
                      Cluster {cluster.cluster_id + 1}
                    </h4>
                    <Badge>{cluster.num_countries} countries</Badge>
                  </div>

                  {/* Stats */}
                  <div className="grid grid-cols-3 gap-2 text-sm">
                    <div>
                      <p className="text-muted-foreground">Avg Cases</p>
                      <p className="font-semibold">
                        {cluster.avg_confirmed.toLocaleString()}
                      </p>
                    </div>

                    <div>
                      <p className="text-muted-foreground">Avg Deaths</p>
                      <p className="font-semibold">
                        {cluster.avg_deaths.toLocaleString()}
                      </p>
                    </div>

                    <div>
                      <p className="text-muted-foreground">Avg CFR</p>
                      <p className="font-semibold">
                        {cluster.avg_cfr.toFixed(2)}%
                      </p>
                    </div>
                  </div>

                  {/* Country samples */}
                  <div>
                    <p className="text-sm text-muted-foreground mb-2">
                      Sample Countries:
                    </p>

                    <div className="flex flex-wrap gap-1">
                      {cluster.countries.slice(0, 10).map((country) => (
                        <Badge key={country} variant="outline">
                          {country}
                        </Badge>
                      ))}
                    </div>
                  </div>
                </div>
              </CardContent>
            </Card>
          ))}
        </div>
      )}
    </ChartContainer>
  );
}

================================================================================
FILE: D:\covider-fe\src\features\advanced-analytics\components\EpidemicWavesChart.tsx
RELATIVE PATH: src\features\advanced-analytics\components\EpidemicWavesChart.tsx
================================================================================
// ============================================================================
// FILE: src/features/advanced-analytics/components/EpidemicWavesChart.tsx
// ============================================================================
import { useState } from "react";
import { useQuery } from "@tanstack/react-query";
import { apiClient } from "@/services/api/client";
import { API_ENDPOINTS } from "@/services/api/endpoints";
import { useCountriesList } from "@/services/queries/dataTableQueries";
import ChartContainer from "@/components/charts/ChartContainer";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import LineChart from "@/components/charts/LineChart";

export default function EpidemicWavesChart() {
  const [selectedCountry, setSelectedCountry] = useState("US");
  const { data: countriesData } = useCountriesList();

  const { data, isLoading, error, refetch } = useQuery({
    queryKey: ["epidemic-waves", selectedCountry],
    queryFn: async () => {
      const { data } = await apiClient.get(
        API_ENDPOINTS.EPIDEMIC_WAVES(selectedCountry),
        { params: { format: "json" } }
      );
      return data;
    },
    enabled: !!selectedCountry,
  });

  const countries = countriesData?.countries || [];

  return (
    <ChartContainer
      title="Epidemic Waves Analysis"
      description="Peak detection showing multiple waves of infection"
      isLoading={isLoading}
      error={error?.message}
      onRetry={refetch}
      actions={
        <Select value={selectedCountry} onValueChange={setSelectedCountry}>
          <SelectTrigger className="w-[180px]">
            <SelectValue />
          </SelectTrigger>
          <SelectContent>
            {countries.slice(0, 50).map((country: string) => (
              <SelectItem key={country} value={country}>
                {country}
              </SelectItem>
            ))}
          </SelectContent>
        </Select>
      }
    >
      {data && (
        <div className="space-y-4">
          <div className="grid grid-cols-2 gap-4 p-4 bg-muted rounded-lg">
            <div>
              <p className="text-sm text-muted-foreground">Number of Waves</p>
              <p className="text-2xl font-bold">{data.num_waves}</p>
            </div>
            <div>
              <p className="text-sm text-muted-foreground">Country</p>
              <p className="text-2xl font-bold">{data.country}</p>
            </div>
          </div>

          <LineChart
            data={data.peaks}
            lines={[
              {
                dataKey: "MovingAverage",
                name: "7-Day Average",
                color: "#3b82f6",
              },
            ]}
            xAxisKey="Date"
            height={400}
          />
        </div>
      )}
    </ChartContainer>
  );
}

================================================================================
FILE: D:\covider-fe\src\features\advanced-analytics\components\ReproductionNumberChart.tsx
RELATIVE PATH: src\features\advanced-analytics\components\ReproductionNumberChart.tsx
================================================================================
// ============================================================================
// FILE: src/features/advanced-analytics/components/ReproductionNumberChart.tsx
// ============================================================================
import { useState } from "react";
import { useQuery } from "@tanstack/react-query";
import { apiClient } from "@/services/api/client";
import { API_ENDPOINTS } from "@/services/api/endpoints";
import { useCountriesList } from "@/services/queries/dataTableQueries";
import ChartContainer from "@/components/charts/ChartContainer";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import LineChart from "@/components/charts/LineChart";
import { Badge } from "@/components/ui/badge";

export default function ReproductionNumberChart() {
  const [selectedCountry, setSelectedCountry] = useState("US");
  const { data: countriesData } = useCountriesList();

  const { data, isLoading, error, refetch } = useQuery({
    queryKey: ["reproduction-number", selectedCountry],
    queryFn: async () => {
      const { data } = await apiClient.get(
        API_ENDPOINTS.REPRODUCTION_NUMBER(selectedCountry),
        { params: { format: "json" } }
      );
      return data;
    },
    enabled: !!selectedCountry,
  });

  const countries = countriesData?.countries || [];

  return (
    <ChartContainer
      title="Effective Reproduction Number (Rt)"
      description="R > 1 indicates growing epidemic, R < 1 indicates decline"
      isLoading={isLoading}
      error={error?.message}
      onRetry={refetch}
      actions={
        <Select value={selectedCountry} onValueChange={setSelectedCountry}>
          <SelectTrigger className="w-[180px]">
            <SelectValue />
          </SelectTrigger>
          <SelectContent>
            {countries.slice(0, 50).map((country: string) => (
              <SelectItem key={country} value={country}>
                {country}
              </SelectItem>
            ))}
          </SelectContent>
        </Select>
      }
    >
      {data && (
        <div className="space-y-4">
          <div className="grid grid-cols-2 gap-4 p-4 bg-muted rounded-lg">
            <div>
              <p className="text-sm text-muted-foreground">Current Rt</p>
              <p className="text-2xl font-bold">{data.current_rt.toFixed(2)}</p>
            </div>
            <div>
              <p className="text-sm text-muted-foreground">Status</p>
              <Badge variant={data.current_rt > 1 ? "destructive" : "default"}>
                {data.status_text}
              </Badge>
            </div>
          </div>

          <LineChart
            data={data.timeline}
            lines={[
              {
                dataKey: "R_t_Smoothed",
                name: "Reproduction Number",
                color: "#ef4444",
              },
            ]}
            xAxisKey="Date"
            height={400}
          />
        </div>
      )}
    </ChartContainer>
  );
}

================================================================================
FILE: D:\covider-fe\src\features\advanced-analytics\components\ResilienceChart.tsx
RELATIVE PATH: src\features\advanced-analytics\components\ResilienceChart.tsx
================================================================================
// ============================================================================
// FILE: src/features/advanced-analytics/components/ResilienceChart.tsx
// ============================================================================
import { useState } from "react";
import { useQuery } from "@tanstack/react-query";
import { apiClient } from "@/services/api/client";
import { API_ENDPOINTS } from "@/services/api/endpoints";
import ChartContainer from "@/components/charts/ChartContainer";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import BarChart from "@/components/charts/BarChart";

export default function ResilienceChart() {
  const [topN, setTopN] = useState(20);

  const { data, isLoading, error, refetch } = useQuery({
    queryKey: ["resilience", topN],
    queryFn: async () => {
      const { data } = await apiClient.get(API_ENDPOINTS.RESILIENCE, {
        params: { top_n: topN, format: "json" },
      });
      return data;
    },
  });

  return (
    <ChartContainer
      title="Epidemic Resilience Index"
      description="Measures how well countries are managing the epidemic"
      isLoading={isLoading}
      error={error?.message}
      onRetry={refetch}
      actions={
        <Select
          value={topN.toString()}
          onValueChange={(v) => setTopN(Number(v))}
        >
          <SelectTrigger className="w-[120px]">
            <SelectValue />
          </SelectTrigger>
          <SelectContent>
            <SelectItem value="10">Top 10</SelectItem>
            <SelectItem value="20">Top 20</SelectItem>
            <SelectItem value="30">Top 30</SelectItem>
          </SelectContent>
        </Select>
      }
    >
      {data && (
        <BarChart
          data={data.top_countries}
          bars={[
            {
              dataKey: "ResilienceIndex",
              name: "Resilience Score",
              color: "#22c55e",
            },
          ]}
          yAxisKey="Country/Region"
          layout="vertical"
          height={topN * 25 + 100}
        />
      )}
    </ChartContainer>
  );
}

================================================================================
FILE: D:\covider-fe\src\features\advanced-analytics\hooks\useAdvancedAnalytics.ts
RELATIVE PATH: src\features\advanced-analytics\hooks\useAdvancedAnalytics.ts
================================================================================
// ============================================================================
// FILE: src/features/advanced-analytics/hooks/useAdvancedAnalytics.ts
// ============================================================================
import { useQuery } from '@tanstack/react-query';
import { apiClient } from '@/services/api/client';
import { API_ENDPOINTS } from '@/services/api/endpoints';

export function useAdvancedAnalytics() {
  const anomalies = (metric: string = 'Confirmed') => useQuery({
    queryKey: ['anomalies', metric],
    queryFn: async () => {
      const { data } = await apiClient.get(API_ENDPOINTS.ANOMALIES, {
        params: { metric, format: 'json' }
      });
      return data;
    },
  });

  const epidemicWaves = (country: string) => useQuery({
    queryKey: ['epidemic-waves', country],
    queryFn: async () => {
      const { data } = await apiClient.get(
        API_ENDPOINTS.EPIDEMIC_WAVES(country),
        { params: { format: 'json' } }
      );
      return data;
    },
    enabled: !!country,
  });

  const reproductionNumber = (country: string) => useQuery({
    queryKey: ['reproduction-number', country],
    queryFn: async () => {
      const { data } = await apiClient.get(
        API_ENDPOINTS.REPRODUCTION_NUMBER(country),
        { params: { format: 'json' } }
      );
      return data;
    },
    enabled: !!country,
  });

  return {
    anomalies,
    epidemicWaves,
    reproductionNumber,
  };
}


================================================================================
FILE: D:\covider-fe\src\features\analytics\AnalyticsPage.tsx
RELATIVE PATH: src\features\analytics\AnalyticsPage.tsx
================================================================================
// ============================================================================
// FILE: src/features/analytics/AnalyticsPage.tsx
// ============================================================================
import { useState } from "react";
import PageHeader from "@/components/layout/PageHeader";
import { Tabs, TabsContent, TabsList, TabsTrigger } from "@/components/ui/tabs";
import TimeSeriesChart from "./components/TimeSeriesChart";
import GeographicalChart from "./components/GeographicalChart";
import PredictionChart from "./components/PredictionChart";
import ComparisonChart from "./components/ComparisonChart";

export default function AnalyticsPage() {
  const [activeChart, setActiveChart] = useState("timeseries");

  return (
    <div className="space-y-6">
      <PageHeader
        title="Analytics"
        description="Visualize COVID-19 trends with interactive charts"
      />

      <Tabs value={activeChart} onValueChange={setActiveChart}>
        <TabsList className="grid w-full grid-cols-4">
          <TabsTrigger value="timeseries">Time Series</TabsTrigger>
          <TabsTrigger value="geographical">Geographical</TabsTrigger>
          <TabsTrigger value="prediction">Predictions</TabsTrigger>
          <TabsTrigger value="comparison">Comparison</TabsTrigger>
        </TabsList>

        <TabsContent value="timeseries" className="mt-6">
          <TimeSeriesChart />
        </TabsContent>

        <TabsContent value="geographical" className="mt-6">
          <GeographicalChart />
        </TabsContent>

        <TabsContent value="prediction" className="mt-6">
          <PredictionChart />
        </TabsContent>

        <TabsContent value="comparison" className="mt-6">
          <ComparisonChart />
        </TabsContent>
      </Tabs>
    </div>
  );
}

================================================================================
FILE: D:\covider-fe\src\features\analytics\components\ChartSwitcher.tsx
RELATIVE PATH: src\features\analytics\components\ChartSwitcher.tsx
================================================================================

================================================================================
FILE: D:\covider-fe\src\features\analytics\components\ComparisonChart.tsx
RELATIVE PATH: src\features\analytics\components\ComparisonChart.tsx
================================================================================
// ============================================================================
// FILE: src/features/analytics/components/ComparisonChart.tsx (REFACTORED)
// ============================================================================
import { useState } from 'react';
import ChartContainer from '@/components/charts/ChartContainer';
import { useCountriesList } from '@/services/queries/dataTableQueries';
import { useCountryComparison } from '../hooks/useCountryComparison';
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';
import { Button } from '@/components/ui/button';
import { Badge } from '@/components/ui/badge';
import { X, Plus } from 'lucide-react';
import {
  BarChart as RechartsBarChart,
  Bar,
  XAxis,
  YAxis,
  CartesianGrid,
  Tooltip,
  Legend,
  ResponsiveContainer,
} from 'recharts';

export default function ComparisonChart() {
  const [selectedCountries, setSelectedCountries] = useState<string[]>(['US', 'India', 'Albania']);
  const [currentSelection, setCurrentSelection] = useState('');
  const [metric, setMetric] = useState<'Confirmed' | 'Deaths' | 'Recovered' | 'Active'>('Confirmed');

  const { data: countriesData } = useCountriesList();
  const { data, isLoading, error, refetch } = useCountryComparison(selectedCountries, metric);

  const handleAddCountry = () => {
    if (currentSelection && !selectedCountries.includes(currentSelection)) {
      setSelectedCountries([...selectedCountries, currentSelection]);
      setCurrentSelection('');
    }
  };

  const handleRemoveCountry = (country: string) => {
    setSelectedCountries(selectedCountries.filter(c => c !== country));
  };

  const countries = countriesData?.countries || [];
  const chartData = data?.chartData || [];
  const snapshotDate = data?.snapshotDate;

  // DEBUG: Log data
  console.log('ðŸ” ComparisonChart Debug:', {
    selectedCountries,
    metric,
    apiData: data,
    chartData,
    chartDataLength: chartData.length
  });

  return (
    <ChartContainer
      title="Country Comparison"
      description={`Compare ${metric} cases across countries (snapshot data)`}
      isLoading={isLoading}
      error={error?.message}
      onRetry={refetch}
      actions={
        <div className="flex items-center gap-2">
          <Select value={metric} onValueChange={(v) => setMetric(v as typeof metric)}>
            <SelectTrigger className="w-[140px]">
              <SelectValue />
            </SelectTrigger>
            <SelectContent>
              <SelectItem value="Confirmed">Confirmed</SelectItem>
              <SelectItem value="Deaths">Deaths</SelectItem>
              <SelectItem value="Recovered">Recovered</SelectItem>
              <SelectItem value="Active">Active</SelectItem>
            </SelectContent>
          </Select>
        </div>
      }
    >
      <div className="space-y-4">
        {/* Country Selection */}
        <div className="flex gap-2">
          <Select value={currentSelection} onValueChange={setCurrentSelection}>
            <SelectTrigger className="flex-1">
              <SelectValue placeholder="Add country to compare" />
            </SelectTrigger>
            <SelectContent>
              {countries
                .filter((c: string) => !selectedCountries.includes(c))
                .slice(0, 50)
                .map((country: string) => (
                  <SelectItem key={country} value={country}>
                    {country}
                  </SelectItem>
                ))}
            </SelectContent>
          </Select>
          <Button
            onClick={handleAddCountry}
            disabled={!currentSelection}
            size="icon"
          >
            <Plus className="h-4 w-4" />
          </Button>
        </div>

        {/* Selected Countries */}
        {selectedCountries.length > 0 && (
          <div className="flex flex-wrap gap-2">
            {selectedCountries.map((country) => (
              <Badge key={country} variant="secondary" className="pl-3 pr-1 py-1">
                {country}
                <Button
                  variant="ghost"
                  size="icon"
                  className="h-5 w-5 ml-1"
                  onClick={() => handleRemoveCountry(country)}
                >
                  <X className="h-3 w-3" />
                </Button>
              </Badge>
            ))}
          </div>
        )}

        {/* Bar Chart */}
        {chartData.length > 0 ? (
          <div className="mt-4">
            <ResponsiveContainer width="100%" height={400}>
              <RechartsBarChart data={chartData}>
                <CartesianGrid strokeDasharray="3 3" className="stroke-muted" />
                <XAxis 
                  dataKey="country" 
                  className="text-xs"
                  tick={{ fill: 'currentColor' }}
                />
                <YAxis 
                  className="text-xs"
                  tick={{ fill: 'currentColor' }}
                  tickFormatter={(value) => {
                    if (typeof value === 'number') {
                      return value.toLocaleString();
                    }
                    return String(value);
                  }}
                />
                <Tooltip 
                  formatter={(value: number) => value.toLocaleString()}
                  contentStyle={{ 
                    backgroundColor: 'hsl(var(--background))',
                    border: '1px solid hsl(var(--border))',
                    borderRadius: '6px'
                  }}
                />
                <Legend />
                <Bar 
                  dataKey="value" 
                  name={metric}
                  fill="hsl(var(--primary))" 
                  radius={[8, 8, 0, 0]}
                />
              </RechartsBarChart>
            </ResponsiveContainer>
          </div>
        ) : (
          <div className="flex items-center justify-center h-[400px] text-muted-foreground">
            {isLoading ? 'Loading...' : 'No data to display'}
          </div>
        )}

        {/* Empty State */}
        {!isLoading && chartData.length === 0 && selectedCountries.length > 0 && (
          <div className="flex items-center justify-center h-[400px] text-muted-foreground">
            No data available for selected countries
          </div>
        )}

        {/* Data Date Info */}
        {snapshotDate && (
          <p className="text-xs text-muted-foreground text-center">
            Data as of: {new Date(snapshotDate).toLocaleDateString()}
          </p>
        )}
      </div>
    </ChartContainer>
  );
}
================================================================================
FILE: D:\covider-fe\src\features\analytics\components\GeographicalChart.tsx
RELATIVE PATH: src\features\analytics\components\GeographicalChart.tsx
================================================================================
// ============================================================================
// FILE: src/features/analytics/components/GeographicalChart.tsx (FINAL)
// ============================================================================
import { useState, useMemo } from 'react';
import ChartContainer from '@/components/charts/ChartContainer';
import { useTopCountries } from '@/services/queries/countryQueries';
import {
  BarChart,
  Bar,
  XAxis,
  YAxis,
  CartesianGrid,
  Tooltip,
  Legend,
  ResponsiveContainer,
} from 'recharts';
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from '@/components/ui/select';

export default function GeographicalChart() {
  const [metric, setMetric] = useState('Confirmed');
  const [limit, setLimit] = useState(20);
  const { data, isLoading, error, refetch } = useTopCountries(metric, limit);

  // Format data untuk chart - urutkan dari terbesar ke terkecil
  const chartData = useMemo(() => {
    const rawData = data?.data || [];
    
    // Sort by metric value descending untuk konsistensi visual
    return [...rawData]
      .sort((a, b) => b[metric] - a[metric])
      .map((item: any, index: number) => ({
        ...item,
        // Tambahkan ranking
        rank: index + 1,
        // Format nilai untuk tooltip
        formattedValue: item[metric].toLocaleString()
      }));
  }, [data, metric]);

  // Warna berbeda untuk setiap metric
  const getBarColor = () => {
    switch (metric) {
      case 'Confirmed': return '#3b82f6'; // blue
      case 'Deaths': return '#ef4444'; // red
      case 'Recovered': return '#10b981'; // green
      case 'Active': return '#f59e0b'; // amber
      default: return '#3b82f6';
    }
  };

  console.log('ðŸ” GeographicalChart Debug:', {
    metric,
    limit,
    dataCount: chartData.length,
    chartData: chartData,
    summary: data?.summary
  });

  return (
    <ChartContainer
      title={`Top ${limit} Countries by ${metric} Cases`}
      description={`Countries with highest COVID-19 ${metric.toLowerCase()} cases`}
      isLoading={isLoading}
      error={error?.message}
      onRetry={refetch}
      actions={
        <div className="flex items-center gap-2">
          <Select value={metric} onValueChange={setMetric}>
            <SelectTrigger className="w-[140px]">
              <SelectValue />
            </SelectTrigger>
            <SelectContent>
              <SelectItem value="Confirmed">Confirmed</SelectItem>
              <SelectItem value="Deaths">Deaths</SelectItem>
              <SelectItem value="Recovered">Recovered</SelectItem>
              <SelectItem value="Active">Active</SelectItem>
            </SelectContent>
          </Select>
          <Select value={limit.toString()} onValueChange={(v) => setLimit(Number(v))}>
            <SelectTrigger className="w-[100px]">
              <SelectValue />
            </SelectTrigger>
            <SelectContent>
              <SelectItem value="10">Top 10</SelectItem>
              <SelectItem value="20">Top 20</SelectItem>
              <SelectItem value="30">Top 30</SelectItem>
              <SelectItem value="50">Top 50</SelectItem>
            </SelectContent>
          </Select>
        </div>
      }
    >
      {/* Debug Info */}
      <div className="text-xs text-muted-foreground mb-4">
        Showing {chartData.length} countries â€¢ Hover bars for details
      </div>

      {/* Horizontal Bar Chart */}
      <ResponsiveContainer width="100%" height={500}>
        <BarChart
          data={chartData}
          layout="horizontal"
          margin={{ top: 20, right: 30, left: 20, bottom: 80 }}
          barSize={35} // Fixed bar size untuk konsistensi
        >
          <CartesianGrid strokeDasharray="3 3" className="stroke-muted" />
          <XAxis
            type="category"
            dataKey="Country/Region"
            className="text-xs"
            angle={-45}
            textAnchor="end"
            height={80}
            interval={0} // Tampilkan semua label
            tick={{ fontSize: 11 }}
          />
          <YAxis
            type="number"
            className="text-xs"
            tickFormatter={(value) => {
              if (value >= 1000000) return `${(value / 1000000).toFixed(1)}M`;
              if (value >= 1000) return `${(value / 1000).toFixed(0)}K`;
              return value.toString();
            }}
            width={80}
          />
          <Tooltip
            formatter={(value: number, name: string) => [
              value.toLocaleString(),
              metric
            ]}
            labelFormatter={(label, payload) => {
              if (payload && payload[0]) {
                const country = payload[0].payload['Country/Region'];
                const rank = payload[0].payload.rank;
                return `#${rank} - ${country}`;
              }
              return label;
            }}
            contentStyle={{
              backgroundColor: 'hsl(var(--popover))',
              border: '1px solid hsl(var(--border))',
              borderRadius: '6px',
              fontSize: '12px'
            }}
          />
          <Legend />
          <Bar
            dataKey={metric}
            fill={getBarColor()}
            radius={[4, 4, 0, 0]}
            name={metric}
          />
        </BarChart>
      </ResponsiveContainer>

      {/* Additional Stats - USING BACKEND SUMMARY DATA */}
      {data?.summary && (
        <div className="mt-4 grid grid-cols-3 gap-4 text-xs text-muted-foreground">
          <div className="text-center">
            <div className="font-semibold">#1</div>
            <div>{data.summary.top_country?.name}</div>
            <div className="text-blue-600 font-medium">
              {data.summary.top_country?.value?.toLocaleString()}
            </div>
          </div>
          <div className="text-center">
            <div className="font-semibold">Total Shown</div>
            <div>{data.summary.total_countries} countries</div>
            <div className="text-green-600 font-medium">
              {data.summary.total_metric_value?.toLocaleString()}
            </div>
          </div>
          <div className="text-center">
            <div className="font-semibold">Avg per Country</div>
            <div>â€”</div>
            <div className="text-purple-600 font-medium">
              {data.summary.average_metric_value?.toLocaleString()}
            </div>
          </div>
        </div>
      )}

      {/* Loading State for Summary */}
      {isLoading && (
        <div className="mt-4 grid grid-cols-3 gap-4 text-xs text-muted-foreground">
          <div className="text-center">
            <div className="font-semibold">#1</div>
            <div className="animate-pulse bg-muted h-4 rounded mt-1"></div>
            <div className="animate-pulse bg-muted h-4 rounded mt-1"></div>
          </div>
          <div className="text-center">
            <div className="font-semibold">Total Shown</div>
            <div className="animate-pulse bg-muted h-4 rounded mt-1"></div>
            <div className="animate-pulse bg-muted h-4 rounded mt-1"></div>
          </div>
          <div className="text-center">
            <div className="font-semibold">Avg per Country</div>
            <div className="animate-pulse bg-muted h-4 rounded mt-1"></div>
            <div className="animate-pulse bg-muted h-4 rounded mt-1"></div>
          </div>
        </div>
      )}
    </ChartContainer>
  );
}
================================================================================
FILE: D:\covider-fe\src\features\analytics\components\PredictionChart.tsx
RELATIVE PATH: src\features\analytics\components\PredictionChart.tsx
================================================================================
// ============================================================================
// FILE: src/features/analytics/components/PredictionChart.tsx (FIXED)
// ============================================================================
import { useState, useMemo } from "react";
import ChartContainer from "@/components/charts/ChartContainer";
import { usePredictionData } from "../hooks/usePredictionData";
import { useCountriesList } from "@/services/queries/dataTableQueries";
import {
  LineChart,
  Line,
  XAxis,
  YAxis,
  CartesianGrid,
  Tooltip,
  Legend,
  ResponsiveContainer,
  ReferenceLine,
} from "recharts";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import { Button } from "@/components/ui/button";
import { TrendingUp, Search } from "lucide-react";
import { Input } from "@/components/ui/input";

export default function PredictionChart() {
  const [selectedCountry, setSelectedCountry] = useState("Andorra");
  const [days, setDays] = useState(7);
  const [searchTerm, setSearchTerm] = useState("");

  const { data: countriesData } = useCountriesList();
  const { data, isLoading, error, refetch } = usePredictionData(selectedCountry, days);

  // Filter countries based on search term
  const filteredCountries = useMemo(() => {
    const countries = countriesData?.countries || [];
    
    if (!searchTerm) return countries;
    
    return countries.filter((country: string) =>
      country.toLowerCase().includes(searchTerm.toLowerCase())
    );
  }, [countriesData, searchTerm]);

  const countries = countriesData?.countries || [];
  const chartData = data?.chartData || [];

  // DEBUG
  console.log('ðŸ” PredictionChart Debug:', {
    selectedCountry,
    days,
    data,
    chartData,
    chartDataLength: chartData.length,
    totalCountries: countries.length,
    filteredCountries: filteredCountries.length
  });

  return (
    <ChartContainer
      title="COVID-19 Case Predictions"
      description="Future case projections based on historical trends"
      isLoading={isLoading}
      error={error?.message}
      onRetry={refetch}
      actions={
        <div className="flex items-center gap-2">
          <Select value={selectedCountry} onValueChange={setSelectedCountry}>
            <SelectTrigger className="w-[200px]">
              <SelectValue placeholder="Select country" />
            </SelectTrigger>
            <SelectContent className="max-h-[300px]">
              {/* Search Input */}
              <div className="sticky top-0 z-10 bg-background p-2 border-b">
                <div className="relative">
                  <Search className="absolute left-2 top-2.5 h-4 w-4 text-muted-foreground" />
                  <Input
                    placeholder="Search country..."
                    value={searchTerm}
                    onChange={(e) => setSearchTerm(e.target.value)}
                    className="pl-8"
                    onClick={(e) => e.stopPropagation()}
                  />
                </div>
              </div>
              
              {/* Countries List - TAMPILKAN SEMUA atau hasil filter */}
              {filteredCountries.length > 0 ? (
                filteredCountries.map((country: string) => (
                  <SelectItem key={country} value={country}>
                    {country.trim()}
                  </SelectItem>
                ))
              ) : (
                <div className="p-2 text-center text-muted-foreground text-sm">
                  No countries found
                </div>
              )}
            </SelectContent>
          </Select>
          
          <Select
            value={days.toString()}
            onValueChange={(v) => setDays(Number(v))}
          >
            <SelectTrigger className="w-[120px]">
              <SelectValue />
            </SelectTrigger>
            <SelectContent>
              <SelectItem value="7">7 Days</SelectItem>
              <SelectItem value="14">14 Days</SelectItem>
              <SelectItem value="30">30 Days</SelectItem>
            </SelectContent>
          </Select>
          
          <Button variant="outline" size="sm" onClick={() => refetch()}>
            <TrendingUp className="mr-2 h-4 w-4" />
            Refresh
          </Button>
        </div>
      }
    >
      <div className="space-y-4">
        {/* Summary Info */}
        {data && (
          <div className="p-4 bg-muted rounded-lg">
            <div className="grid grid-cols-2 gap-4 text-sm">
              <div>
                <p className="text-muted-foreground">Last Actual Date</p>
                <p className="font-semibold">
                  {new Date(data.lastActualDate).toLocaleDateString()}
                </p>
              </div>
              <div>
                <p className="text-muted-foreground">Last Actual Value</p>
                <p className="font-semibold">
                  {data.lastActualValue.toLocaleString()}
                </p>
              </div>
            </div>
          </div>
        )}

        {/* Chart */}
        {chartData.length > 0 ? (
          <ResponsiveContainer width="100%" height={400}>
            <LineChart data={chartData}>
              <CartesianGrid strokeDasharray="3 3" className="stroke-muted" />
              <XAxis 
                dataKey="date" 
                className="text-xs"
                tick={{ fill: 'currentColor' }}
                angle={-45}
                textAnchor="end"
                height={80}
              />
              <YAxis 
                className="text-xs"
                tick={{ fill: 'currentColor' }}
                tickFormatter={(value) => {
                  if (value >= 1000000) {
                    return `${(value / 1000000).toFixed(1)}M`;
                  } else if (value >= 1000) {
                    return `${(value / 1000).toFixed(0)}K`;
                  }
                  return value.toLocaleString();
                }}
              />
              <Tooltip
                formatter={(value: number) => [value.toLocaleString(), '']}
                labelFormatter={(label) => `Date: ${label}`}
                contentStyle={{
                  backgroundColor: "hsl(var(--popover))",
                  border: "1px solid hsl(var(--border))",
                  borderRadius: "6px",
                }}
              />
              <Legend />
              <ReferenceLine
                x={data?.lastActualDate}
                stroke="hsl(var(--muted-foreground))"
                strokeDasharray="3 3"
                label={{ value: "Prediction Start", position: "top" }}
              />
              <Line
                type="monotone"
                dataKey="actual"
                stroke="#3b82f6"
                strokeWidth={2}
                name="Actual Cases"
                dot={false}
                connectNulls={false}
              />
              <Line
                type="monotone"
                dataKey="predicted"
                stroke="#f97316"
                strokeWidth={2}
                strokeDasharray="5 5"
                name="Predicted Cases"
                dot={{ r: 3 }}
                connectNulls={false}
              />
            </LineChart>
          </ResponsiveContainer>
        ) : (
          <div className="flex items-center justify-center h-[400px] text-muted-foreground">
            {isLoading ? 'Loading...' : 'No prediction data available'}
          </div>
        )}
      </div>
    </ChartContainer>
  );
}
================================================================================
FILE: D:\covider-fe\src\features\analytics\components\TimeSeriesChart.tsx
RELATIVE PATH: src\features\analytics\components\TimeSeriesChart.tsx
================================================================================
// ============================================================================
// FILE: src/features/analytics/components/TimeSeriesChart.tsx
// ============================================================================
import { useState } from "react";
import ChartContainer from "@/components/charts/ChartContainer";
import { useTimeSeriesGlobal } from "@/services/queries/analyticsQueries";
import {
  LineChart,
  Line,
  XAxis,
  YAxis,
  CartesianGrid,
  Tooltip,
  Legend,
  ResponsiveContainer,
} from "recharts";
import { Button } from "@/components/ui/button";
import { Download } from "lucide-react";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";

export default function TimeSeriesChart() {
  const [metric, setMetric] = useState("all");
  const { data, isLoading, error, refetch } = useTimeSeriesGlobal();

  const chartData = data?.data || [];

  return (
    <ChartContainer
      title="Global Time Series"
      description="COVID-19 cases over time worldwide"
      isLoading={isLoading}
      error={error?.message}
      onRetry={refetch}
      actions={
        <div className="flex items-center gap-2">
          <Select value={metric} onValueChange={setMetric}>
            <SelectTrigger className="w-[140px]">
              <SelectValue placeholder="Select metric" />
            </SelectTrigger>
            <SelectContent>
              <SelectItem value="all">All Metrics</SelectItem>
              <SelectItem value="confirmed">Confirmed</SelectItem>
              <SelectItem value="deaths">Deaths</SelectItem>
              <SelectItem value="recovered">Recovered</SelectItem>
              <SelectItem value="active">Active</SelectItem>
            </SelectContent>
          </Select>
          <Button variant="outline" size="sm">
            <Download className="mr-2 h-4 w-4" />
            Export
          </Button>
        </div>
      }
    >
      <ResponsiveContainer width="100%" height={400}>
        <LineChart data={chartData}>
          <CartesianGrid strokeDasharray="3 3" className="stroke-muted" />
          <XAxis
            dataKey="ObservationDate"
            className="text-xs"
            tickFormatter={(value) =>
              new Date(value).toLocaleDateString("en-US", {
                month: "short",
                day: "numeric",
              })
            }
          />
          <YAxis className="text-xs" />
          <Tooltip
            contentStyle={{
              backgroundColor: "hsl(var(--popover))",
              border: "1px solid hsl(var(--border))",
              borderRadius: "6px",
            }}
            labelFormatter={(value) => new Date(value).toLocaleDateString()}
          />
          <Legend />
          {(metric === "all" || metric === "confirmed") && (
            <Line
              type="monotone"
              dataKey="Confirmed"
              stroke="#3b82f6"
              strokeWidth={2}
              dot={false}
            />
          )}
          {(metric === "all" || metric === "deaths") && (
            <Line
              type="monotone"
              dataKey="Deaths"
              stroke="#ef4444"
              strokeWidth={2}
              dot={false}
            />
          )}
          {(metric === "all" || metric === "recovered") && (
            <Line
              type="monotone"
              dataKey="Recovered"
              stroke="#22c55e"
              strokeWidth={2}
              dot={false}
            />
          )}
          {(metric === "all" || metric === "active") && (
            <Line
              type="monotone"
              dataKey="Active"
              stroke="#f97316"
              strokeWidth={2}
              dot={false}
            />
          )}
        </LineChart>
      </ResponsiveContainer>
    </ChartContainer>
  );
}

================================================================================
FILE: D:\covider-fe\src\features\analytics\hooks\useCountryComparison.ts
RELATIVE PATH: src\features\analytics\hooks\useCountryComparison.ts
================================================================================
// ============================================================================
// FILE: src/features/analytics/hooks/useCountryComparison.ts
// ============================================================================
import { useQuery } from '@tanstack/react-query';
import { apiClient } from '@/services/api/client';
import { API_ENDPOINTS } from '@/services/api/endpoints';

// ============================================================================
// DOMAIN TYPES
// ============================================================================
interface CountryComparisonData {
  Country: string;
  Confirmed: number;
  Deaths: number;
  Recovered: number;
  Active: number;
  CFR: number;
  RecoveryRate: number;
  Date: string;
}

interface ComparisonApiResponse {
  status: string;
  countries: string[];
  data: CountryComparisonData[];
}

interface BarChartData {
  country: string;
  value: number;
}

export interface TransformedComparisonData {
  chartData: BarChartData[];
  snapshotDate: string | null;
}

// ============================================================================
// DATA TRANSFORMATION SERVICE
// Responsibility: Transform API response into chart-compatible formats
// ============================================================================
class ComparisonDataTransformer {
  transformForBarChart(
    apiData: CountryComparisonData[],
    metric: keyof Pick<CountryComparisonData, 'Confirmed' | 'Deaths' | 'Recovered' | 'Active'>
  ): TransformedComparisonData {
    const chartData = apiData.map(countryData => ({
      country: countryData.Country,
      value: countryData[metric],
    }));

    const snapshotDate = apiData.length > 0 ? apiData[0].Date : null;

    return {
      chartData,
      snapshotDate,
    };
  }
}

// ============================================================================
// CUSTOM HOOK
// Responsibility: Fetch and transform country comparison data
// ============================================================================
export function useCountryComparison(
  countries: string[],
  metric: 'Confirmed' | 'Deaths' | 'Recovered' | 'Active'
) {
  const transformer = new ComparisonDataTransformer();

  return useQuery<TransformedComparisonData>({
    queryKey: ['comparison', countries, metric],
    queryFn: async () => {
      // Build query string
      const queryString = countries.map(c => `countries=${c}`).join('&');
      
      // Fetch data
      const response = await apiClient.get<ComparisonApiResponse>(
        `${API_ENDPOINTS.COMPARE_COUNTRIES}?${queryString}`
      );

      // DEBUG: Log raw API response
      console.log('ðŸ” useCountryComparison - Full Response:', response);
      console.log('ðŸ” useCountryComparison - response.data:', response.data);
      console.log('ðŸ” useCountryComparison - response.data.data:', response.data.data);

      // Transform for bar chart (response.data is the API response object)
      const transformed = transformer.transformForBarChart(response.data.data, metric);
      
      // DEBUG: Log transformed data
      console.log('ðŸ” useCountryComparison - Transformed:', transformed);
      
      return transformed;
    },
    enabled: countries.length > 0,
  });
}
================================================================================
FILE: D:\covider-fe\src\features\analytics\hooks\useGeographicalData.ts
RELATIVE PATH: src\features\analytics\hooks\useGeographicalData.ts
================================================================================
// ============================================================================
// FILE: src/features/analytics/hooks/useGeographicalData.ts
// ============================================================================
import { useQuery } from "@tanstack/react-query";
import { apiClient } from "@/services/api/client";
import { API_ENDPOINTS } from "@/services/api/endpoints";

export function useGeographicalData(
  metric: string = "Confirmed",
  limit: number = 20
) {
  return useQuery({
    queryKey: ["geographical", metric, limit],
    queryFn: async () => {
      const { data } = await apiClient.get(API_ENDPOINTS.TOP_COUNTRIES, {
        params: { metric, limit },
      });
      return data;
    },
  });
}

================================================================================
FILE: D:\covider-fe\src\features\analytics\hooks\usePredictionData.ts
RELATIVE PATH: src\features\analytics\hooks\usePredictionData.ts
================================================================================
// ============================================================================
// FILE: src/features/analytics/hooks/usePredictionData.ts
// ============================================================================
import { useQuery } from '@tanstack/react-query';
import { apiClient } from '@/services/api/client';
import { API_ENDPOINTS } from '@/services/api/endpoints';

// ============================================================================
// DOMAIN TYPES
// ============================================================================
interface PredictionApiResponse {
  status: string;
  country: string;
  days_predicted: number;
  historical_data?: Record<string, number>; // âœ… NEW: Optional for backward compatibility
  predictions: Record<string, number>;
  last_actual_date: string;
  last_actual_value: number;
}

interface ChartDataPoint {
  date: string;
  actual?: number;
  predicted?: number;
}

export interface TransformedPredictionData {
  chartData: ChartDataPoint[];
  lastActualDate: string;
  lastActualValue: number;
  country: string;
}

// ============================================================================
// DATA TRANSFORMATION SERVICE
// Responsibility: Transform prediction API response into chart format
// ============================================================================
class PredictionDataTransformer {
  transform(apiData: PredictionApiResponse): TransformedPredictionData {
    const chartData = this.buildChartData(apiData);

    return {
      chartData,
      lastActualDate: apiData.last_actual_date,
      lastActualValue: apiData.last_actual_value,
      country: apiData.country,
    };
  }

  private buildChartData(apiData: PredictionApiResponse): ChartDataPoint[] {
    const points: ChartDataPoint[] = [];

    // âœ… Add all historical data if available
    if (apiData.historical_data && Object.keys(apiData.historical_data).length > 0) {
      // Sort dates to ensure chronological order
      const sortedHistorical = Object.entries(apiData.historical_data)
        .sort(([dateA], [dateB]) => dateA.localeCompare(dateB));
      
      sortedHistorical.forEach(([dateStr, value]) => {
        const cleanDate = this.formatDate(dateStr);
        points.push({
          date: cleanDate,
          actual: value,
          predicted: undefined,
        });
      });
    } else {
      // Fallback: Add only last actual point
      points.push({
        date: apiData.last_actual_date,
        actual: apiData.last_actual_value,
        predicted: undefined,
      });
    }

    // âœ… Add predicted points (also sorted)
    const sortedPredictions = Object.entries(apiData.predictions)
      .sort(([dateA], [dateB]) => dateA.localeCompare(dateB));
    
    sortedPredictions.forEach(([dateStr, value]) => {
      const cleanDate = this.formatDate(dateStr);
      points.push({
        date: cleanDate,
        actual: undefined,
        predicted: value,
      });
    });

    return points;
  }

  private formatDate(isoDate: string): string {
    // Convert "2021-05-30T00:00:00" to "2021-05-30"
    return isoDate.split('T')[0];
  }
}

// ============================================================================
// CUSTOM HOOK
// Responsibility: Fetch and transform prediction data
// ============================================================================
export function usePredictionData(country: string, days: number = 7) {
  const transformer = new PredictionDataTransformer();

  return useQuery<TransformedPredictionData>({
    queryKey: ['prediction', country, days],
    queryFn: async () => {
      const response = await apiClient.get<PredictionApiResponse>(
        API_ENDPOINTS.COUNTRY_PREDICTION(country),
        { params: { days } }
      );

      // Transform data
      const transformed = transformer.transform(response.data);
      
      return transformed;
    },
    enabled: !!country,
  });
}
================================================================================
FILE: D:\covider-fe\src\features\analytics\hooks\usePredictions.ts
RELATIVE PATH: src\features\analytics\hooks\usePredictions.ts
================================================================================
// ============================================================================
// FILE: src/features/analytics/hooks/usePredictions.ts
// ============================================================================
import { useQuery } from "@tanstack/react-query";
import { apiClient } from "@/services/api/client";
import { API_ENDPOINTS } from "@/services/api/endpoints";
import { PredictionResponse } from "@/types";

export function usePredictions(country: string, days: number = 7) {
  return useQuery<PredictionResponse>({
    queryKey: ["predictions", country, days],
    queryFn: async () => {
      const { data } = await apiClient.get(
        API_ENDPOINTS.COUNTRY_PREDICTION(country),
        { params: { days } }
      );
      return data;
    },
    enabled: !!country,
  });
}

================================================================================
FILE: D:\covider-fe\src\features\analytics\hooks\useTimeSeriesData.ts
RELATIVE PATH: src\features\analytics\hooks\useTimeSeriesData.ts
================================================================================
// ============================================================================
// FILE: src/features/analytics/hooks/useTimeSeriesData.ts
// ============================================================================
import { useQuery } from "@tanstack/react-query";
import { apiClient } from "@/services/api/client";
import { API_ENDPOINTS } from "@/services/api/endpoints";
import { TimeSeriesData } from "@/types";

export function useTimeSeriesData(country?: string) {
  const endpoint = country
    ? API_ENDPOINTS.TIME_SERIES_COUNTRY(country)
    : API_ENDPOINTS.TIME_SERIES_GLOBAL;

  return useQuery<{ status: string; data: TimeSeriesData[] }>({
    queryKey: ["timeSeries", country || "global"],
    queryFn: async () => {
      const { data } = await apiClient.get(endpoint);
      return data;
    },
    enabled: !country || !!country,
  });
}

================================================================================
FILE: D:\covider-fe\src\features\analytics\services\ComparisonDataTransformer.ts
RELATIVE PATH: src\features\analytics\services\ComparisonDataTransformer.ts
================================================================================
// ============================================================================
// FILE: src/features/analytics/services/ComparisonDataTransformer.ts
// ============================================================================

// ============================================================================
// DOMAIN TYPES
// ============================================================================
interface CountryComparisonData {
  Country: string;
  Confirmed: number;
  Deaths: number;
  Recovered: number;
  Active: number;
  CFR: number;
  RecoveryRate: number;
  Date: string;
}

interface BarChartData {
  country: string;
  value: number;
}

interface TransformedComparisonData {
  chartData: BarChartData[];
  snapshotDate: string | null;
}

// ============================================================================
// DATA TRANSFORMATION SERVICE
// Responsibility: Transform API response into chart-compatible formats
// 
// Design Principles Applied:
// - Single Responsibility: Only handles data transformation
// - Open/Closed: Easy to extend with new transformation methods
// - Dependency Inversion: Operates on abstractions (interfaces)
// ============================================================================
export class ComparisonDataTransformer {
  /**
   * Transform API response for BarChart consumption
   * 
   * @param apiData - Raw API response data
   * @param metric - The metric to extract (Confirmed, Deaths, etc.)
   * @returns Transformed data with chartData and metadata
   */
  transformForBarChart(
    apiData: CountryComparisonData[],
    metric: keyof Pick<CountryComparisonData, 'Confirmed' | 'Deaths' | 'Recovered' | 'Active'>
  ): TransformedComparisonData {
    const chartData = this.extractMetricValues(apiData, metric);
    const snapshotDate = this.extractSnapshotDate(apiData);

    return {
      chartData,
      snapshotDate,
    };
  }

  /**
   * Extract metric values for each country
   * 
   * @private
   * @param data - Country comparison data
   * @param metric - Target metric
   * @returns Array of country-value pairs
   */
  private extractMetricValues(
    data: CountryComparisonData[],
    metric: keyof Pick<CountryComparisonData, 'Confirmed' | 'Deaths' | 'Recovered' | 'Active'>
  ): BarChartData[] {
    return data.map(countryData => ({
      country: countryData.Country,
      value: countryData[metric],
    }));
  }

  /**
   * Extract snapshot date from data
   * Assumes all countries have the same date (snapshot data)
   * 
   * @private
   * @param data - Country comparison data
   * @returns Snapshot date or null if no data
   */
  private extractSnapshotDate(data: CountryComparisonData[]): string | null {
    if (data.length === 0) return null;
    return data[0].Date;
  }

  /**
   * Validate that all countries have the same date
   * Useful for ensuring data consistency
   * 
   * @param data - Country comparison data
   * @returns True if all dates match
   */
  validateSnapshotConsistency(data: CountryComparisonData[]): boolean {
    if (data.length <= 1) return true;
    
    const firstDate = data[0].Date;
    return data.every(item => item.Date === firstDate);
  }
}
================================================================================
FILE: D:\covider-fe\src\features\countries\CountriesPage.tsx
RELATIVE PATH: src\features\countries\CountriesPage.tsx
================================================================================
// ============================================================================
// FILE: src/features/countries/CountriesPage.tsx
// ============================================================================
import { useState } from "react";
import PageHeader from "@/components/layout/PageHeader";
import { useCountriesSummary } from "@/services/queries/countryQueries";
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";
import { Input } from "@/components/ui/input";
import { Badge } from "@/components/ui/badge";
import { Button } from "@/components/ui/button";
import { Search, ExternalLink, TrendingUp, Activity } from "lucide-react";
import LoadingSpinner from "@/components/feedback/LoadingSpinner";
import ErrorAlert from "@/components/feedback/ErrorAlert";
import CountryDetailModal from "./components/CountryDetailModal";
import { formatNumber } from "@/utils/formatters";

export default function CountriesPage() {
  const [searchQuery, setSearchQuery] = useState("");
  const [selectedCountry, setSelectedCountry] = useState<string | null>(null);
  const [modalOpen, setModalOpen] = useState(false);

  const { data, isLoading, error, refetch } = useCountriesSummary();

  const handleCountryClick = (country: string) => {
    setSelectedCountry(country);
    setModalOpen(true);
  };

  if (isLoading) {
    return (
      <div className="flex items-center justify-center h-full">
        <LoadingSpinner size="lg" text="Loading countries data..." />
      </div>
    );
  }

  if (error) {
    return (
      <ErrorAlert
        title="Failed to load countries"
        message="Unable to fetch countries data. Please try again."
        onRetry={() => refetch()}
      />
    );
  }

  const countries = data?.data || [];
  const filteredCountries = countries.filter((country: any) =>
    country["Country/Region"].toLowerCase().includes(searchQuery.toLowerCase())
  );

  return (
    <div className="space-y-6">
      <PageHeader
        title="Countries"
        description="Detailed COVID-19 statistics by country"
      />

      {/* Search Bar */}
      <Card>
        <CardContent className="pt-6">
          <div className="relative">
            <Search className="absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground" />
            <Input
              placeholder="Search countries..."
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
              className="pl-9"
            />
          </div>
        </CardContent>
      </Card>

      {/* Countries Grid */}
      <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-3">
        {filteredCountries.map((country: any) => (
          <Card
            key={country["Country/Region"]}
            className="hover:shadow-lg transition-shadow cursor-pointer"
            onClick={() => handleCountryClick(country["Country/Region"])}
          >
            <CardHeader>
              <CardTitle className="flex items-center justify-between">
                <span className="truncate">{country["Country/Region"]}</span>
                <ExternalLink className="h-4 w-4 text-muted-foreground" />
              </CardTitle>
              <CardDescription>
                Last updated:{" "}
                {new Date(country.ObservationDate).toLocaleDateString()}
              </CardDescription>
            </CardHeader>
            <CardContent className="space-y-3">
              <div className="grid grid-cols-2 gap-2">
                <div>
                  <p className="text-xs text-muted-foreground">Confirmed</p>
                  <p className="text-lg font-bold text-blue-600">
                    {formatNumber(country.Confirmed)}
                  </p>
                </div>
                <div>
                  <p className="text-xs text-muted-foreground">Deaths</p>
                  <p className="text-lg font-bold text-red-600">
                    {formatNumber(country.Deaths)}
                  </p>
                </div>
                <div>
                  <p className="text-xs text-muted-foreground">Recovered</p>
                  <p className="text-lg font-bold text-green-600">
                    {formatNumber(country.Recovered)}
                  </p>
                </div>
                <div>
                  <p className="text-xs text-muted-foreground">Active</p>
                  <p className="text-lg font-bold text-orange-600">
                    {formatNumber(country.Active)}
                  </p>
                </div>
              </div>

              <div className="flex items-center justify-between pt-2 border-t">
                <div className="flex items-center gap-2">
                  <TrendingUp className="h-3 w-3 text-muted-foreground" />
                  <span className="text-xs text-muted-foreground">CFR</span>
                  <Badge variant="secondary">{country.CFR.toFixed(2)}%</Badge>
                </div>
                <div className="flex items-center gap-2">
                  <Activity className="h-3 w-3 text-muted-foreground" />
                  <span className="text-xs text-muted-foreground">
                    Recovery
                  </span>
                  <Badge variant="secondary">
                    {country.RecoveryRate.toFixed(2)}%
                  </Badge>
                </div>
              </div>
            </CardContent>
          </Card>
        ))}
      </div>

      {filteredCountries.length === 0 && (
        <Card>
          <CardContent className="py-12 text-center">
            <p className="text-muted-foreground">
              No countries found matching your search.
            </p>
          </CardContent>
        </Card>
      )}

      <CountryDetailModal
        open={modalOpen}
        onOpenChange={setModalOpen}
        country={selectedCountry || ""}
      />
    </div>
  );
}

================================================================================
FILE: D:\covider-fe\src\features\countries\components\CountryComparison.tsx
RELATIVE PATH: src\features\countries\components\CountryComparison.tsx
================================================================================
// ============================================================================
// FILE: src/features/countries/components/CountryComparison.tsx
// ============================================================================
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import { Button } from "@/components/ui/button";
import { useState } from "react";
import { Plus, X } from "lucide-react";
import { Badge } from "@/components/ui/badge";

interface CountryComparisonProps {
  availableCountries: string[];
  onCompare: (countries: string[]) => void;
}

export default function CountryComparison({
  availableCountries,
  onCompare,
}: CountryComparisonProps) {
  const [selectedCountries, setSelectedCountries] = useState<string[]>([]);
  const [currentSelection, setCurrentSelection] = useState<string>("");

  const handleAddCountry = () => {
    if (currentSelection && !selectedCountries.includes(currentSelection)) {
      const updated = [...selectedCountries, currentSelection];
      setSelectedCountries(updated);
      setCurrentSelection("");
    }
  };

  const handleRemoveCountry = (country: string) => {
    setSelectedCountries(selectedCountries.filter((c) => c !== country));
  };

  const handleCompare = () => {
    if (selectedCountries.length >= 2) {
      onCompare(selectedCountries);
    }
  };

  return (
    <Card>
      <CardHeader>
        <CardTitle>Compare Countries</CardTitle>
        <CardDescription>
          Select multiple countries to compare their statistics
        </CardDescription>
      </CardHeader>
      <CardContent className="space-y-4">
        <div className="flex gap-2">
          <Select value={currentSelection} onValueChange={setCurrentSelection}>
            <SelectTrigger className="flex-1">
              <SelectValue placeholder="Select a country" />
            </SelectTrigger>
            <SelectContent>
              {availableCountries
                .filter((c) => !selectedCountries.includes(c))
                .map((country) => (
                  <SelectItem key={country} value={country}>
                    {country}
                  </SelectItem>
                ))}
            </SelectContent>
          </Select>
          <Button
            onClick={handleAddCountry}
            disabled={!currentSelection}
            size="icon"
          >
            <Plus className="h-4 w-4" />
          </Button>
        </div>

        {selectedCountries.length > 0 && (
          <div className="flex flex-wrap gap-2">
            {selectedCountries.map((country) => (
              <Badge
                key={country}
                variant="secondary"
                className="pl-3 pr-1 py-1"
              >
                {country}
                <Button
                  variant="ghost"
                  size="icon"
                  className="h-5 w-5 ml-1"
                  onClick={() => handleRemoveCountry(country)}
                >
                  <X className="h-3 w-3" />
                </Button>
              </Badge>
            ))}
          </div>
        )}

        <Button
          onClick={handleCompare}
          disabled={selectedCountries.length < 2}
          className="w-full"
        >
          Compare {selectedCountries.length} Countries
        </Button>
      </CardContent>
    </Card>
  );
}

================================================================================
FILE: D:\covider-fe\src\features\countries\components\CountryDetailModal.tsx
RELATIVE PATH: src\features\countries\components\CountryDetailModal.tsx
================================================================================
// ============================================================================
// FILE: src/features/countries/components/CountryDetailModal.tsx
// ============================================================================
import BaseModal from "@/components/modals/BaseModal";
import { useCountryDetails } from "@/services/queries/countryQueries";
import { useTimeSeriesCountry } from "@/services/queries/analyticsQueries";
import LoadingSpinner from "@/components/feedback/LoadingSpinner";
import ErrorAlert from "@/components/feedback/ErrorAlert";
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { Badge } from "@/components/ui/badge";
import { Tabs, TabsContent, TabsList, TabsTrigger } from "@/components/ui/tabs";
import {
  LineChart,
  Line,
  XAxis,
  YAxis,
  CartesianGrid,
  Tooltip,
  ResponsiveContainer,
} from "recharts";
import { formatNumber } from "@/utils/formatters";
import { Activity, TrendingUp, TrendingDown, Users } from "lucide-react";

interface CountryDetailModalProps {
  open: boolean;
  onOpenChange: (open: boolean) => void;
  country: string;
}

export default function CountryDetailModal({
  open,
  onOpenChange,
  country,
}: CountryDetailModalProps) {
  const {
    data: details,
    isLoading: detailsLoading,
    error: detailsError,
  } = useCountryDetails(country);
  const { data: timeline, isLoading: timelineLoading } =
    useTimeSeriesCountry(country);

  if (!country) return null;

  const isLoading = detailsLoading || timelineLoading;

  return (
    <BaseModal
      open={open}
      onOpenChange={onOpenChange}
      title={country}
      description="Detailed COVID-19 statistics and trends"
      size="xl"
    >
      {isLoading && (
        <div className="py-12">
          <LoadingSpinner text="Loading country details..." />
        </div>
      )}

      {detailsError && <ErrorAlert message="Failed to load country details" />}

      {details && !isLoading && (
        <div className="space-y-6">
          {/* Summary Cards */}
          <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
            <Card>
              <CardHeader className="pb-2">
                <CardTitle className="text-sm font-medium text-muted-foreground flex items-center gap-2">
                  <Users className="h-4 w-4" />
                  Confirmed
                </CardTitle>
              </CardHeader>
              <CardContent>
                <p className="text-2xl font-bold text-blue-600">
                  {formatNumber(details.data.confirmed)}
                </p>
              </CardContent>
            </Card>

            <Card>
              <CardHeader className="pb-2">
                <CardTitle className="text-sm font-medium text-muted-foreground flex items-center gap-2">
                  <TrendingDown className="h-4 w-4" />
                  Deaths
                </CardTitle>
              </CardHeader>
              <CardContent>
                <p className="text-2xl font-bold text-red-600">
                  {formatNumber(details.data.deaths)}
                </p>
              </CardContent>
            </Card>

            <Card>
              <CardHeader className="pb-2">
                <CardTitle className="text-sm font-medium text-muted-foreground flex items-center gap-2">
                  <TrendingUp className="h-4 w-4" />
                  Recovered
                </CardTitle>
              </CardHeader>
              <CardContent>
                <p className="text-2xl font-bold text-green-600">
                  {formatNumber(details.data.recovered)}
                </p>
              </CardContent>
            </Card>

            <Card>
              <CardHeader className="pb-2">
                <CardTitle className="text-sm font-medium text-muted-foreground flex items-center gap-2">
                  <Activity className="h-4 w-4" />
                  Active
                </CardTitle>
              </CardHeader>
              <CardContent>
                <p className="text-2xl font-bold text-orange-600">
                  {formatNumber(details.data.active)}
                </p>
              </CardContent>
            </Card>
          </div>

          {/* Charts */}
          <Tabs defaultValue="timeline">
            <TabsList className="grid w-full grid-cols-2">
              <TabsTrigger value="timeline">Timeline</TabsTrigger>
              <TabsTrigger value="stats">Statistics</TabsTrigger>
            </TabsList>

            <TabsContent value="timeline" className="mt-4">
              <Card>
                <CardHeader>
                  <CardTitle>Cases Over Time</CardTitle>
                </CardHeader>
                <CardContent>
                  {timeline?.data && (
                    <ResponsiveContainer width="100%" height={300}>
                      <LineChart data={timeline.data}>
                        <CartesianGrid strokeDasharray="3 3" />
                        <XAxis
                          dataKey="ObservationDate"
                          tickFormatter={(value) =>
                            new Date(value).toLocaleDateString("en-US", {
                              month: "short",
                              day: "numeric",
                            })
                          }
                        />
                        <YAxis />
                        <Tooltip />
                        <Line
                          type="monotone"
                          dataKey="Confirmed"
                          stroke="#3b82f6"
                        />
                        <Line
                          type="monotone"
                          dataKey="Deaths"
                          stroke="#ef4444"
                        />
                        <Line
                          type="monotone"
                          dataKey="Recovered"
                          stroke="#22c55e"
                        />
                      </LineChart>
                    </ResponsiveContainer>
                  )}
                </CardContent>
              </Card>
            </TabsContent>

            <TabsContent value="stats" className="mt-4">
              <Card>
                <CardHeader>
                  <CardTitle>Key Statistics</CardTitle>
                </CardHeader>
                <CardContent className="space-y-4">
                  <div className="flex items-center justify-between">
                    <span className="text-sm text-muted-foreground">
                      Last Updated
                    </span>
                    <Badge variant="secondary">
                      {details.data.last_updated}
                    </Badge>
                  </div>
                  <div className="flex items-center justify-between">
                    <span className="text-sm text-muted-foreground">
                      Total Population
                    </span>
                    <Badge variant="secondary">N/A</Badge>
                  </div>
                  <div className="flex items-center justify-between">
                    <span className="text-sm text-muted-foreground">
                      Cases per 100k
                    </span>
                    <Badge variant="secondary">N/A</Badge>
                  </div>
                </CardContent>
              </Card>
            </TabsContent>
          </Tabs>
        </div>
      )}
    </BaseModal>
  );
}

================================================================================
FILE: D:\covider-fe\src\features\countries\components\CountryList.tsx
RELATIVE PATH: src\features\countries\components\CountryList.tsx
================================================================================
// ============================================================================
// FILE: src/features/countries/components/CountryList.tsx
// ============================================================================
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";
import { Badge } from "@/components/ui/badge";
import { formatNumber } from "@/utils/formatters";
import { ExternalLink } from "lucide-react";

interface Country {
  "Country/Region": string;
  Confirmed: number;
  Deaths: number;
  Recovered: number;
  Active: number;
  CFR: number;
  RecoveryRate: number;
  ObservationDate: string;
}

interface CountryListProps {
  countries: Country[];
  onCountryClick: (country: string) => void;
}

export default function CountryList({
  countries,
  onCountryClick,
}: CountryListProps) {
  return (
    <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-3">
      {countries.map((country) => (
        <Card
          key={country["Country/Region"]}
          className="hover:shadow-lg transition-shadow cursor-pointer"
          onClick={() => onCountryClick(country["Country/Region"])}
        >
          <CardHeader>
            <CardTitle className="flex items-center justify-between">
              <span className="truncate">{country["Country/Region"]}</span>
              <ExternalLink className="h-4 w-4 text-muted-foreground flex-shrink-0" />
            </CardTitle>
            <CardDescription>
              {new Date(country.ObservationDate).toLocaleDateString()}
            </CardDescription>
          </CardHeader>
          <CardContent className="space-y-3">
            <div className="grid grid-cols-2 gap-2">
              <div>
                <p className="text-xs text-muted-foreground">Confirmed</p>
                <p className="text-lg font-bold text-blue-600">
                  {formatNumber(country.Confirmed)}
                </p>
              </div>
              <div>
                <p className="text-xs text-muted-foreground">Deaths</p>
                <p className="text-lg font-bold text-red-600">
                  {formatNumber(country.Deaths)}
                </p>
              </div>
              <div>
                <p className="text-xs text-muted-foreground">Recovered</p>
                <p className="text-lg font-bold text-green-600">
                  {formatNumber(country.Recovered)}
                </p>
              </div>
              <div>
                <p className="text-xs text-muted-foreground">Active</p>
                <p className="text-lg font-bold text-orange-600">
                  {formatNumber(country.Active)}
                </p>
              </div>
            </div>

            <div className="flex items-center justify-between pt-2 border-t">
              <div className="flex items-center gap-1">
                <span className="text-xs text-muted-foreground">CFR</span>
                <Badge variant="secondary" className="text-xs">
                  {country.CFR.toFixed(2)}%
                </Badge>
              </div>
              <div className="flex items-center gap-1">
                <span className="text-xs text-muted-foreground">Recovery</span>
                <Badge variant="secondary" className="text-xs">
                  {country.RecoveryRate.toFixed(2)}%
                </Badge>
              </div>
            </div>
          </CardContent>
        </Card>
      ))}
    </div>
  );
}

================================================================================
FILE: D:\covider-fe\src\features\countries\hooks\useCountryData.ts
RELATIVE PATH: src\features\countries\hooks\useCountryData.ts
================================================================================
// ============================================================================
// FILE: src/features/countries/hooks/useCountryData.ts
// ============================================================================
import { useQuery } from "@tanstack/react-query";
import { apiClient } from "@/services/api/client";
import { API_ENDPOINTS } from "@/services/api/endpoints";

export function useCountryData(country: string) {
  const detailsQuery = useQuery({
    queryKey: ["country", "details", country],
    queryFn: async () => {
      const { data } = await apiClient.get(
        API_ENDPOINTS.COUNTRY_DETAILS(country)
      );
      return data;
    },
    enabled: !!country,
  });

  const timelineQuery = useQuery({
    queryKey: ["country", "timeline", country],
    queryFn: async () => {
      const { data } = await apiClient.get(
        API_ENDPOINTS.TIME_SERIES_COUNTRY(country)
      );
      return data;
    },
    enabled: !!country,
  });

  return {
    details: detailsQuery.data,
    timeline: timelineQuery.data,
    isLoading: detailsQuery.isLoading || timelineQuery.isLoading,
    error: detailsQuery.error || timelineQuery.error,
    refetch: () => {
      detailsQuery.refetch();
      timelineQuery.refetch();
    },
  };
}

================================================================================
FILE: D:\covider-fe\src\features\dashboard\DashboardPage.tsx
RELATIVE PATH: src\features\dashboard\DashboardPage.tsx
================================================================================
// ============================================================================
// FILE: src/features/dashboard/DashboardPage.tsx
// ============================================================================
import PageHeader from "@/components/layout/PageHeader";
import {
  useDashboardSummary,
  useDashboardKPIs,
} from "@/services/queries/dashboardQueries";
import LoadingSpinner from "@/components/feedback/LoadingSpinner";
import ErrorAlert from "@/components/feedback/ErrorAlert";
import KPICard from "./components/KPICard";
import StatsSummary from "./components/StatsSummary";
import TopCountriesTable from "./components/TopCountriesTable";
import { RefreshCw } from "lucide-react";
import { Button } from "@/components/ui/button";

export default function DashboardPage() {
  const {
    data: summary,
    isLoading: summaryLoading,
    error: summaryError,
    refetch: refetchSummary,
  } = useDashboardSummary();

  const {
    data: kpis,
    isLoading: kpisLoading,
    error: kpisError,
    refetch: refetchKPIs,
  } = useDashboardKPIs();

  const handleRefresh = () => {
    refetchSummary();
    refetchKPIs();
  };

  if (summaryLoading || kpisLoading) {
    return (
      <div className="flex items-center justify-center h-full">
        <LoadingSpinner size="lg" text="Loading dashboard..." />
      </div>
    );
  }

  if (summaryError || kpisError) {
    return (
      <ErrorAlert
        title="Failed to load dashboard"
        message="Unable to fetch dashboard data. Please try again."
        onRetry={handleRefresh}
      />
    );
  }

  return (
    <div className="space-y-6">
      <PageHeader
        title="Dashboard"
        description="Real-time COVID-19 global statistics and insights"
      >
        <Button onClick={handleRefresh} variant="outline" size="sm">
          <RefreshCw className="mr-2 h-4 w-4" />
          Refresh
        </Button>
      </PageHeader>

      {/* KPI Cards Grid */}
      {kpis && (
        <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6">
          {kpis.kpis.map((kpi: any, index: number) => (
            <KPICard key={index} kpi={kpi} />
          ))}
        </div>
      )}

      {/* Statistics Summary */}
      {summary && (
        <div className="grid gap-4 lg:grid-cols-2">
          <StatsSummary metrics={summary.global_metrics} />
          <TopCountriesTable countries={summary.top_countries} />
        </div>
      )}
    </div>
  );
}

================================================================================
FILE: D:\covider-fe\src\features\dashboard\components\DashboardChartView.tsx
RELATIVE PATH: src\features\dashboard\components\DashboardChartView.tsx
================================================================================
// ============================================================================
// FILE: src/features/dashboard/components/DashboardChartView.tsx
// ============================================================================
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';
import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';
import { useTimeSeriesGlobal } from '@/services/queries/analyticsQueries';
import LineChart from '@/components/charts/LineChart';
import AreaChart from '@/components/charts/AreaChart';
import LoadingSpinner from '@/components/feedback/LoadingSpinner';
import ErrorAlert from '@/components/feedback/ErrorAlert';

export default function DashboardChartView() {
  const { data, isLoading, error, refetch } = useTimeSeriesGlobal();

  if (isLoading) {
    return (
      <Card>
        <CardContent className="py-12">
          <LoadingSpinner text="Loading chart..." />
        </CardContent>
      </Card>
    );
  }

  if (error) {
    return (
      <Card>
        <CardContent className="py-6">
          <ErrorAlert message="Failed to load chart data" onRetry={refetch} />
        </CardContent>
      </Card>
    );
  }

  const chartData = data?.data || [];

  return (
    <Card>
      <CardHeader>
        <CardTitle>Global Trends</CardTitle>
        <CardDescription>COVID-19 cases over time</CardDescription>
      </CardHeader>
      <CardContent>
        <Tabs defaultValue="line">
          <TabsList className="mb-4">
            <TabsTrigger value="line">Line Chart</TabsTrigger>
            <TabsTrigger value="area">Area Chart</TabsTrigger>
          </TabsList>

          <TabsContent value="line">
            <LineChart
              data={chartData}
              lines={[
                { dataKey: 'Confirmed', name: 'Confirmed', color: '#3b82f6' },
                { dataKey: 'Deaths', name: 'Deaths', color: '#ef4444' },
                { dataKey: 'Recovered', name: 'Recovered', color: '#22c55e' },
              ]}
              xAxisKey="ObservationDate"
              xAxisFormatter={(value) =>
                new Date(value as string).toLocaleDateString('en-US', {
                  month: 'short',
                  day: 'numeric',
                })
              }
            />
          </TabsContent>

          <TabsContent value="area">
            <AreaChart
              data={chartData}
              areas={[
                { dataKey: 'Confirmed', name: 'Confirmed', color: '#3b82f6' },
                { dataKey: 'Deaths', name: 'Deaths', color: '#ef4444' },
                { dataKey: 'Recovered', name: 'Recovered', color: '#22c55e' },
              ]}
              xAxisKey="ObservationDate"
              xAxisFormatter={(value) =>
                new Date(value as string).toLocaleDateString('en-US', {
                  month: 'short',
                  day: 'numeric',
                })
              }
            />
          </TabsContent>
        </Tabs>
      </CardContent>
    </Card>
  );
}

================================================================================
FILE: D:\covider-fe\src\features\dashboard\components\DashboardLayout.tsx
RELATIVE PATH: src\features\dashboard\components\DashboardLayout.tsx
================================================================================
// ============================================================================
// FILE: src/features/dashboard/components/DashboardLayout.tsx
// ============================================================================
import { ReactNode } from 'react';

interface DashboardLayoutProps {
  header?: ReactNode;
  kpis?: ReactNode;
  mainContent?: ReactNode;
  sidebar?: ReactNode;
}

export default function DashboardLayout({
  header,
  kpis,
  mainContent,
  sidebar,
}: DashboardLayoutProps) {
  return (
    <div className="space-y-6">
      {header}
      {kpis}
      <div className="grid gap-6 lg:grid-cols-3">
        <div className="lg:col-span-2 space-y-6">{mainContent}</div>
        {sidebar && <div className="space-y-6">{sidebar}</div>}
      </div>
    </div>
  );
}

================================================================================
FILE: D:\covider-fe\src\features\dashboard\components\KPICard.tsx
RELATIVE PATH: src\features\dashboard\components\KPICard.tsx
================================================================================
// ============================================================================
// FILE: src/features/dashboard/components/KPICard.tsx
// ============================================================================
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { ArrowUpRight, ArrowDownRight } from "lucide-react";
import { cn } from "@/utils/cn";
import { formatNumber, formatPercentage } from "@/utils/formatters";

interface KPICardProps {
  kpi: {
    label: string;
    value: number | string;
    format: "number" | "percentage" | "string";
    color: string;
    trend?: number;
  };
}

export default function KPICard({ kpi }: KPICardProps) {
  const formatValue = () => {
    if (kpi.format === "number") {
      return formatNumber(kpi.value as number);
    }
    if (kpi.format === "percentage") {
      return kpi.value;
    }
    return kpi.value;
  };

  const trendColor =
    kpi.trend && kpi.trend > 0 ? "text-red-500" : "text-green-500";
  const TrendIcon = kpi.trend && kpi.trend > 0 ? ArrowUpRight : ArrowDownRight;

  return (
    <Card>
      <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
        <CardTitle className="text-sm font-medium text-muted-foreground">
          {kpi.label}
        </CardTitle>
        {kpi.trend !== undefined && (
          <TrendIcon className={cn("h-4 w-4", trendColor)} />
        )}
      </CardHeader>
      <CardContent>
        <div className="text-2xl font-bold" style={{ color: kpi.color }}>
          {formatValue()}
        </div>
        {kpi.trend !== undefined && (
          <p className={cn("text-xs mt-1", trendColor)}>
            {kpi.trend > 0 ? "+" : ""}
            {kpi.trend.toFixed(2)}% from last week
          </p>
        )}
      </CardContent>
    </Card>
  );
}

================================================================================
FILE: D:\covider-fe\src\features\dashboard\components\StatsSummary.tsx
RELATIVE PATH: src\features\dashboard\components\StatsSummary.tsx
================================================================================
// ============================================================================
// FILE: src/features/dashboard/components/StatsSummary.tsx
// ============================================================================
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";
import { Badge } from "@/components/ui/badge";
import { formatNumber, formatPercentage, formatDate } from "@/utils/formatters";
import { Activity, TrendingUp, Heart } from "lucide-react";
import { cn } from "@/utils/cn";

interface StatsSummaryProps {
  metrics: {
    total_confirmed: number;
    total_deaths: number;
    total_recovered: number;
    total_active: number;
    global_cfr: number;
    global_recovery_rate: number;
    as_of_date: string;
  };
}

export default function StatsSummary({ metrics }: StatsSummaryProps) {
  const stats = [
    {
      label: "Active Cases",
      value: formatNumber(metrics.total_active),
      icon: Activity,
      color: "text-orange-500",
    },
    {
      label: "Case Fatality Rate",
      value: formatPercentage(metrics.global_cfr),
      icon: TrendingUp,
      color: "text-red-500",
    },
    {
      label: "Recovery Rate",
      value: formatPercentage(metrics.global_recovery_rate),
      icon: Heart,
      color: "text-green-500",
    },
  ];

  return (
    <Card>
      <CardHeader>
        <CardTitle>Global Statistics</CardTitle>
        <CardDescription>
          Last updated: {formatDate(metrics.as_of_date)}
        </CardDescription>
      </CardHeader>
      <CardContent className="space-y-4">
        {stats.map((stat, index) => (
          <div key={index} className="flex items-center justify-between">
            <div className="flex items-center space-x-3">
              <div className={cn("rounded-full p-2 bg-muted", stat.color)}>
                <stat.icon className="h-4 w-4" />
              </div>
              <span className="text-sm font-medium">{stat.label}</span>
            </div>
            <Badge variant="secondary" className="text-base font-semibold">
              {stat.value}
            </Badge>
          </div>
        ))}
      </CardContent>
    </Card>
  );
}
================================================================================
FILE: D:\covider-fe\src\features\dashboard\components\TopCountriesTable.tsx
RELATIVE PATH: src\features\dashboard\components\TopCountriesTable.tsx
================================================================================
// ============================================================================
// FILE: src/features/dashboard/components/TopCountriesTable.tsx
// ============================================================================
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";
import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from "@/components/ui/table";
import { Badge } from "@/components/ui/badge";
import { formatNumber } from "@/utils/formatters";
import { Button } from "@/components/ui/button";
import { ExternalLink } from "lucide-react";

interface TopCountriesTableProps {
  countries: Array<{
    "Country/Region": string;
    Confirmed: number;
    Deaths: number;
    Recovered: number;
    Active: number;
  }>;
}

export default function TopCountriesTable({
  countries,
}: TopCountriesTableProps) {
  const topCountries = countries.slice(0, 10);

  return (
    <Card>
      <CardHeader>
        <CardTitle>Top 10 Affected Countries</CardTitle>
        <CardDescription>
          Countries with highest confirmed cases
        </CardDescription>
      </CardHeader>
      <CardContent>
        <Table>
          <TableHeader>
            <TableRow>
              <TableHead className="w-[50px]">#</TableHead>
              <TableHead>Country</TableHead>
              <TableHead className="text-right">Confirmed</TableHead>
              <TableHead className="text-right">Deaths</TableHead>
              <TableHead className="text-right">Active</TableHead>
              <TableHead className="w-[50px]"></TableHead>
            </TableRow>
          </TableHeader>
          <TableBody>
            {topCountries.map((country, index) => (
              <TableRow key={country["Country/Region"]}>
                <TableCell className="font-medium">{index + 1}</TableCell>
                <TableCell className="font-medium">
                  {country["Country/Region"]}
                </TableCell>
                <TableCell className="text-right">
                  <Badge variant="secondary">
                    {formatNumber(country.Confirmed)}
                  </Badge>
                </TableCell>
                <TableCell className="text-right text-red-500">
                  {formatNumber(country.Deaths)}
                </TableCell>
                <TableCell className="text-right text-orange-500">
                  {formatNumber(country.Active)}
                </TableCell>
                <TableCell>
                  <Button variant="ghost" size="icon" className="h-8 w-8">
                    <ExternalLink className="h-4 w-4" />
                  </Button>
                </TableCell>
              </TableRow>
            ))}
          </TableBody>
        </Table>
      </CardContent>
    </Card>
  );
}

================================================================================
FILE: D:\covider-fe\src\features\dashboard\hooks\useDashboardData.ts
RELATIVE PATH: src\features\dashboard\hooks\useDashboardData.ts
================================================================================
// ============================================================================
// FILE: src/features/dashboard/hooks/useDashboardData.ts
// ============================================================================
import { useDashboardSummary, useDashboardKPIs } from '@/services/queries/dashboardQueries';

export function useDashboardData() {
  const summary = useDashboardSummary();
  const kpis = useDashboardKPIs();

  return {
    summary,
    kpis,
    isLoading: summary.isLoading || kpis.isLoading,
    error: summary.error || kpis.error,
    refetch: () => {
      summary.refetch();
      kpis.refetch();
    },
  };
}

================================================================================
FILE: D:\covider-fe\src\features\data-tables\DataTablesPage.tsx
RELATIVE PATH: src\features\data-tables\DataTablesPage.tsx
================================================================================
// ============================================================================
// FILE: src/features/data-tables/DataTablesPage.tsx
// ============================================================================
import { useState } from 'react';
import PageHeader from '@/components/layout/PageHeader';
import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';
import ProcessedDataTable from './components/ProcessedDataTable';
import RawDataTable from './components/RawDataTable';

export default function DataTablesPage() {
  const [activeTab, setActiveTab] = useState('processed');

  return (
    <div className="space-y-6">
      <PageHeader
        title="Data Tables"
        description="Browse and analyze COVID-19 data with advanced filtering and sorting"
      />

      <Tabs value={activeTab} onValueChange={setActiveTab}>
        <TabsList>
          <TabsTrigger value="processed">Processed Data</TabsTrigger>
          <TabsTrigger value="raw">Raw Data</TabsTrigger>
        </TabsList>

        <TabsContent value="processed" className="mt-6">
          <ProcessedDataTable />
        </TabsContent>

        <TabsContent value="raw" className="mt-6">
          <RawDataTable />
        </TabsContent>
      </Tabs>
    </div>
  );
}

================================================================================
FILE: D:\covider-fe\src\features\data-tables\components\DataTableColumns.tsx
RELATIVE PATH: src\features\data-tables\components\DataTableColumns.tsx
================================================================================
// ============================================================================
// FILE: src/features/data-tables/components/DataTableColumns.tsx
// ============================================================================
import { ColumnDef } from "@tanstack/react-table";
import { Button } from "@/components/ui/button";
import { ArrowUpDown } from "lucide-react";
import { formatNumber, formatDate } from "@/utils/formatters";

export interface CovidDataRow {
  "Country/Region": string;
  Confirmed: number;
  Deaths: number;
  Recovered: number;
  Active: number;
  CFR?: number;
  RecoveryRate?: number;
  ObservationDate: string;
}

export const createCovidDataColumns = (): ColumnDef<CovidDataRow>[] => [
  {
    accessorKey: "Country/Region",
    header: ({ column }) => (
      <Button
        variant="ghost"
        onClick={() => column.toggleSorting(column.getIsSorted() === "asc")}
      >
        Country
        <ArrowUpDown className="ml-2 h-4 w-4" />
      </Button>
    ),
    cell: ({ row }) => (
      <div className="font-medium">{row.getValue("Country/Region")}</div>
    ),
  },
  {
    accessorKey: "Confirmed",
    header: ({ column }) => (
      <Button
        variant="ghost"
        onClick={() => column.toggleSorting(column.getIsSorted() === "asc")}
      >
        Confirmed
        <ArrowUpDown className="ml-2 h-4 w-4" />
      </Button>
    ),
    cell: ({ row }) => (
      <div className="text-blue-600 font-semibold">
        {formatNumber(row.getValue("Confirmed"))}
      </div>
    ),
  },
  {
    accessorKey: "Deaths",
    header: ({ column }) => (
      <Button
        variant="ghost"
        onClick={() => column.toggleSorting(column.getIsSorted() === "asc")}
      >
        Deaths
        <ArrowUpDown className="ml-2 h-4 w-4" />
      </Button>
    ),
    cell: ({ row }) => (
      <div className="text-red-600 font-semibold">
        {formatNumber(row.getValue("Deaths"))}
      </div>
    ),
  },
  {
    accessorKey: "Recovered",
    header: ({ column }) => (
      <Button
        variant="ghost"
        onClick={() => column.toggleSorting(column.getIsSorted() === "asc")}
      >
        Recovered
        <ArrowUpDown className="ml-2 h-4 w-4" />
      </Button>
    ),
    cell: ({ row }) => (
      <div className="text-green-600 font-semibold">
        {formatNumber(row.getValue("Recovered"))}
      </div>
    ),
  },
  {
    accessorKey: "Active",
    header: ({ column }) => (
      <Button
        variant="ghost"
        onClick={() => column.toggleSorting(column.getIsSorted() === "asc")}
      >
        Active
        <ArrowUpDown className="ml-2 h-4 w-4" />
      </Button>
    ),
    cell: ({ row }) => (
      <div className="text-orange-600 font-semibold">
        {formatNumber(row.getValue("Active"))}
      </div>
    ),
  },
  {
    accessorKey: "ObservationDate",
    header: "Last Updated",
    cell: ({ row }) => (
      <div className="text-muted-foreground">
        {formatDate(row.getValue("ObservationDate"))}
      </div>
    ),
  },
];

================================================================================
FILE: D:\covider-fe\src\features\data-tables\components\DataTablePagination.tsx
RELATIVE PATH: src\features\data-tables\components\DataTablePagination.tsx
================================================================================
// ============================================================================
// FILE: src/features/data-tables/components/DataTablePagination.tsx
// ============================================================================
import type { Table } from "@tanstack/react-table";
import { Button } from "@/components/ui/button";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import {
  ChevronLeft,
  ChevronRight,
  ChevronsLeft,
  ChevronsRight,
} from "lucide-react";

interface DataTablePaginationProps<TData> {
  table: Table<TData>;
}

export default function DataTablePagination<TData>({
  table,
}: DataTablePaginationProps<TData>) {
  return (
    <div className="flex items-center justify-between px-2">
      <div className="flex-1 text-sm text-muted-foreground">
        {table.getFilteredSelectedRowModel().rows.length > 0 && (
          <>
            {table.getFilteredSelectedRowModel().rows.length} of{" "}
            {table.getFilteredRowModel().rows.length} row(s) selected.
          </>
        )}
      </div>

      <div className="flex items-center space-x-6 lg:space-x-8">
        <div className="flex items-center space-x-2">
          <p className="text-sm font-medium">Rows per page</p>
          <Select
            value={`${table.getState().pagination.pageSize}`}
            onValueChange={(value) => {
              table.setPageSize(Number(value));
            }}
          >
            <SelectTrigger className="h-8 w-[70px]">
              <SelectValue placeholder={table.getState().pagination.pageSize} />
            </SelectTrigger>
            <SelectContent side="top">
              {[10, 20, 30, 40, 50].map((pageSize) => (
                <SelectItem key={pageSize} value={`${pageSize}`}>
                  {pageSize}
                </SelectItem>
              ))}
            </SelectContent>
          </Select>
        </div>

        <div className="flex w-[100px] items-center justify-center text-sm font-medium">
          Page {table.getState().pagination.pageIndex + 1} of{" "}
          {table.getPageCount()}
        </div>

        <div className="flex items-center space-x-2">
          <Button
            variant="outline"
            className="hidden h-8 w-8 p-0 lg:flex"
            onClick={() => table.setPageIndex(0)}
            disabled={!table.getCanPreviousPage()}
          >
            <span className="sr-only">Go to first page</span>
            <ChevronsLeft className="h-4 w-4" />
          </Button>
          <Button
            variant="outline"
            className="h-8 w-8 p-0"
            onClick={() => table.previousPage()}
            disabled={!table.getCanPreviousPage()}
          >
            <span className="sr-only">Go to previous page</span>
            <ChevronLeft className="h-4 w-4" />
          </Button>
          <Button
            variant="outline"
            className="h-8 w-8 p-0"
            onClick={() => table.nextPage()}
            disabled={!table.getCanNextPage()}
          >
            <span className="sr-only">Go to next page</span>
            <ChevronRight className="h-4 w-4" />
          </Button>
          <Button
            variant="outline"
            className="hidden h-8 w-8 p-0 lg:flex"
            onClick={() => table.setPageIndex(table.getPageCount() - 1)}
            disabled={!table.getCanNextPage()}
          >
            <span className="sr-only">Go to last page</span>
            <ChevronsRight className="h-4 w-4" />
          </Button>
        </div>
      </div>
    </div>
  );
}
================================================================================
FILE: D:\covider-fe\src\features\data-tables\components\DataTableToolbar.tsx
RELATIVE PATH: src\features\data-tables\components\DataTableToolbar.tsx
================================================================================
// ============================================================================
// FILE: src/features/data-tables/components/DataTableToolbar.tsx
// ============================================================================
import { Input } from "@/components/ui/input";
import { Button } from "@/components/ui/button";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import { Search, X, Filter } from "lucide-react";

interface DataTableToolbarProps {
  searchValue: string;
  onSearchChange: (value: string) => void;
  onReset?: () => void;
  filters?: React.ReactNode;
}

export default function DataTableToolbar({
  searchValue,
  onSearchChange,
  onReset,
  filters,
}: DataTableToolbarProps) {
  return (
    <div className="flex items-center justify-between gap-4 mb-4">
      <div className="flex items-center gap-2 flex-1">
        <div className="relative flex-1 max-w-sm">
          <Search className="absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground" />
          <Input
            placeholder="Search..."
            value={searchValue}
            onChange={(e) => onSearchChange(e.target.value)}
            className="pl-9"
          />
        </div>
        {searchValue && (
          <Button
            variant="ghost"
            size="icon"
            onClick={() => onSearchChange("")}
          >
            <X className="h-4 w-4" />
          </Button>
        )}
      </div>

      <div className="flex items-center gap-2">
        {filters}
        {onReset && (
          <Button variant="outline" size="sm" onClick={onReset}>
            <X className="mr-2 h-4 w-4" />
            Reset
          </Button>
        )}
      </div>
    </div>
  );
}

================================================================================
FILE: D:\covider-fe\src\features\data-tables\components\ProcessedDataTable.tsx
RELATIVE PATH: src\features\data-tables\components\ProcessedDataTable.tsx
================================================================================
// ============================================================================
// FILE: src/features/data-tables/components/ProcessedDataTable.tsx
// ============================================================================
import { useState, useMemo } from 'react';
import {
  useReactTable,
  getCoreRowModel,
  getFilteredRowModel,
  getPaginationRowModel,
  getSortedRowModel,
  flexRender,
  createColumnHelper,
} from '@tanstack/react-table';
import type { ColumnDef, SortingState, ColumnFiltersState } from '@tanstack/react-table';
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';
import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from '@/components/ui/table';
import { Input } from '@/components/ui/input';
import { Button } from '@/components/ui/button';
import {
  DropdownMenu,
  DropdownMenuCheckboxItem,
  DropdownMenuContent,
  DropdownMenuTrigger,
} from '@/components/ui/dropdown-menu';
import { ChevronDown, Search, Download, ArrowUpDown } from 'lucide-react';
import { useAllData } from '@/services/queries/dataTableQueries';
import LoadingSpinner from '@/components/feedback/LoadingSpinner';
import ErrorAlert from '@/components/feedback/ErrorAlert';
import { formatNumber, formatDate } from '@/utils/formatters';
import DataTablePagination from './DataTablePagination';

interface DataRow {
  'Country/Region': string;
  Confirmed: number;
  Deaths: number;
  Recovered: number;
  Active: number;
  ObservationDate: string;
}

export default function ProcessedDataTable() {
  const [sorting, setSorting] = useState<SortingState>([]);
  const [columnFilters, setColumnFilters] = useState<ColumnFiltersState>([]);
  const [globalFilter, setGlobalFilter] = useState('');
  const [pagination, setPagination] = useState({
    pageIndex: 0,
    pageSize: 20,
  });

  const { data, isLoading, error, refetch } = useAllData({
    page: pagination.pageIndex + 1,
    page_size: pagination.pageSize,
  });

  const columns: ColumnDef<DataRow>[] = useMemo(
    () => [
      {
        accessorKey: 'Country/Region',
        header: ({ column }) => (
          <Button
            variant="ghost"
            onClick={() => column.toggleSorting(column.getIsSorted() === 'asc')}
          >
            Country
            <ArrowUpDown className="ml-2 h-4 w-4" />
          </Button>
        ),
        cell: ({ row }) => (
          <div className="font-medium">{row.getValue('Country/Region')}</div>
        ),
      },
      {
        accessorKey: 'Confirmed',
        header: ({ column }) => (
          <Button
            variant="ghost"
            onClick={() => column.toggleSorting(column.getIsSorted() === 'asc')}
          >
            Confirmed
            <ArrowUpDown className="ml-2 h-4 w-4" />
          </Button>
        ),
        cell: ({ row }) => (
          <div className="text-blue-600 font-semibold">
            {formatNumber(row.getValue('Confirmed'))}
          </div>
        ),
      },
      {
        accessorKey: 'Deaths',
        header: ({ column }) => (
          <Button
            variant="ghost"
            onClick={() => column.toggleSorting(column.getIsSorted() === 'asc')}
          >
            Deaths
            <ArrowUpDown className="ml-2 h-4 w-4" />
          </Button>
        ),
        cell: ({ row }) => (
          <div className="text-red-600 font-semibold">
            {formatNumber(row.getValue('Deaths'))}
          </div>
        ),
      },
      {
        accessorKey: 'Recovered',
        header: ({ column }) => (
          <Button
            variant="ghost"
            onClick={() => column.toggleSorting(column.getIsSorted() === 'asc')}
          >
            Recovered
            <ArrowUpDown className="ml-2 h-4 w-4" />
          </Button>
        ),
        cell: ({ row }) => (
          <div className="text-green-600 font-semibold">
            {formatNumber(row.getValue('Recovered'))}
          </div>
        ),
      },
      {
        accessorKey: 'Active',
        header: ({ column }) => (
          <Button
            variant="ghost"
            onClick={() => column.toggleSorting(column.getIsSorted() === 'asc')}
          >
            Active
            <ArrowUpDown className="ml-2 h-4 w-4" />
          </Button>
        ),
        cell: ({ row }) => (
          <div className="text-orange-600 font-semibold">
            {formatNumber(row.getValue('Active'))}
          </div>
        ),
      },
      {
        accessorKey: 'ObservationDate',
        header: 'Last Updated',
        cell: ({ row }) => (
          <div className="text-muted-foreground">
            {formatDate(row.getValue('ObservationDate'))}
          </div>
        ),
      },
    ],
    []
  );

  const table = useReactTable({
    data: data?.data || [],
    columns,
    state: {
      sorting,
      columnFilters,
      globalFilter,
      pagination,
    },
    onSortingChange: setSorting,
    onColumnFiltersChange: setColumnFilters,
    onGlobalFilterChange: setGlobalFilter,
    onPaginationChange: setPagination,
    getCoreRowModel: getCoreRowModel(),
    getFilteredRowModel: getFilteredRowModel(),
    getPaginationRowModel: getPaginationRowModel(),
    getSortedRowModel: getSortedRowModel(),
    manualPagination: true,
    pageCount: data?.pagination?.total_pages || 0,
  });

  const handleExportCSV = () => {
    // Export logic here
    console.log('Exporting CSV...');
  };

  if (isLoading) {
    return (
      <Card>
        <CardContent className="py-12">
          <LoadingSpinner size="lg" text="Loading data..." />
        </CardContent>
      </Card>
    );
  }

  if (error) {
    return (
      <Card>
        <CardContent className="py-6">
          <ErrorAlert
            message="Failed to load data. Please try again."
            onRetry={() => refetch()}
          />
        </CardContent>
      </Card>
    );
  }

  return (
    <Card>
      <CardHeader>
        <CardTitle>Processed COVID-19 Data</CardTitle>
      </CardHeader>
      <CardContent>
        {/* Toolbar */}
        <div className="flex items-center justify-between mb-4 gap-4">
          <div className="flex items-center gap-2 flex-1">
            <div className="relative flex-1 max-w-sm">
              <Search className="absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground" />
              <Input
                placeholder="Search countries..."
                value={globalFilter}
                onChange={(e) => setGlobalFilter(e.target.value)}
                className="pl-9"
              />
            </div>
          </div>

          <div className="flex items-center gap-2">
            <DropdownMenu>
              <DropdownMenuTrigger asChild>
                <Button variant="outline" size="sm">
                  Columns
                  <ChevronDown className="ml-2 h-4 w-4" />
                </Button>
              </DropdownMenuTrigger>
              <DropdownMenuContent align="end">
                {table
                  .getAllColumns()
                  .filter((column) => column.getCanHide())
                  .map((column) => {
                    return (
                      <DropdownMenuCheckboxItem
                        key={column.id}
                        className="capitalize"
                        checked={column.getIsVisible()}
                        onCheckedChange={(value) => column.toggleVisibility(!!value)}
                      >
                        {column.id}
                      </DropdownMenuCheckboxItem>
                    );
                  })}
              </DropdownMenuContent>
            </DropdownMenu>

            <Button variant="outline" size="sm" onClick={handleExportCSV}>
              <Download className="mr-2 h-4 w-4" />
              Export
            </Button>
          </div>
        </div>

        {/* Table */}
        <div className="rounded-md border">
          <Table>
            <TableHeader>
              {table.getHeaderGroups().map((headerGroup) => (
                <TableRow key={headerGroup.id}>
                  {headerGroup.headers.map((header) => (
                    <TableHead key={header.id}>
                      {header.isPlaceholder
                        ? null
                        : flexRender(
                            header.column.columnDef.header,
                            header.getContext()
                          )}
                    </TableHead>
                  ))}
                </TableRow>
              ))}
            </TableHeader>
            <TableBody>
              {table.getRowModel().rows?.length ? (
                table.getRowModel().rows.map((row) => (
                  <TableRow
                    key={row.id}
                    data-state={row.getIsSelected() && 'selected'}
                  >
                    {row.getVisibleCells().map((cell) => (
                      <TableCell key={cell.id}>
                        {flexRender(cell.column.columnDef.cell, cell.getContext())}
                      </TableCell>
                    ))}
                  </TableRow>
                ))
              ) : (
                <TableRow>
                  <TableCell colSpan={columns.length} className="h-24 text-center">
                    No results found.
                  </TableCell>
                </TableRow>
              )}
            </TableBody>
          </Table>
        </div>

        {/* Pagination */}
        <div className="mt-4">
          <DataTablePagination table={table} />
        </div>
      </CardContent>
    </Card>
  );
}
================================================================================
FILE: D:\covider-fe\src\features\data-tables\components\RawDataTable.tsx
RELATIVE PATH: src\features\data-tables\components\RawDataTable.tsx
================================================================================
// ============================================================================
// FILE: src/features/data-tables/components/RawDataTable.tsx
// ============================================================================
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";
import { Alert, AlertDescription } from "@/components/ui/alert";
import { Info } from "lucide-react";

export default function RawDataTable() {
  return (
    <Card>
      <CardHeader>
        <CardTitle>Raw COVID-19 Data</CardTitle>
        <CardDescription>
          Unprocessed data from the original source
        </CardDescription>
      </CardHeader>
      <CardContent>
        <Alert>
          <Info className="h-4 w-4" />
          <AlertDescription>
            Raw data table implementation follows the same pattern as
            ProcessedDataTable. Connect to your raw data endpoint and customize
            columns as needed.
          </AlertDescription>
        </Alert>
      </CardContent>
    </Card>
  );
}

================================================================================
FILE: D:\covider-fe\src\features\data-tables\hooks\useTableData.ts
RELATIVE PATH: src\features\data-tables\hooks\useTableData.ts
================================================================================
// ============================================================================
// FILE: src/features/data-tables/hooks/useTableData.ts
// ============================================================================
import { useQuery } from "@tanstack/react-query";
import { apiClient } from "@/services/api/client";
import { API_ENDPOINTS } from "@/services/api/endpoints";

interface UseTableDataParams {
  page?: number;
  pageSize?: number;
  sortBy?: string;
  sortOrder?: "asc" | "desc";
}

export function useTableData(params: UseTableDataParams = {}) {
  return useQuery({
    queryKey: ["tableData", params],
    queryFn: async () => {
      const { data } = await apiClient.get(API_ENDPOINTS.ALL_DATA, {
        params: {
          page: params.page || 1,
          page_size: params.pageSize || 20,
          sort_by: params.sortBy,
          sort_order: params.sortOrder,
        },
      });
      return data;
    },
  });
}

================================================================================
FILE: D:\covider-fe\src\features\data-tables\hooks\useTableFilters.ts
RELATIVE PATH: src\features\data-tables\hooks\useTableFilters.ts
================================================================================
// ============================================================================
// FILE: src/features/data-tables/hooks/useTableFilters.ts
// ============================================================================
import { useState, useCallback } from "react";
import { useDebounce } from "@/hooks/useDebounce";

export function useTableFilters() {
  const [searchQuery, setSearchQuery] = useState("");
  const [selectedMetric, setSelectedMetric] = useState("Confirmed");
  const [dateRange, setDateRange] = useState<{
    start: string | null;
    end: string | null;
  }>({
    start: null,
    end: null,
  });

  const debouncedSearch = useDebounce(searchQuery, 300);

  const resetFilters = useCallback(() => {
    setSearchQuery("");
    setSelectedMetric("Confirmed");
    setDateRange({ start: null, end: null });
  }, []);

  return {
    searchQuery,
    setSearchQuery,
    debouncedSearch,
    selectedMetric,
    setSelectedMetric,
    dateRange,
    setDateRange,
    resetFilters,
  };
}

================================================================================
FILE: D:\covider-fe\src\features\reports\ReportsPage.tsx
RELATIVE PATH: src\features\reports\ReportsPage.tsx
================================================================================
// ============================================================================
// FILE: src/features/reports/ReportsPage.tsx (FIXED - SONNER TOAST)
// ============================================================================
import { useState } from 'react';
import PageHeader from '@/components/layout/PageHeader';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { Image, Download } from 'lucide-react';
import ImageModal from './components/ImageModal';
import { API_ENDPOINTS } from '@/services/api/endpoints';
import { toast } from "sonner"; // <-- FIX: gunakan sonner, bukan useToast()

const REPORT_IMAGES = [
  {
    id: 'time-series',
    title: 'Time Series Report',
    description: 'Global timeline visualization',
    endpoint: API_ENDPOINTS.TIME_SERIES_CHART,
  },
  {
    id: 'geographical',
    title: 'Geographical Report',
    description: 'Top countries by cases',
    endpoint: API_ENDPOINTS.GEOGRAPHICAL_CHART,
  },
  {
    id: 'dashboard',
    title: 'Dashboard Report',
    description: 'Comprehensive overview',
    endpoint: API_ENDPOINTS.DASHBOARD_CHART,
  },
  {
    id: 'correlation',
    title: 'Correlation Heatmap',
    description: 'Metric correlations',
    endpoint: API_ENDPOINTS.CORRELATION_HEATMAP,
  },
];

export default function ReportsPage() {
  const [selectedImage, setSelectedImage] = useState<string | null>(null);
  const [modalOpen, setModalOpen] = useState(false);

  const handleViewImage = (endpoint: string) => {
    setSelectedImage(endpoint);
    setModalOpen(true);
  };

  const handleDownload = async (endpoint: string, filename: string) => {
    try {
      const response = await fetch(endpoint);
      if (!response.ok) throw new Error('Download failed');

      const blob = await response.blob();
      const url = window.URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = filename;
      document.body.appendChild(a);
      a.click();
      window.URL.revokeObjectURL(url);
      document.body.removeChild(a);

      toast.success(`Downloaded ${filename}`); // <-- sonner toast
    } catch (error) {
      console.error('Download failed:', error);
      toast.error("Download failed. Please try again."); // <-- sonner toast
    }
  };

  return (
    <div className="space-y-6">
      <PageHeader
        title="Reports"
        description="Backend-generated visualization reports and images"
      />

      <div className="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
        {REPORT_IMAGES.map((report) => (
          <Card key={report.id}>
            <CardHeader>
              <CardTitle className="flex items-center gap-2">
                <Image className="h-5 w-5" />
                {report.title}
              </CardTitle>
              <CardDescription>{report.description}</CardDescription>
            </CardHeader>

            <CardContent>
              <div className="flex gap-2">
                <Button
                  className="flex-1"
                  onClick={() => handleViewImage(report.endpoint)}
                >
                  View Image
                </Button>

                <Button
                  variant="outline"
                  size="icon"
                  onClick={() =>
                    handleDownload(report.endpoint, `${report.id}.png`)
                  }
                >
                  <Download className="h-4 w-4" />
                </Button>
              </div>
            </CardContent>
          </Card>
        ))}
      </div>

      <ImageModal
        open={modalOpen}
        onOpenChange={setModalOpen}
        imageUrl={selectedImage || ''}
      />
    </div>
  );
}

================================================================================
FILE: D:\covider-fe\src\features\reports\components\DownloadButton.tsx
RELATIVE PATH: src\features\reports\components\DownloadButton.tsx
================================================================================
// ============================================================================
// FILE: src/features/reports/components/DownloadButton.tsx
// ============================================================================
import { Button } from "@/components/ui/button";
import { Download, Loader2 } from "lucide-react";
import { useState } from "react";
import { useToast } from "@/components/ui/use-toast";

interface DownloadButtonProps {
  url: string;
  filename: string;
  variant?: "default" | "outline" | "ghost";
  size?: "default" | "sm" | "lg" | "icon";
  children?: React.ReactNode;
}

export default function DownloadButton({
  url,
  filename,
  variant = "outline",
  size = "default",
  children,
}: DownloadButtonProps) {
  const [isDownloading, setIsDownloading] = useState(false);
  const { toast } = useToast();

  const handleDownload = async () => {
    setIsDownloading(true);
    try {
      const response = await fetch(url);
      if (!response.ok) throw new Error("Download failed");

      const blob = await response.blob();
      const downloadUrl = window.URL.createObjectURL(blob);
      const link = document.createElement("a");
      link.href = downloadUrl;
      link.download = filename;
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
      window.URL.revokeObjectURL(downloadUrl);

      toast({
        title: "Download Complete",
        description: `${filename} has been downloaded successfully.`,
      });
    } catch (error) {
      console.error("Download error:", error);
      toast({
        title: "Download Failed",
        description: "Unable to download the file. Please try again.",
        variant: "destructive",
      });
    } finally {
      setIsDownloading(false);
    }
  };

  return (
    <Button
      variant={variant}
      size={size}
      onClick={handleDownload}
      disabled={isDownloading}
    >
      {isDownloading ? (
        <Loader2 className="mr-2 h-4 w-4 animate-spin" />
      ) : (
        <Download className="mr-2 h-4 w-4" />
      )}
      {children || "Download"}
    </Button>
  );
}

================================================================================
FILE: D:\covider-fe\src\features\reports\components\ImageModal.tsx
RELATIVE PATH: src\features\reports\components\ImageModal.tsx
================================================================================
// ============================================================================
// FILE: src/features/reports/components/ImageModal.tsx
// ============================================================================
import BaseModal from "@/components/modals/BaseModal";
import LoadingSpinner from "@/components/feedback/LoadingSpinner";
import { useState } from "react";

interface ImageModalProps {
  open: boolean;
  onOpenChange: (open: boolean) => void;
  imageUrl: string;
}

export default function ImageModal({
  open,
  onOpenChange,
  imageUrl,
}: ImageModalProps) {
  const [loading, setLoading] = useState(true);

  return (
    <BaseModal
      open={open}
      onOpenChange={onOpenChange}
      title="Report Visualization"
      size="xl"
    >
      <div className="relative">
        {loading && (
          <div className="absolute inset-0 flex items-center justify-center">
            <LoadingSpinner text="Loading image..." />
          </div>
        )}
        <img
          src={imageUrl}
          alt="Report visualization"
          className="w-full h-auto rounded-lg"
          onLoad={() => setLoading(false)}
          onError={() => setLoading(false)}
        />
      </div>
    </BaseModal>
  );
}

================================================================================
FILE: D:\covider-fe\src\features\reports\components\ReportGallery.tsx
RELATIVE PATH: src\features\reports\components\ReportGallery.tsx
================================================================================
// ============================================================================
// FILE: src/features/reports/components/ReportGallery.tsx
// ============================================================================
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";
import { Button } from "@/components/ui/button";
import { Image, Download, Eye } from "lucide-react";

interface ReportItem {
  id: string;
  title: string;
  description: string;
  imageUrl: string;
  thumbnailUrl?: string;
}

interface ReportGalleryProps {
  reports: ReportItem[];
  onView: (imageUrl: string) => void;
  onDownload: (imageUrl: string, filename: string) => void;
}

export default function ReportGallery({
  reports,
  onView,
  onDownload,
}: ReportGalleryProps) {
  return (
    <div className="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
      {reports.map((report) => (
        <Card key={report.id} className="overflow-hidden">
          <CardHeader>
            <CardTitle className="flex items-center gap-2 text-lg">
              <Image className="h-5 w-5" />
              {report.title}
            </CardTitle>
            <CardDescription>{report.description}</CardDescription>
          </CardHeader>
          <CardContent className="space-y-4">
            {/* Thumbnail Preview */}
            <div
              className="aspect-video bg-muted rounded-lg overflow-hidden cursor-pointer hover:opacity-80 transition-opacity"
              onClick={() => onView(report.imageUrl)}
            >
              {report.thumbnailUrl ? (
                <img
                  src={report.thumbnailUrl}
                  alt={report.title}
                  className="w-full h-full object-cover"
                />
              ) : (
                <div className="w-full h-full flex items-center justify-center">
                  <Image className="h-12 w-12 text-muted-foreground" />
                </div>
              )}
            </div>

            {/* Action Buttons */}
            <div className="flex gap-2">
              <Button
                variant="default"
                className="flex-1"
                onClick={() => onView(report.imageUrl)}
              >
                <Eye className="mr-2 h-4 w-4" />
                View
              </Button>
              <Button
                variant="outline"
                size="icon"
                onClick={() => onDownload(report.imageUrl, `${report.id}.png`)}
              >
                <Download className="h-4 w-4" />
              </Button>
            </div>
          </CardContent>
        </Card>
      ))}
    </div>
  );
}

================================================================================
FILE: D:\covider-fe\src\features\reports\hooks\useReportImages.ts
RELATIVE PATH: src\features\reports\hooks\useReportImages.ts
================================================================================
// ============================================================================
// FILE: src/features/reports/hooks/useReportImages.ts
// ============================================================================
import { useState } from "react";

export function useReportImages() {
  const [selectedImage, setSelectedImage] = useState<string | null>(null);
  const [isModalOpen, setIsModalOpen] = useState(false);

  const viewImage = (imageUrl: string) => {
    setSelectedImage(imageUrl);
    setIsModalOpen(true);
  };

  const closeModal = () => {
    setIsModalOpen(false);
    setSelectedImage(null);
  };

  const downloadImage = async (url: string, filename: string) => {
    try {
      const response = await fetch(url);
      const blob = await response.blob();
      const downloadUrl = window.URL.createObjectURL(blob);
      const link = document.createElement("a");
      link.href = downloadUrl;
      link.download = filename;
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
      window.URL.revokeObjectURL(downloadUrl);
    } catch (error) {
      console.error("Download failed:", error);
      throw error;
    }
  };

  return {
    selectedImage,
    isModalOpen,
    viewImage,
    closeModal,
    downloadImage,
  };
}

================================================================================
FILE: D:\covider-fe\src\hooks\useDebounce.ts
RELATIVE PATH: src\hooks\useDebounce.ts
================================================================================
// ============================================================================
// FILE: src/hooks/useDebounce.ts
// ============================================================================
import { useEffect, useState } from 'react';

export function useDebounce<T>(value: T, delay: number = 500): T {
  const [debouncedValue, setDebouncedValue] = useState<T>(value);

  useEffect(() => {
    const handler = setTimeout(() => {
      setDebouncedValue(value);
    }, delay);

    return () => {
      clearTimeout(handler);
    };
  }, [value, delay]);

  return debouncedValue;
}


================================================================================
FILE: D:\covider-fe\src\hooks\useLocalStorage.ts
RELATIVE PATH: src\hooks\useLocalStorage.ts
================================================================================
// ============================================================================
// FILE: src/hooks/useLocalStorage.ts
// ============================================================================
import { useState, useEffect } from "react";

export function useLocalStorage<T>(
  key: string,
  initialValue: T
): [T, (value: T | ((val: T) => T)) => void] {
  const [storedValue, setStoredValue] = useState<T>(() => {
    try {
      const item = window.localStorage.getItem(key);
      return item ? JSON.parse(item) : initialValue;
    } catch (error) {
      console.error("Error reading from localStorage:", error);
      return initialValue;
    }
  });

  const setValue = (value: T | ((val: T) => T)) => {
    try {
      const valueToStore =
        value instanceof Function ? value(storedValue) : value;
      setStoredValue(valueToStore);
      window.localStorage.setItem(key, JSON.stringify(valueToStore));
    } catch (error) {
      console.error("Error writing to localStorage:", error);
    }
  };

  return [storedValue, setValue];
}

================================================================================
FILE: D:\covider-fe\src\hooks\useMediaQuery.ts
RELATIVE PATH: src\hooks\useMediaQuery.ts
================================================================================
// ============================================================================
// FILE: src/hooks/useMediaQuery.ts
// ============================================================================
import { useEffect, useState } from "react";

export function useMediaQuery(query: string): boolean {
  const [matches, setMatches] = useState(false);

  useEffect(() => {
    const media = window.matchMedia(query);
    if (media.matches !== matches) {
      setMatches(media.matches);
    }

    const listener = () => setMatches(media.matches);
    media.addEventListener("change", listener);

    return () => media.removeEventListener("change", listener);
  }, [matches, query]);

  return matches;
}

================================================================================
FILE: D:\covider-fe\src\hooks\useTheme.ts
RELATIVE PATH: src\hooks\useTheme.ts
================================================================================

================================================================================
FILE: D:\covider-fe\src\lib\utils.ts
RELATIVE PATH: src\lib\utils.ts
================================================================================
import { clsx, type ClassValue } from "clsx"
import { twMerge } from "tailwind-merge"

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs))
}

================================================================================
FILE: D:\covider-fe\src\services\api\client.ts
RELATIVE PATH: src\services\api\client.ts
================================================================================
// ============================================================================
// FILE: src/services/api/client.ts (ENHANCED)
// ============================================================================
import axios, { AxiosError } from 'axios';
import { getErrorMessage } from '@/utils/errorHandling';

const API_BASE_URL = import.meta.env.VITE_API_BASE_URL || 'http://localhost:8000';

export const apiClient = axios.create({
  baseURL: API_BASE_URL,
  timeout: 30000,
  headers: {
    'Content-Type': 'application/json',
  },
});

// Request interceptor
apiClient.interceptors.request.use(
  (config) => {
    return config;
  },
  (error) => {
    return Promise.reject(error);
  }
);

// Response interceptor with enhanced error handling
apiClient.interceptors.response.use(
  (response) => response,
  (error: AxiosError) => {
    if (error.response) {
      console.error('API Error:', {
        status: error.response.status,
        data: error.response.data,
        url: error.config?.url,
      });
    } else if (error.request) {
      console.error('Network Error:', {
        message: error.message,
        url: error.config?.url,
      });
    } else {
      console.error('Error:', error.message);
    }
    
    const message = getErrorMessage(error);
    return Promise.reject(new Error(message));
  }
);


================================================================================
FILE: D:\covider-fe\src\services\api\endpoints.ts
RELATIVE PATH: src\services\api\endpoints.ts
================================================================================
// ============================================================================
// FILE: src/services/api/endpoints.ts (COMPLETE VERSION)
// ============================================================================
export const API_ENDPOINTS = {
  // Dashboard
  DASHBOARD_SUMMARY: '/api/v1/dashboard/summary',
  DASHBOARD_KPIS: '/api/v1/dashboard/kpis',
  DASHBOARD_RECENT_UPDATES: '/api/v1/dashboard/recent-updates',
  
  // Time Series
  TIME_SERIES_GLOBAL: '/api/v1/time-series/global',
  TIME_SERIES_COUNTRY: (country: string) => `/api/v1/time-series/country/${encodeURIComponent(country)}`,
  TIME_SERIES_DAILY_STATISTICS: '/api/v1/time-series/daily-statistics',
  TIME_SERIES_DATE_RANGE: '/api/v1/time-series/date-range',
  
  // Geographical
  COUNTRIES_SUMMARY: '/api/v1/geographical/countries-summary',
  TOP_COUNTRIES: '/api/v1/geographical/top-countries',
  COUNTRY_DETAILS: (country: string) => `/api/v1/geographical/country/${encodeURIComponent(country)}/details`,
  PROVINCES: (country: string) => `/api/v1/geographical/provinces/${encodeURIComponent(country)}`,
  COMPARE_COUNTRIES: '/api/v1/geographical/compare-countries',
  
  // Statistics
  GLOBAL_METRICS: '/api/v1/statistics/global-metrics',
  MORTALITY_RATES: '/api/v1/statistics/mortality-rates',
  RECOVERY_RATES: '/api/v1/statistics/recovery-rates',
  CORRELATION_MATRIX: '/api/v1/statistics/correlation-matrix',
  DISTRIBUTION_STATS: '/api/v1/statistics/distribution-stats',
  OUTLIERS: '/api/v1/statistics/outliers',
  
  // Data Tables
  ALL_DATA: '/api/v1/tables/all-data',
  COUNTRIES_LIST: '/api/v1/tables/countries-list',
  DAILY_SUMMARY: '/api/v1/tables/daily-summary',
  COUNTRY_TIMELINE: (country: string) => `/api/v1/tables/country-timeline/${encodeURIComponent(country)}`,
  
  // Visualizations
  TIME_SERIES_CHART: '/api/v1/visualizations/time-series-chart',
  GEOGRAPHICAL_CHART: '/api/v1/visualizations/geographical-chart',
  DASHBOARD_CHART: '/api/v1/visualizations/dashboard',
  TOP_COUNTRIES_CHART: '/api/v1/visualizations/top-countries-chart',
  COMPARISON_CHART: '/api/v1/visualizations/comparison-chart',
  CORRELATION_HEATMAP: '/api/v1/visualizations/correlation-heatmap',
  
  // Predictions
  COUNTRY_PREDICTION: (country: string) => `/api/v1/predictions/country/${encodeURIComponent(country)}`,
  
  // Comparisons
  COMPARISON_TIMELINE_CHART: '/api/v1/comparisons/timeline-chart',
  COMPARISON_COMPOSITION_CHART: '/api/v1/comparisons/composition-chart',
  
  // Advanced Analytics
  ANOMALIES: '/api/v1/advanced-analytics/anomalies',
  EPIDEMIC_WAVES: (country: string) => `/api/v1/advanced-analytics/epidemic-waves/${encodeURIComponent(country)}`,
  REPRODUCTION_NUMBER: (country: string) => `/api/v1/advanced-analytics/reproduction-number/${encodeURIComponent(country)}`,
  CLUSTERING: '/api/v1/advanced-analytics/clustering',
  CORRELATION_NETWORK: '/api/v1/advanced-analytics/correlation-network',
  LAG_CORRELATION: '/api/v1/advanced-analytics/lag-correlation',
  RESILIENCE: '/api/v1/advanced-analytics/resilience',
} as const;


================================================================================
FILE: D:\covider-fe\src\services\api\types.ts
RELATIVE PATH: src\services\api\types.ts
================================================================================
// ============================================================================
// FILE: src/services/api/types.ts
// ============================================================================
export interface ApiResponse<T> {
  status: string;
  data: T;
  message?: string;
}

export interface PaginationMeta {
  page: number;
  page_size: number;
  total_records: number;
  total_pages: number;
}

export interface PaginatedResponse<T> {
  status: string;
  data: T[];
  pagination: PaginationMeta;
}

export interface ApiError {
  message: string;
  code?: string;
  details?: Record<string, unknown>;
}

================================================================================
FILE: D:\covider-fe\src\services\queries\advancedAnalyticsQueries.ts
RELATIVE PATH: src\services\queries\advancedAnalyticsQueries.ts
================================================================================
// ============================================================================
// FILE: src/services/queries/advancedAnalyticsQueries.ts
// ============================================================================
import { useQuery } from '@tanstack/react-query';
import { apiClient } from '../api/client';
import { API_ENDPOINTS } from '../api/endpoints';

export const useAnomalies = (metric: string = 'Confirmed') => {
  return useQuery({
    queryKey: ['anomalies', metric],
    queryFn: async () => {
      const { data } = await apiClient.get(API_ENDPOINTS.ANOMALIES, {
        params: { metric, format: 'json' }
      });
      return data;
    },
  });
};

export const useEpidemicWaves = (country: string) => {
  return useQuery({
    queryKey: ['epidemic-waves', country],
    queryFn: async () => {
      const { data } = await apiClient.get(
        API_ENDPOINTS.EPIDEMIC_WAVES(country),
        { params: { format: 'json' } }
      );
      return data;
    },
    enabled: !!country,
  });
};

export const useReproductionNumber = (country: string) => {
  return useQuery({
    queryKey: ['reproduction-number', country],
    queryFn: async () => {
      const { data } = await apiClient.get(
        API_ENDPOINTS.REPRODUCTION_NUMBER(country),
        { params: { format: 'json' } }
      );
      return data;
    },
    enabled: !!country,
  });
};

export const useClustering = (nClusters: number = 5) => {
  return useQuery({
    queryKey: ['clustering', nClusters],
    queryFn: async () => {
      const { data } = await apiClient.get(API_ENDPOINTS.CLUSTERING, {
        params: { n_clusters: nClusters, format: 'json' }
      });
      return data;
    },
  });
};

export const useResilience = (topN: number = 20) => {
  return useQuery({
    queryKey: ['resilience', topN],
    queryFn: async () => {
      const { data } = await apiClient.get(API_ENDPOINTS.RESILIENCE, {
        params: { top_n: topN, format: 'json' }
      });
      return data;
    },
  });
};

================================================================================
FILE: D:\covider-fe\src\services\queries\analyticsQueries.ts
RELATIVE PATH: src\services\queries\analyticsQueries.ts
================================================================================
// ============================================================================
// FILE: src/services/queries/analyticsQueries.ts
// ============================================================================
import { useQuery } from '@tanstack/react-query';
import { apiClient } from '../api/client';
import { API_ENDPOINTS } from '../api/endpoints';

export const useTimeSeriesGlobal = () => {
  return useQuery({
    queryKey: ['timeSeries', 'global'],
    queryFn: async () => {
      const { data } = await apiClient.get(API_ENDPOINTS.TIME_SERIES_GLOBAL);
      return data;
    },
  });
};

export const useTimeSeriesCountry = (country: string) => {
  return useQuery({
    queryKey: ['timeSeries', 'country', country],
    queryFn: async () => {
      const { data } = await apiClient.get(API_ENDPOINTS.TIME_SERIES_COUNTRY(country));
      return data;
    },
    enabled: !!country,
  });
};

export const useCountryPrediction = (country: string, days: number = 7) => {
  return useQuery({
    queryKey: ['prediction', country, days],
    queryFn: async () => {
      const { data } = await apiClient.get(
        API_ENDPOINTS.COUNTRY_PREDICTION(country),
        { params: { days } }
      );
      return data;
    },
    enabled: !!country,
  });
};


================================================================================
FILE: D:\covider-fe\src\services\queries\countryQueries.ts
RELATIVE PATH: src\services\queries\countryQueries.ts
================================================================================
// ============================================================================
// FILE: src/services/queries/countryQueries.ts
// ============================================================================
import { useQuery } from '@tanstack/react-query';
import { apiClient } from '../api/client';
import { API_ENDPOINTS } from '../api/endpoints';

export const useCountriesSummary = () => {
  return useQuery({
    queryKey: ['countries', 'summary'],
    queryFn: async () => {
      const { data } = await apiClient.get(API_ENDPOINTS.COUNTRIES_SUMMARY);
      return data;
    },
  });
};

export const useTopCountries = (metric: string = 'Confirmed', limit: number = 20) => {
  return useQuery({
    queryKey: ['countries', 'top', metric, limit],
    queryFn: async () => {
      const { data } = await apiClient.get(API_ENDPOINTS.TOP_COUNTRIES, {
        params: { metric, limit },
      });
      return data;
    },
  });
};

export const useCountryDetails = (country: string) => {
  return useQuery({
    queryKey: ['country', 'details', country],
    queryFn: async () => {
      const { data } = await apiClient.get(API_ENDPOINTS.COUNTRY_DETAILS(country));
      return data;
    },
    enabled: !!country,
  });
};







================================================================================
FILE: D:\covider-fe\src\services\queries\dashboardQueries.ts
RELATIVE PATH: src\services\queries\dashboardQueries.ts
================================================================================
// ============================================================================
// FILE: src/services/queries/dashboardQueries.ts
// ============================================================================
import { useQuery } from "@tanstack/react-query";
import { apiClient } from "../api/client";
import { API_ENDPOINTS } from "../api/endpoints";

export const useDashboardSummary = () => {
  return useQuery({
    queryKey: ["dashboard", "summary"],
    queryFn: async () => {
      const { data } = await apiClient.get(API_ENDPOINTS.DASHBOARD_SUMMARY);
      return data;
    },
  });
};

export const useDashboardKPIs = () => {
  return useQuery({
    queryKey: ["dashboard", "kpis"],
    queryFn: async () => {
      const { data } = await apiClient.get(API_ENDPOINTS.DASHBOARD_KPIS);
      return data;
    },
  });
};

================================================================================
FILE: D:\covider-fe\src\services\queries\dataTableQueries.ts
RELATIVE PATH: src\services\queries\dataTableQueries.ts
================================================================================
// ============================================================================
// FILE: src/services/queries/dataTableQueries.ts
// ============================================================================
import { useQuery } from "@tanstack/react-query";
import { apiClient } from "../api/client";
import { API_ENDPOINTS } from "../api/endpoints";

interface TableParams {
  page?: number;
  page_size?: number;
  sort_by?: string;
  sort_order?: "asc" | "desc";
}

export const useAllData = (params: TableParams = {}) => {
  return useQuery({
    queryKey: ["allData", params],
    queryFn: async () => {
      const { data } = await apiClient.get(API_ENDPOINTS.ALL_DATA, { params });
      return data;
    },
  });
};

export const useCountriesList = () => {
  return useQuery({
    queryKey: ["countriesList"],
    queryFn: async () => {
      const { data } = await apiClient.get(API_ENDPOINTS.COUNTRIES_LIST);
      return data;
    },
  });
};

================================================================================
FILE: D:\covider-fe\src\stores\filterStore.ts
RELATIVE PATH: src\stores\filterStore.ts
================================================================================

================================================================================
FILE: D:\covider-fe\src\stores\modalStore.ts
RELATIVE PATH: src\stores\modalStore.ts
================================================================================
// ============================================================================
// FILE: src/stores/modalStore.ts
// ============================================================================
import { create } from "zustand";

interface ModalState {
  isOpen: boolean;
  modalType: string | null;
  modalData: unknown;
  openModal: (type: string, data?: unknown) => void;
  closeModal: () => void;
}

export const useModalStore = create<ModalState>((set) => ({
  isOpen: false,
  modalType: null,
  modalData: null,
  openModal: (type, data = null) =>
    set({ isOpen: true, modalType: type, modalData: data }),
  closeModal: () => set({ isOpen: false, modalType: null, modalData: null }),
}));

================================================================================
FILE: D:\covider-fe\src\stores\themeStore.ts
RELATIVE PATH: src\stores\themeStore.ts
================================================================================
// ============================================================================
// FILE: src/stores/themeStore.ts
// ============================================================================
import { create } from "zustand";
import { persist } from "zustand/middleware";

interface ThemeState {
  theme: "light" | "dark" | "system";
  setTheme: (theme: "light" | "dark" | "system") => void;
}

export const useThemeStore = create<ThemeState>()(
  persist(
    (set) => ({
      theme: "system",
      setTheme: (theme) => set({ theme }),
    }),
    {
      name: "theme-storage",
    }
  )
);

================================================================================
FILE: D:\covider-fe\src\styles\globals.css
RELATIVE PATH: src\styles\globals.css
================================================================================
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;
    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;
    --primary: 221.2 83.2% 53.3%;
    --primary-foreground: 210 40% 98%;
    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;
    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;
    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;
    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 221.2 83.2% 53.3%;
    --radius: 0.5rem;
  }

  .dark {
    /* Grok-inspired dark theme */
    --background: 224 71% 4%;
    --foreground: 213 31% 91%;
    --card: 224 71% 4%;
    --card-foreground: 213 31% 91%;
    --popover: 224 71% 4%;
    --popover-foreground: 213 31% 91%;
    --primary: 210 40% 98%;
    --primary-foreground: 222.2 47.4% 11.2%;
    --secondary: 222.2 47.4% 11.2%;
    --secondary-foreground: 210 40% 98%;
    --muted: 223 47% 11%;
    --muted-foreground: 215.4 16.3% 56.9%;
    --accent: 216 34% 17%;
    --accent-foreground: 210 40% 98%;
    --destructive: 0 63% 31%;
    --destructive-foreground: 210 40% 98%;
    --border: 216 34% 17%;
    --input: 216 34% 17%;
    --ring: 216 34% 17%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
    font-feature-settings: "rlig" 1, "calt" 1;
  }
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: hsl(var(--muted));
}

::-webkit-scrollbar-thumb {
  background: hsl(var(--muted-foreground));
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: hsl(var(--foreground));
}

================================================================================
FILE: D:\covider-fe\src\styles\themes.css
RELATIVE PATH: src\styles\themes.css
================================================================================

================================================================================
FILE: D:\covider-fe\src\types\analytics.types.ts
RELATIVE PATH: src\types\analytics.types.ts
================================================================================
// ============================================================================
// FILE: src/types/analytics.types.ts
// ============================================================================

// =======================
// Time Series
// =======================
export interface TimeSeriesData {
  ObservationDate: string;
  Confirmed: number;
  Deaths: number;
  Recovered: number;
  Active: number;
}

// =======================
// Prediction
// =======================
export interface PredictionData {
  date: string;
  actual?: number;
  predicted?: number;
}

export interface PredictionResponse {
  status: string;
  country: string;
  days_predicted: number;
  predictions: Record<string, number>;
  last_actual_date: string;
  last_actual_value: number;
}

// =======================
// Chart Metrics (UI layer)
// =======================
export interface ChartMetric {
  key: string;
  label: string;
  color: string;
  enabled: boolean;
}

// =======================
// Anomaly Detection (NEW)
// =======================
export interface AnomalyItem {
  ["Country/Region"]: string;
  Confirmed: number;
  Deaths: number;
  Recovered: number;
  AnomalyScore: number;

  // allow flexible numeric fields
  [key: string]: string | number;
}

export interface AnomalyResponse {
  total_anomalies: number;
  anomalies: AnomalyItem[];
}

// =======================
// K-Means Clustering
// =======================
export interface ClusterItem {
  cluster_id: number;
  num_countries: number;
  avg_confirmed: number;
  avg_deaths: number;
  avg_cfr: number;
  countries: string[];
}

export interface ClusteringResponse {
  clusters: ClusterItem[];
}


================================================================================
FILE: D:\covider-fe\src\types\api.types.ts
RELATIVE PATH: src\types\api.types.ts
================================================================================
// ============================================================================
// FILE: src/types/api.types.ts
// ============================================================================
export interface ApiResponse<T> {
  status: string;
  data: T;
  message?: string;
}

export interface PaginatedResponse<T> {
  status: string;
  data: T[];
  pagination: {
    page: number;
    page_size: number;
    total_records: number;
    total_pages: number;
  };
}

export interface GlobalMetrics {
  total_confirmed: number;
  total_deaths: number;
  total_recovered: number;
  total_active: number;
  global_cfr: number;
  global_recovery_rate: number;
  global_active_rate: number;
  as_of_date: string;
}

export interface CountryData {
  "Country/Region": string;
  Confirmed: number;
  Deaths: number;
  Recovered: number;
  Active: number;
  CFR: number;
  RecoveryRate: number;
  ObservationDate: string;
}

export interface TimeSeriesPoint {
  ObservationDate: string;
  Confirmed: number;
  Deaths: number;
  Recovered: number;
  Active: number;
  DailyConfirmed?: number;
  DailyDeaths?: number;
  DailyRecovered?: number;
}

export interface PredictionResponse {
  status: string;
  country: string;
  days_predicted: number;
  predictions: Record<string, number>;
  last_actual_date: string;
  last_actual_value: number;
}

export interface AdvancedAnalyticsResponse {
  status: string;
  data?: any;
  metric?: string;
  country?: string;
  [key: string]: any;
}

================================================================================
FILE: D:\covider-fe\src\types\dashboard.types.ts
RELATIVE PATH: src\types\dashboard.types.ts
================================================================================
// ============================================================================
// FILE: src/types/dashboard.types.ts
// ============================================================================
export interface KPI {
  label: string;
  value: number | string;
  format: "number" | "percentage" | "string";
  color: string;
  trend?: number;
}

export interface GlobalMetrics {
  total_confirmed: number;
  total_deaths: number;
  total_recovered: number;
  total_active: number;
  global_cfr: number;
  global_recovery_rate: number;
  as_of_date: string;
}

export interface DashboardSummary {
  status: string;
  global_metrics: GlobalMetrics;
  top_countries: CountrySummary[];
  date_range: {
    start: string;
    end: string;
    days: number;
  };
}

export interface CountrySummary {
  "Country/Region": string;
  Confirmed: number;
  Deaths: number;
  Recovered: number;
  Active: number;
  CFR: number;
  RecoveryRate: number;
  ObservationDate: string;
}

================================================================================
FILE: D:\covider-fe\src\types\index.ts
RELATIVE PATH: src\types\index.ts
================================================================================
// ============================================================================
// FILE: src/types/index.ts
// ============================================================================
export * from "./dashboard.types";
export * from "./analytics.types";
export * from "./table.types";

// ============================================================================
// FILE: src/stores/filterStore.ts
// ============================================================================
import { create } from "zustand";

interface FilterState {
  selectedCountries: string[];
  selectedMetric: string;
  dateRange: {
    start: string | null;
    end: string | null;
  };
  setSelectedCountries: (countries: string[]) => void;
  setSelectedMetric: (metric: string) => void;
  setDateRange: (start: string | null, end: string | null) => void;
  resetFilters: () => void;
}

export const useFilterStore = create<FilterState>((set) => ({
  selectedCountries: [],
  selectedMetric: "Confirmed",
  dateRange: {
    start: null,
    end: null,
  },
  setSelectedCountries: (countries) => set({ selectedCountries: countries }),
  setSelectedMetric: (metric) => set({ selectedMetric: metric }),
  setDateRange: (start, end) => set({ dateRange: { start, end } }),
  resetFilters: () =>
    set({
      selectedCountries: [],
      selectedMetric: "Confirmed",
      dateRange: { start: null, end: null },
    }),
}));

================================================================================
FILE: D:\covider-fe\src\types\table.types.ts
RELATIVE PATH: src\types\table.types.ts
================================================================================
// ============================================================================
// FILE: src/types/table.types.ts
// ============================================================================
import {
  ColumnDef,
  SortingState,
  ColumnFiltersState,
} from "@tanstack/react-table";

export interface TableState {
  sorting: SortingState;
  columnFilters: ColumnFiltersState;
  globalFilter: string;
  pagination: {
    pageIndex: number;
    pageSize: number;
  };
}

export interface DataTableProps<TData, TValue> {
  columns: ColumnDef<TData, TValue>[];
  data: TData[];
  isLoading?: boolean;
  error?: string;
  onRetry?: () => void;
}

================================================================================
FILE: D:\covider-fe\src\utils\cn.ts
RELATIVE PATH: src\utils\cn.ts
================================================================================
// ============================================================================
// FILE: src/utils/cn.ts
// ============================================================================
import { type ClassValue, clsx } from "clsx";
import { twMerge } from "tailwind-merge";

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs));
}

================================================================================
FILE: D:\covider-fe\src\utils\constants.ts
RELATIVE PATH: src\utils\constants.ts
================================================================================
// ============================================================================
// FILE: src/utils/constants.ts
// ============================================================================
export const APP_NAME = "COVID-19 Dashboard";
export const APP_VERSION = "1.0.0";

export const DATE_FORMATS = {
  DISPLAY: "MMM dd, yyyy",
  API: "yyyy-MM-dd",
  FULL: "MMMM dd, yyyy HH:mm:ss",
} as const;

export const METRIC_LABELS = {
  Confirmed: "Confirmed Cases",
  Deaths: "Deaths",
  Recovered: "Recovered",
  Active: "Active Cases",
  CFR: "Case Fatality Rate",
  RecoveryRate: "Recovery Rate",
} as const;

export const METRIC_COLORS = {
  Confirmed: "#3b82f6",
  Deaths: "#ef4444",
  Recovered: "#22c55e",
  Active: "#f97316",
} as const;

export const TABLE_PAGE_SIZES = [10, 20, 30, 40, 50] as const;

export const PREDICTION_DAYS_OPTIONS = [7, 14, 30] as const;

export const TOP_COUNTRIES_OPTIONS = [10, 20, 30, 50] as const;

================================================================================
FILE: D:\covider-fe\src\utils\errorHandling.ts
RELATIVE PATH: src\utils\errorHandling.ts
================================================================================
// ============================================================================
// FILE: src/utils/errorHandling.ts
// ============================================================================
import { AxiosError } from "axios";

export interface ApiErrorResponse {
  detail: string;
  status?: number;
}

export function isApiError(
  error: unknown
): error is AxiosError<ApiErrorResponse> {
  return (
    error instanceof Error &&
    "isAxiosError" in error &&
    error.isAxiosError === true
  );
}

export function getErrorMessage(error: unknown): string {
  if (isApiError(error)) {
    if (error.response?.data?.detail) {
      return error.response.data.detail;
    }
    if (error.response?.status === 404) {
      return "Resource not found";
    }
    if (error.response?.status === 500) {
      return "Internal server error";
    }
    if (error.message) {
      return error.message;
    }
  }

  if (error instanceof Error) {
    return error.message;
  }

  return "An unexpected error occurred";
}

export function handleApiError(error: unknown): never {
  const message = getErrorMessage(error);
  throw new Error(message);
}

================================================================================
FILE: D:\covider-fe\src\utils\formatters.ts
RELATIVE PATH: src\utils\formatters.ts
================================================================================
// ============================================================================
// FILE: src/utils/formatters.ts
// ============================================================================
export const formatNumber = (num: number): string => {
  return new Intl.NumberFormat("en-US").format(num);
};

export const formatPercentage = (num: number): string => {
  return `${num.toFixed(2)}%`;
};

export const formatDate = (date: string | Date): string => {
  return new Date(date).toLocaleDateString("en-US", {
    year: "numeric",
    month: "short",
    day: "numeric",
  });
};

================================================================================
FILE: D:\covider-fe\src\utils\validators.ts
RELATIVE PATH: src\utils\validators.ts
================================================================================
// ============================================================================
// FILE: src/utils/validators.ts
// ============================================================================
export const isValidDate = (date: string | Date): boolean => {
  const parsed = new Date(date);
  return !isNaN(parsed.getTime());
};

export const isValidNumber = (value: unknown): boolean => {
  return typeof value === "number" && !isNaN(value) && isFinite(value);
};

export const isValidCountryName = (name: string): boolean => {
  return name.length > 0 && name.length <= 100;
};

export const sanitizeNumber = (
  value: unknown,
  defaultValue: number = 0
): number => {
  if (typeof value === "number" && isValidNumber(value)) {
    return value;
  }
  if (typeof value === "string") {
    const parsed = parseFloat(value);
    if (isValidNumber(parsed)) {
      return parsed;
    }
  }
  return defaultValue;
};


